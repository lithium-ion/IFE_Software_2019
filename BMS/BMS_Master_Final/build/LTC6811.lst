ARM GAS  /tmp/cccH07eq.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"LTC6811.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.initPECTable,"ax",%progbits
  18              		.align	1
  19              		.global	initPECTable
  20              		.arch armv7e-m
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  24              		.fpu fpv4-sp-d16
  26              	initPECTable:
  27              	.LFB130:
  28              		.file 1 "Src/LTC6811.c"
   1:Src/LTC6811.c **** #include "LTC6811.h"
   2:Src/LTC6811.c **** 
   3:Src/LTC6811.c **** //CommandCodeTypedef CommandCode;
   4:Src/LTC6811.c **** 
   5:Src/LTC6811.c **** uint16_t pec15Table[256];
   6:Src/LTC6811.c **** uint16_t CRC15_POLY = 0x4599;
   7:Src/LTC6811.c **** 
   8:Src/LTC6811.c **** void initPECTable(void) {
  29              		.loc 1 8 25 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		@ link register save eliminated.
   9:Src/LTC6811.c **** 	
  10:Src/LTC6811.c **** 	uint16_t remainder;
  34              		.loc 1 10 2 view .LVU1
  11:Src/LTC6811.c **** 	
  12:Src/LTC6811.c **** 	for (int i = 0; i < 256; i++) {
  35              		.loc 1 12 2 view .LVU2
  36              	.LBB2:
  37              		.loc 1 12 7 view .LVU3
  38              	.LVL0:
  39              		.loc 1 12 11 is_stmt 0 view .LVU4
  40 0000 0020     		movs	r0, #0
  41              		.loc 1 12 2 view .LVU5
  42 0002 11E0     		b	.L2
  43              	.LVL1:
  44              	.L4:
  45              	.LBB3:
  13:Src/LTC6811.c **** 		remainder = i << 7;
ARM GAS  /tmp/cccH07eq.s 			page 2


  14:Src/LTC6811.c **** 		for (int bit = 8; bit > 0; bit--) {
  15:Src/LTC6811.c **** 			if (remainder & 0x4000) {
  16:Src/LTC6811.c **** 				remainder = ((remainder << 1));
  17:Src/LTC6811.c **** 				remainder = (remainder ^ CRC15_POLY);
  18:Src/LTC6811.c **** 			}
  19:Src/LTC6811.c **** 			else {
  20:Src/LTC6811.c **** 				remainder = ((remainder << 1));
  46              		.loc 1 20 5 is_stmt 1 view .LVU6
  47              		.loc 1 20 15 is_stmt 0 view .LVU7
  48 0004 5B00     		lsls	r3, r3, #1
  49              	.LVL2:
  50              		.loc 1 20 15 view .LVU8
  51 0006 9BB2     		uxth	r3, r3
  52              	.LVL3:
  53              	.L5:
  14:Src/LTC6811.c **** 			if (remainder & 0x4000) {
  54              		.loc 1 14 33 discriminator 2 view .LVU9
  55 0008 013A     		subs	r2, r2, #1
  56              	.LVL4:
  57              	.L3:
  14:Src/LTC6811.c **** 			if (remainder & 0x4000) {
  58              		.loc 1 14 3 discriminator 1 view .LVU10
  59 000a 002A     		cmp	r2, #0
  60 000c 08DD     		ble	.L8
  15:Src/LTC6811.c **** 				remainder = ((remainder << 1));
  61              		.loc 1 15 4 is_stmt 1 view .LVU11
  15:Src/LTC6811.c **** 				remainder = ((remainder << 1));
  62              		.loc 1 15 7 is_stmt 0 view .LVU12
  63 000e 13F4804F 		tst	r3, #16384
  64 0012 F7D0     		beq	.L4
  16:Src/LTC6811.c **** 				remainder = (remainder ^ CRC15_POLY);
  65              		.loc 1 16 5 is_stmt 1 view .LVU13
  16:Src/LTC6811.c **** 				remainder = (remainder ^ CRC15_POLY);
  66              		.loc 1 16 15 is_stmt 0 view .LVU14
  67 0014 5B00     		lsls	r3, r3, #1
  68              	.LVL5:
  16:Src/LTC6811.c **** 				remainder = (remainder ^ CRC15_POLY);
  69              		.loc 1 16 15 view .LVU15
  70 0016 9BB2     		uxth	r3, r3
  71              	.LVL6:
  17:Src/LTC6811.c **** 			}
  72              		.loc 1 17 5 is_stmt 1 view .LVU16
  17:Src/LTC6811.c **** 			}
  73              		.loc 1 17 15 is_stmt 0 view .LVU17
  74 0018 0749     		ldr	r1, .L10
  75 001a 0988     		ldrh	r1, [r1]
  76 001c 4B40     		eors	r3, r3, r1
  77              	.LVL7:
  17:Src/LTC6811.c **** 			}
  78              		.loc 1 17 15 view .LVU18
  79 001e F3E7     		b	.L5
  80              	.L8:
  17:Src/LTC6811.c **** 			}
  81              		.loc 1 17 15 view .LVU19
  82              	.LBE3:
  21:Src/LTC6811.c **** 			}
  22:Src/LTC6811.c **** 		}
ARM GAS  /tmp/cccH07eq.s 			page 3


  23:Src/LTC6811.c **** 		pec15Table[i] = remainder & 0xFFFF;
  83              		.loc 1 23 3 is_stmt 1 discriminator 2 view .LVU20
  84              		.loc 1 23 17 is_stmt 0 discriminator 2 view .LVU21
  85 0020 064A     		ldr	r2, .L10+4
  86              	.LVL8:
  87              		.loc 1 23 17 discriminator 2 view .LVU22
  88 0022 22F81030 		strh	r3, [r2, r0, lsl #1]	@ movhi
  12:Src/LTC6811.c **** 		remainder = i << 7;
  89              		.loc 1 12 28 discriminator 2 view .LVU23
  90 0026 0130     		adds	r0, r0, #1
  91              	.LVL9:
  92              	.L2:
  12:Src/LTC6811.c **** 		remainder = i << 7;
  93              		.loc 1 12 2 discriminator 1 view .LVU24
  94 0028 FF28     		cmp	r0, #255
  95 002a 04DC     		bgt	.L9
  13:Src/LTC6811.c **** 		for (int bit = 8; bit > 0; bit--) {
  96              		.loc 1 13 3 is_stmt 1 view .LVU25
  13:Src/LTC6811.c **** 		for (int bit = 8; bit > 0; bit--) {
  97              		.loc 1 13 17 is_stmt 0 view .LVU26
  98 002c 83B2     		uxth	r3, r0
  13:Src/LTC6811.c **** 		for (int bit = 8; bit > 0; bit--) {
  99              		.loc 1 13 13 view .LVU27
 100 002e DB01     		lsls	r3, r3, #7
 101 0030 9BB2     		uxth	r3, r3
 102              	.LVL10:
  14:Src/LTC6811.c **** 			if (remainder & 0x4000) {
 103              		.loc 1 14 3 is_stmt 1 view .LVU28
 104              	.LBB4:
  14:Src/LTC6811.c **** 			if (remainder & 0x4000) {
 105              		.loc 1 14 8 view .LVU29
  14:Src/LTC6811.c **** 			if (remainder & 0x4000) {
 106              		.loc 1 14 12 is_stmt 0 view .LVU30
 107 0032 0822     		movs	r2, #8
  14:Src/LTC6811.c **** 			if (remainder & 0x4000) {
 108              		.loc 1 14 3 view .LVU31
 109 0034 E9E7     		b	.L3
 110              	.LVL11:
 111              	.L9:
  14:Src/LTC6811.c **** 			if (remainder & 0x4000) {
 112              		.loc 1 14 3 view .LVU32
 113              	.LBE4:
 114              	.LBE2:
  24:Src/LTC6811.c **** 	}
  25:Src/LTC6811.c **** };
 115              		.loc 1 25 1 view .LVU33
 116 0036 7047     		bx	lr
 117              	.L11:
 118              		.align	2
 119              	.L10:
 120 0038 00000000 		.word	.LANCHOR0
 121 003c 00000000 		.word	pec15Table
 122              		.cfi_endproc
 123              	.LFE130:
 125              		.section	.text.calculatePEC,"ax",%progbits
 126              		.align	1
 127              		.global	calculatePEC
ARM GAS  /tmp/cccH07eq.s 			page 4


 128              		.syntax unified
 129              		.thumb
 130              		.thumb_func
 131              		.fpu fpv4-sp-d16
 133              	calculatePEC:
 134              	.LVL12:
 135              	.LFB135:
  26:Src/LTC6811.c ****  
  27:Src/LTC6811.c **** void writeConfig(BMSconfigStructTypedef cfg, uint8_t total_ic) {
  28:Src/LTC6811.c **** 	
  29:Src/LTC6811.c **** 	/*uint8_t TxBuffer[12] = {0x11, 0x22, 0x33, 0x44, 0x55, 0x66, 0x77, 0x88, 0x99, 0xAA, 0xBB, 0xCC};
  30:Src/LTC6811.c **** 	uint8_t RxBuffer[12];
  31:Src/LTC6811.c **** 	
  32:Src/LTC6811.c **** 	if (cfg.ADCModeOption == 0) HAL_GPIO_TogglePin(GPIOC, GPIO_PIN_13);
  33:Src/LTC6811.c **** 	
  34:Src/LTC6811.c **** 	if (SPIWriteRead(TxBuffer, RxBuffer, 12) == 1) HAL_GPIO_TogglePin(GPIOC, GPIO_PIN_13);*/
  35:Src/LTC6811.c **** 	
  36:Src/LTC6811.c **** 	uint8_t config[6];
  37:Src/LTC6811.c **** 	uint8_t *cmd;
  38:Src/LTC6811.c **** 	uint8_t cmd_len = 12;
  39:Src/LTC6811.c **** 	uint16_t PEC_return;
  40:Src/LTC6811.c **** 	
  41:Src/LTC6811.c **** 	cmd = (uint8_t *)malloc(cmd_len*sizeof(uint8_t));
  42:Src/LTC6811.c **** 	
  43:Src/LTC6811.c **** 	config[0] = (uint8_t) (cfg.GPIO5PulldownOff << 7) | (cfg.GPIO4PulldownOff << 6) | (cfg.GPIO3Pulldo
  44:Src/LTC6811.c **** 	config[1] = (uint8_t) (cfg.UndervoltageComparisonVoltage & 0xFF);
  45:Src/LTC6811.c **** 	config[2] = (uint8_t) ((cfg.OvervoltageComparisonVoltage << 4) & 0xF0) | ((cfg.UndervoltageCompari
  46:Src/LTC6811.c **** 	config[3] = (uint8_t) ((cfg.OvervoltageComparisonVoltage >> 4) & 0xFF);
  47:Src/LTC6811.c **** 	config[4] = (uint8_t) (cfg.DischargeCell8 << 7) | (cfg.DischargeCell7 << 6) | (cfg.DischargeCell6 
  48:Src/LTC6811.c **** 	config[5] = (uint8_t) ((cfg.DischargeTimeoutValue << 4) & 0xF0) | (cfg.DischargeCell12 << 3) | (cf
  49:Src/LTC6811.c **** 	
  50:Src/LTC6811.c **** 	for (uint8_t current_ic = 1; current_ic <= total_ic; current_ic++) {
  51:Src/LTC6811.c **** 	
  52:Src/LTC6811.c **** 		cmd[0] = (uint8_t) (0x80 | ((current_ic << 3) & 0x78) | ((WriteConfigurationRegisterGroup >> 8) &
  53:Src/LTC6811.c **** 		cmd[1] = (uint8_t) (WriteConfigurationRegisterGroup & 0xFF);
  54:Src/LTC6811.c **** 		
  55:Src/LTC6811.c **** 		PEC_return = calculatePEC(2, cmd);
  56:Src/LTC6811.c **** 		
  57:Src/LTC6811.c **** 		cmd[2] = (PEC_return >> 8) & 0xFF;
  58:Src/LTC6811.c **** 		cmd[3] = PEC_return & 0xFF;
  59:Src/LTC6811.c **** 	
  60:Src/LTC6811.c **** 		cmd[4] = config[0];
  61:Src/LTC6811.c **** 		cmd[5] = config[1];
  62:Src/LTC6811.c **** 		cmd[6] = config[2];
  63:Src/LTC6811.c **** 		cmd[7] = config[3];
  64:Src/LTC6811.c **** 		cmd[8] = config[4];
  65:Src/LTC6811.c **** 		cmd[9] = config[5];
  66:Src/LTC6811.c **** 		
  67:Src/LTC6811.c **** 		PEC_return = calculatePEC(6, cmd + 4);
  68:Src/LTC6811.c **** 	
  69:Src/LTC6811.c **** 		cmd[10] = (PEC_return >> 8) & 0xFF;
  70:Src/LTC6811.c **** 		cmd[11] = PEC_return & 0xFF;
  71:Src/LTC6811.c **** 		
  72:Src/LTC6811.c **** 		SPIWrite(cmd, cmd_len);
  73:Src/LTC6811.c **** 		
  74:Src/LTC6811.c **** 		HAL_Delay(100);
  75:Src/LTC6811.c **** 	}
ARM GAS  /tmp/cccH07eq.s 			page 5


  76:Src/LTC6811.c **** 	
  77:Src/LTC6811.c **** 	free(cmd);
  78:Src/LTC6811.c **** 	
  79:Src/LTC6811.c **** };
  80:Src/LTC6811.c **** 
  81:Src/LTC6811.c **** bool readCellVoltage(uint8_t address, uint16_t cellVoltage[8]) {
  82:Src/LTC6811.c **** 	
  83:Src/LTC6811.c **** 	uint8_t cmd[12];
  84:Src/LTC6811.c **** 	uint8_t rx_data[12];
  85:Src/LTC6811.c **** 	uint16_t PEC_return;
  86:Src/LTC6811.c **** 	uint8_t *PEC_send;
  87:Src/LTC6811.c **** 	bool dataValid = true;
  88:Src/LTC6811.c **** 	
  89:Src/LTC6811.c **** 	sendAddressCommand(StartCellVoltageADCConversionAll, address); // start conversion for every cell
  90:Src/LTC6811.c **** 
  91:Src/LTC6811.c **** 	HAL_Delay(15); // conversion time is 12.8ms at 422Hz, so wait 15ms
  92:Src/LTC6811.c **** 
  93:Src/LTC6811.c **** 	// group 1: cells 1, 2, and 3
  94:Src/LTC6811.c **** 	PEC_send = (uint8_t *)malloc(6*sizeof(uint8_t));
  95:Src/LTC6811.c **** 	
  96:Src/LTC6811.c **** 	PEC_send[0] = (uint8_t) (0x80 | ((address << 3) & 0x78) | ((ReadCellVoltageRegisterGroup1to3 >> 8)
  97:Src/LTC6811.c **** 	PEC_send[1] = (uint8_t) (ReadCellVoltageRegisterGroup1to3 & 0xFF);
  98:Src/LTC6811.c **** 
  99:Src/LTC6811.c **** 	cmd[0] = PEC_send[0];
 100:Src/LTC6811.c **** 	cmd[1] = PEC_send[1];
 101:Src/LTC6811.c **** 	
 102:Src/LTC6811.c **** 	PEC_return = calculatePEC(2, PEC_send);
 103:Src/LTC6811.c **** 	
 104:Src/LTC6811.c **** 	cmd[2] = (PEC_return >> 8) & 0xFF;
 105:Src/LTC6811.c **** 	cmd[3] = PEC_return & 0xFF;
 106:Src/LTC6811.c **** 	
 107:Src/LTC6811.c **** 	cmd[4] = 0;
 108:Src/LTC6811.c **** 	cmd[5] = 0;
 109:Src/LTC6811.c **** 	cmd[6] = 0;
 110:Src/LTC6811.c **** 	cmd[7] = 0;
 111:Src/LTC6811.c **** 	cmd[8] = 0;
 112:Src/LTC6811.c **** 	cmd[9] = 0;
 113:Src/LTC6811.c **** 	cmd[10] = 0;
 114:Src/LTC6811.c **** 	cmd[11] = 0;
 115:Src/LTC6811.c **** 	
 116:Src/LTC6811.c **** 	SPIWriteRead(cmd, rx_data, sizeof(cmd)); // send 4 command bytes, receive 6 cell voltage bytes (4-
 117:Src/LTC6811.c **** 	
 118:Src/LTC6811.c **** 	/*cellVoltage[0] = ((rx_data[0] << 8) & 0xFF00) | (rx_data[1] & 0x00FF);
 119:Src/LTC6811.c **** 	cellVoltage[1] = ((rx_data[2] << 8) & 0xFF00) | (rx_data[3] & 0x00FF);
 120:Src/LTC6811.c **** 	cellVoltage[2] = ((rx_data[4] << 8) & 0xFF00) | (rx_data[5] & 0x00FF);
 121:Src/LTC6811.c **** 	cellVoltage[3] = ((rx_data[6] << 8) & 0xFF00) | (rx_data[7] & 0x00FF);
 122:Src/LTC6811.c **** 	cellVoltage[4] = ((rx_data[8] << 8) & 0xFF00) | (rx_data[9] & 0x00FF);
 123:Src/LTC6811.c **** 	cellVoltage[5] = ((rx_data[10] << 8) & 0xFF00) | (rx_data[11] & 0x00FF);*/
 124:Src/LTC6811.c **** 	
 125:Src/LTC6811.c **** 	// calculate PEC based on cell voltage data received
 126:Src/LTC6811.c **** 	PEC_send[0] = rx_data[4]; // cell 1 voltage low bytes
 127:Src/LTC6811.c **** 	PEC_send[1] = rx_data[5]; // cell 1 voltage high bytes
 128:Src/LTC6811.c **** 	PEC_send[2] = rx_data[6]; // cell 2 voltage low bytes
 129:Src/LTC6811.c **** 	PEC_send[3] = rx_data[7]; // cell 2 voltage high bytes
 130:Src/LTC6811.c **** 	PEC_send[4] = rx_data[8]; // cell 3 voltage low bytes
 131:Src/LTC6811.c **** 	PEC_send[5] = rx_data[9]; // cell 3 voltage high bytes
 132:Src/LTC6811.c **** 	
ARM GAS  /tmp/cccH07eq.s 			page 6


 133:Src/LTC6811.c **** 	PEC_return = calculatePEC(6, PEC_send);
 134:Src/LTC6811.c **** 	
 135:Src/LTC6811.c **** 	// check if received PEC matches calculated PEC
 136:Src/LTC6811.c **** 	/*if (PEC_return != (((rx_data[10] >> 8) & 0xFF00) | (rx_data[11] & 0x00FF))) {
 137:Src/LTC6811.c **** 		dataValid = false;
 138:Src/LTC6811.c **** 	}*/
 139:Src/LTC6811.c **** 	
 140:Src/LTC6811.c **** 	// store values if data is valid
 141:Src/LTC6811.c **** 	if (dataValid == true) {
 142:Src/LTC6811.c **** 		cellVoltage[0] = (uint16_t) ((rx_data[5] << 8) & 0xFF00) | (rx_data[4] & 0x00FF); // cell 1 volta
 143:Src/LTC6811.c **** 		cellVoltage[1] = (uint16_t) ((rx_data[7] << 8) & 0xFF00) | (rx_data[6] & 0x00FF); // cell 2 volta
 144:Src/LTC6811.c **** 		cellVoltage[2] = (uint16_t) ((rx_data[9] << 8) & 0xFF00) | (rx_data[8] & 0x00FF); // cell 3 volta
 145:Src/LTC6811.c **** 	}
 146:Src/LTC6811.c **** 	
 147:Src/LTC6811.c **** 	// group 2: cells 4, 5, and 6
 148:Src/LTC6811.c **** 	PEC_send[0] = (uint8_t) (0x80 | ((address << 3) & 0x78) | ((ReadCellVoltageRegisterGroup4to6 >> 8)
 149:Src/LTC6811.c **** 	PEC_send[1] = (uint8_t) (ReadCellVoltageRegisterGroup4to6 & 0xFF);
 150:Src/LTC6811.c **** 
 151:Src/LTC6811.c **** 	cmd[0] = PEC_send[0];
 152:Src/LTC6811.c **** 	cmd[1] = PEC_send[1];
 153:Src/LTC6811.c **** 	
 154:Src/LTC6811.c **** 	PEC_return = calculatePEC(2, PEC_send);
 155:Src/LTC6811.c **** 	
 156:Src/LTC6811.c **** 	cmd[2] = (PEC_return >> 8) & 0xFF;
 157:Src/LTC6811.c **** 	cmd[3] = PEC_return & 0xFF;
 158:Src/LTC6811.c **** 	
 159:Src/LTC6811.c **** 	cmd[4] = 0;
 160:Src/LTC6811.c **** 	cmd[5] = 0;
 161:Src/LTC6811.c **** 	cmd[6] = 0;
 162:Src/LTC6811.c **** 	cmd[7] = 0;
 163:Src/LTC6811.c **** 	cmd[8] = 0;
 164:Src/LTC6811.c **** 	cmd[9] = 0;
 165:Src/LTC6811.c **** 	cmd[10] = 0;
 166:Src/LTC6811.c **** 	cmd[11] = 0;
 167:Src/LTC6811.c **** 	
 168:Src/LTC6811.c **** 	SPIWriteRead(cmd, rx_data, sizeof(cmd));
 169:Src/LTC6811.c **** 	
 170:Src/LTC6811.c **** 	// calculate PEC
 171:Src/LTC6811.c **** 	PEC_send[0] = rx_data[4]; // cell 4 voltage low bytes
 172:Src/LTC6811.c **** 	PEC_send[1] = rx_data[5]; // cell 4 voltage high bytes
 173:Src/LTC6811.c **** 	PEC_send[2] = rx_data[6]; // cell 5 voltage low bytes
 174:Src/LTC6811.c **** 	PEC_send[3] = rx_data[7]; // cell 5 voltage high bytes
 175:Src/LTC6811.c **** 	PEC_send[4] = rx_data[8]; // cell 6 voltage low bytes
 176:Src/LTC6811.c **** 	PEC_send[5] = rx_data[9]; // cell 6 voltage high bytes
 177:Src/LTC6811.c **** 	
 178:Src/LTC6811.c **** 	PEC_return = calculatePEC(6, PEC_send);
 179:Src/LTC6811.c **** 	
 180:Src/LTC6811.c **** 	// store values if data is valid
 181:Src/LTC6811.c **** 	
 182:Src/LTC6811.c **** 	/*if (PEC_return != (((rx_data[10] >> 8) & 0xFF00) | (rx_data[11] & 0x00FF))) {
 183:Src/LTC6811.c **** 		dataValid = false;
 184:Src/LTC6811.c **** 	}*/
 185:Src/LTC6811.c **** 	
 186:Src/LTC6811.c **** 	if (dataValid == true) {
 187:Src/LTC6811.c **** 		cellVoltage[3] = (uint16_t) ((rx_data[5] << 8) & 0xFF00) | (rx_data[4] & 0x00FF); // cell 4 volta
 188:Src/LTC6811.c **** 	}
 189:Src/LTC6811.c **** 	
ARM GAS  /tmp/cccH07eq.s 			page 7


 190:Src/LTC6811.c **** 	// group 3: cells 7, 8, and 9
 191:Src/LTC6811.c **** 	PEC_send[0] = (uint8_t) (0x80 | ((address << 3) & 0x78) | ((ReadCellVoltageRegisterGroup7to9 >> 8)
 192:Src/LTC6811.c **** 	PEC_send[1] = (uint8_t) (ReadCellVoltageRegisterGroup7to9 & 0xFF);
 193:Src/LTC6811.c **** 
 194:Src/LTC6811.c **** 	cmd[0] = PEC_send[0];
 195:Src/LTC6811.c **** 	cmd[1] = PEC_send[1];
 196:Src/LTC6811.c **** 	
 197:Src/LTC6811.c **** 	PEC_return = calculatePEC(2, PEC_send);
 198:Src/LTC6811.c **** 	
 199:Src/LTC6811.c **** 	cmd[2] = (PEC_return >> 8) & 0xFF;
 200:Src/LTC6811.c **** 	cmd[3] = PEC_return & 0xFF;
 201:Src/LTC6811.c **** 	
 202:Src/LTC6811.c **** 	cmd[4] = 0;
 203:Src/LTC6811.c **** 	cmd[5] = 0;
 204:Src/LTC6811.c **** 	cmd[6] = 0;
 205:Src/LTC6811.c **** 	cmd[7] = 0;
 206:Src/LTC6811.c **** 	cmd[8] = 0;
 207:Src/LTC6811.c **** 	cmd[9] = 0;
 208:Src/LTC6811.c **** 	cmd[10] = 0;
 209:Src/LTC6811.c **** 	cmd[11] = 0;
 210:Src/LTC6811.c **** 	
 211:Src/LTC6811.c **** 	SPIWriteRead(cmd, rx_data, sizeof(cmd));
 212:Src/LTC6811.c **** 	
 213:Src/LTC6811.c **** 	// calculate PEC
 214:Src/LTC6811.c **** 	PEC_send[0] = rx_data[4]; // cell 7 voltage low bytes
 215:Src/LTC6811.c **** 	PEC_send[1] = rx_data[5]; // cell 7 voltage high bytes
 216:Src/LTC6811.c **** 	PEC_send[2] = rx_data[6]; // cell 8 voltage low bytes
 217:Src/LTC6811.c **** 	PEC_send[3] = rx_data[7]; // cell 8 voltage high bytes
 218:Src/LTC6811.c **** 	PEC_send[4] = rx_data[8]; // cell 9 voltage low bytes
 219:Src/LTC6811.c **** 	PEC_send[5] = rx_data[9]; // cell 9 voltage high bytes
 220:Src/LTC6811.c **** 	
 221:Src/LTC6811.c **** 	PEC_return = calculatePEC(6, PEC_send);
 222:Src/LTC6811.c **** 	
 223:Src/LTC6811.c **** 	// store values if data is valid
 224:Src/LTC6811.c **** 	
 225:Src/LTC6811.c **** 	/*if (PEC_return != (((rx_data[10] >> 8) & 0xFF00) | (rx_data[11] & 0x00FF))) {
 226:Src/LTC6811.c **** 		dataValid = false;
 227:Src/LTC6811.c **** 	}*/
 228:Src/LTC6811.c **** 	
 229:Src/LTC6811.c **** 	if (dataValid == true) {
 230:Src/LTC6811.c **** 		cellVoltage[4] = (uint16_t) ((rx_data[5] << 8) & 0xFF00) | (rx_data[4] & 0x00FF); // cell 7 volta
 231:Src/LTC6811.c **** 		cellVoltage[5] = (uint16_t) ((rx_data[7] << 8) & 0xFF00) | (rx_data[6] & 0x00FF); // cell 8 volta
 232:Src/LTC6811.c **** 		cellVoltage[6] = (uint16_t) ((rx_data[9] << 8) & 0xFF00) | (rx_data[8] & 0x00FF); // cell 9 volta
 233:Src/LTC6811.c **** 	}
 234:Src/LTC6811.c **** 	
 235:Src/LTC6811.c **** 	// group 4: cells 10, 11, and 12
 236:Src/LTC6811.c **** 	PEC_send[0] = (uint8_t) (0x80 | ((address << 3) & 0x78) | ((ReadCellVoltageRegisterGroup10to12 >> 
 237:Src/LTC6811.c **** 	PEC_send[1] = (uint8_t) (ReadCellVoltageRegisterGroup10to12 & 0xFF);
 238:Src/LTC6811.c **** 
 239:Src/LTC6811.c **** 	cmd[0] = PEC_send[0];
 240:Src/LTC6811.c **** 	cmd[1] = PEC_send[1];
 241:Src/LTC6811.c **** 	
 242:Src/LTC6811.c **** 	PEC_return = calculatePEC(2, PEC_send);
 243:Src/LTC6811.c **** 	
 244:Src/LTC6811.c **** 	cmd[2] = (PEC_return >> 8) & 0xFF;
 245:Src/LTC6811.c **** 	cmd[3] = PEC_return & 0xFF;
 246:Src/LTC6811.c **** 	
ARM GAS  /tmp/cccH07eq.s 			page 8


 247:Src/LTC6811.c **** 	cmd[4] = 0;
 248:Src/LTC6811.c **** 	cmd[5] = 0;
 249:Src/LTC6811.c **** 	cmd[6] = 0;
 250:Src/LTC6811.c **** 	cmd[7] = 0;
 251:Src/LTC6811.c **** 	cmd[8] = 0;
 252:Src/LTC6811.c **** 	cmd[9] = 0;
 253:Src/LTC6811.c **** 	cmd[10] = 0;
 254:Src/LTC6811.c **** 	cmd[11] = 0;
 255:Src/LTC6811.c **** 	
 256:Src/LTC6811.c **** 	SPIWriteRead(cmd, rx_data, sizeof(cmd));
 257:Src/LTC6811.c **** 	
 258:Src/LTC6811.c **** 	// calculate PEC
 259:Src/LTC6811.c **** 	PEC_send[0] = rx_data[4]; // cell 10 voltage low bytes
 260:Src/LTC6811.c **** 	PEC_send[1] = rx_data[5]; // cell 10 voltage high bytes
 261:Src/LTC6811.c **** 	PEC_send[2] = rx_data[6]; // cell 11 voltage low bytes
 262:Src/LTC6811.c **** 	PEC_send[3] = rx_data[7]; // cell 11 voltage high bytes
 263:Src/LTC6811.c **** 	PEC_send[4] = rx_data[8]; // cell 12 voltage low bytes
 264:Src/LTC6811.c **** 	PEC_send[5] = rx_data[9]; // cell 12 voltage high bytes
 265:Src/LTC6811.c **** 	
 266:Src/LTC6811.c **** 	PEC_return = calculatePEC(6, PEC_send);
 267:Src/LTC6811.c **** 	
 268:Src/LTC6811.c **** 	// store values if data is valid
 269:Src/LTC6811.c **** 	
 270:Src/LTC6811.c **** 	/*if (PEC_return != (((rx_data[10] >> 8) & 0xFF00) | (rx_data[11] & 0x00FF))) {
 271:Src/LTC6811.c **** 		dataValid = false;
 272:Src/LTC6811.c **** 	}*/
 273:Src/LTC6811.c **** 	
 274:Src/LTC6811.c **** 	if (dataValid == true) {
 275:Src/LTC6811.c **** 		cellVoltage[7] = (uint16_t) ((rx_data[5] << 8) & 0xFF00) | (rx_data[4] & 0x00FF); // cell 7 volta
 276:Src/LTC6811.c **** 	}
 277:Src/LTC6811.c **** 	
 278:Src/LTC6811.c **** 	free(PEC_send);
 279:Src/LTC6811.c **** 	
 280:Src/LTC6811.c **** 	return (dataValid == true);
 281:Src/LTC6811.c **** 	
 282:Src/LTC6811.c **** };
 283:Src/LTC6811.c **** 
 284:Src/LTC6811.c **** void sendBroadcastCommand(CommandCodeTypedef command) {
 285:Src/LTC6811.c **** 	
 286:Src/LTC6811.c **** 	uint8_t cmd[4];
 287:Src/LTC6811.c **** 	uint16_t PEC_return;
 288:Src/LTC6811.c **** 	
 289:Src/LTC6811.c **** 	cmd[0] = (uint8_t) ((command >> 8) & 0x0F);
 290:Src/LTC6811.c **** 	cmd[1] = (uint8_t) (command & 0xFF);
 291:Src/LTC6811.c **** 	
 292:Src/LTC6811.c **** 	PEC_return = calculatePEC(2, (uint8_t *)&(cmd));
 293:Src/LTC6811.c **** 	
 294:Src/LTC6811.c **** 	cmd[2] = (PEC_return >> 8) & 0xFF;
 295:Src/LTC6811.c **** 	cmd[3] = PEC_return & 0xFF;
 296:Src/LTC6811.c **** 	
 297:Src/LTC6811.c **** 	SPIWrite(cmd, 4);
 298:Src/LTC6811.c **** };
 299:Src/LTC6811.c **** 
 300:Src/LTC6811.c **** void sendAddressCommand(CommandCodeTypedef command, uint8_t address) {
 301:Src/LTC6811.c **** 	
 302:Src/LTC6811.c **** 	uint8_t cmd[4];
 303:Src/LTC6811.c **** 	uint16_t PEC_return;
ARM GAS  /tmp/cccH07eq.s 			page 9


 304:Src/LTC6811.c **** 	uint8_t *msbytes;
 305:Src/LTC6811.c **** 	
 306:Src/LTC6811.c **** 	msbytes = (uint8_t *)malloc(2*sizeof(uint8_t));
 307:Src/LTC6811.c **** 	
 308:Src/LTC6811.c **** 	msbytes[0] = (uint8_t) (0x80 | ((address << 3) & 0x78) | ((command >> 8) & 0x07));
 309:Src/LTC6811.c **** 	msbytes[1] = (uint8_t) (command & 0xFF);
 310:Src/LTC6811.c **** 
 311:Src/LTC6811.c **** 	cmd[0] = msbytes[0];
 312:Src/LTC6811.c **** 	cmd[1] = msbytes[1];
 313:Src/LTC6811.c **** 	
 314:Src/LTC6811.c **** 	PEC_return = calculatePEC(2, msbytes);
 315:Src/LTC6811.c **** 	
 316:Src/LTC6811.c **** 	cmd[2] = (PEC_return >> 8) & 0xFF;
 317:Src/LTC6811.c **** 	cmd[3] = PEC_return & 0xFF;
 318:Src/LTC6811.c **** 	
 319:Src/LTC6811.c **** 	SPIWrite(cmd, 4);
 320:Src/LTC6811.c **** 	
 321:Src/LTC6811.c **** 	free(msbytes);
 322:Src/LTC6811.c **** };
 323:Src/LTC6811.c **** 
 324:Src/LTC6811.c **** uint16_t calculatePEC(uint8_t len, uint8_t *data) {
 136              		.loc 1 324 51 is_stmt 1 view -0
 137              		.cfi_startproc
 138              		@ args = 0, pretend = 0, frame = 0
 139              		@ frame_needed = 0, uses_anonymous_args = 0
 140              		@ link register save eliminated.
 141              		.loc 1 324 51 is_stmt 0 view .LVU35
 142 0000 30B4     		push	{r4, r5}
 143              	.LCFI0:
 144              		.cfi_def_cfa_offset 8
 145              		.cfi_offset 4, -8
 146              		.cfi_offset 5, -4
 325:Src/LTC6811.c **** 	
 326:Src/LTC6811.c **** 	uint16_t remainder, address;
 147              		.loc 1 326 2 is_stmt 1 view .LVU36
 327:Src/LTC6811.c **** 	remainder = 16; //PEC seed
 148              		.loc 1 327 2 view .LVU37
 149              	.LVL13:
 328:Src/LTC6811.c **** 	
 329:Src/LTC6811.c **** 	for (int i = 0; i < len; i++) {
 150              		.loc 1 329 2 view .LVU38
 151              	.LBB5:
 152              		.loc 1 329 7 view .LVU39
 153              		.loc 1 329 11 is_stmt 0 view .LVU40
 154 0002 0024     		movs	r4, #0
 155              	.LBE5:
 327:Src/LTC6811.c **** 	remainder = 16; //PEC seed
 156              		.loc 1 327 12 view .LVU41
 157 0004 1022     		movs	r2, #16
 158              	.LVL14:
 159              	.L13:
 160              	.LBB6:
 161              		.loc 1 329 2 discriminator 1 view .LVU42
 162 0006 A042     		cmp	r0, r4
 163 0008 0BDD     		ble	.L16
 330:Src/LTC6811.c **** 		address = ((remainder >> 7) ^ data[i]) & 0xFF; //calculate PEC table address
 164              		.loc 1 330 3 is_stmt 1 discriminator 3 view .LVU43
ARM GAS  /tmp/cccH07eq.s 			page 10


 165              		.loc 1 330 37 is_stmt 0 discriminator 3 view .LVU44
 166 000a 0B5D     		ldrb	r3, [r1, r4]	@ zero_extendqisi2
 167              		.loc 1 330 31 discriminator 3 view .LVU45
 168 000c 83EAD213 		eor	r3, r3, r2, lsr #7
 169              		.loc 1 330 11 discriminator 3 view .LVU46
 170 0010 DBB2     		uxtb	r3, r3
 171              	.LVL15:
 331:Src/LTC6811.c **** 		remainder = (remainder << 8) ^ pec15Table[address];
 172              		.loc 1 331 3 is_stmt 1 discriminator 3 view .LVU47
 173              		.loc 1 331 44 is_stmt 0 discriminator 3 view .LVU48
 174 0012 064D     		ldr	r5, .L17
 175 0014 35F91330 		ldrsh	r3, [r5, r3, lsl #1]
 176              	.LVL16:
 177              		.loc 1 331 32 discriminator 3 view .LVU49
 178 0018 83EA0222 		eor	r2, r3, r2, lsl #8
 179              	.LVL17:
 180              		.loc 1 331 13 discriminator 3 view .LVU50
 181 001c 92B2     		uxth	r2, r2
 182              	.LVL18:
 329:Src/LTC6811.c **** 		address = ((remainder >> 7) ^ data[i]) & 0xFF; //calculate PEC table address
 183              		.loc 1 329 28 discriminator 3 view .LVU51
 184 001e 0134     		adds	r4, r4, #1
 185              	.LVL19:
 329:Src/LTC6811.c **** 		address = ((remainder >> 7) ^ data[i]) & 0xFF; //calculate PEC table address
 186              		.loc 1 329 28 discriminator 3 view .LVU52
 187 0020 F1E7     		b	.L13
 188              	.L16:
 329:Src/LTC6811.c **** 		address = ((remainder >> 7) ^ data[i]) & 0xFF; //calculate PEC table address
 189              		.loc 1 329 28 discriminator 3 view .LVU53
 190              	.LBE6:
 332:Src/LTC6811.c **** 	}
 333:Src/LTC6811.c **** 	
 334:Src/LTC6811.c **** 	return (remainder * 2); //The CRC15 has a 0 in the LSB so the final value must be multiplied by 2
 191              		.loc 1 334 2 is_stmt 1 view .LVU54
 192              		.loc 1 334 20 is_stmt 0 view .LVU55
 193 0022 5000     		lsls	r0, r2, #1
 194              	.LVL20:
 195              		.loc 1 334 20 view .LVU56
 196 0024 80B2     		uxth	r0, r0
 335:Src/LTC6811.c **** };
 197              		.loc 1 335 1 view .LVU57
 198 0026 30BC     		pop	{r4, r5}
 199              	.LCFI1:
 200              		.cfi_restore 5
 201              		.cfi_restore 4
 202              		.cfi_def_cfa_offset 0
 203              	.LVL21:
 204              		.loc 1 335 1 view .LVU58
 205 0028 7047     		bx	lr
 206              	.L18:
 207 002a 00BF     		.align	2
 208              	.L17:
 209 002c 00000000 		.word	pec15Table
 210              		.cfi_endproc
 211              	.LFE135:
 213              		.section	.text.writeConfig,"ax",%progbits
 214              		.align	1
ARM GAS  /tmp/cccH07eq.s 			page 11


 215              		.global	writeConfig
 216              		.syntax unified
 217              		.thumb
 218              		.thumb_func
 219              		.fpu fpv4-sp-d16
 221              	writeConfig:
 222              	.LVL22:
 223              	.LFB131:
  27:Src/LTC6811.c **** 	
 224              		.loc 1 27 64 is_stmt 1 view -0
 225              		.cfi_startproc
 226              		@ args = 32, pretend = 16, frame = 8
 227              		@ frame_needed = 0, uses_anonymous_args = 0
  27:Src/LTC6811.c **** 	
 228              		.loc 1 27 64 is_stmt 0 view .LVU60
 229 0000 84B0     		sub	sp, sp, #16
 230              	.LCFI2:
 231              		.cfi_def_cfa_offset 16
 232 0002 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 233              	.LCFI3:
 234              		.cfi_def_cfa_offset 52
 235              		.cfi_offset 4, -52
 236              		.cfi_offset 5, -48
 237              		.cfi_offset 6, -44
 238              		.cfi_offset 7, -40
 239              		.cfi_offset 8, -36
 240              		.cfi_offset 9, -32
 241              		.cfi_offset 10, -28
 242              		.cfi_offset 11, -24
 243              		.cfi_offset 14, -20
 244 0006 83B0     		sub	sp, sp, #12
 245              	.LCFI4:
 246              		.cfi_def_cfa_offset 64
 247 0008 0CAC     		add	r4, sp, #48
 248 000a 84E80F00 		stm	r4, {r0, r1, r2, r3}
 249 000e 9DF84CA0 		ldrb	r10, [sp, #76]	@ zero_extendqisi2
  36:Src/LTC6811.c **** 	uint8_t *cmd;
 250              		.loc 1 36 2 is_stmt 1 view .LVU61
  37:Src/LTC6811.c **** 	uint8_t cmd_len = 12;
 251              		.loc 1 37 2 view .LVU62
  38:Src/LTC6811.c **** 	uint16_t PEC_return;
 252              		.loc 1 38 2 view .LVU63
 253              	.LVL23:
  39:Src/LTC6811.c **** 	
 254              		.loc 1 39 2 view .LVU64
  41:Src/LTC6811.c **** 	
 255              		.loc 1 41 2 view .LVU65
  41:Src/LTC6811.c **** 	
 256              		.loc 1 41 19 is_stmt 0 view .LVU66
 257 0012 0C20     		movs	r0, #12
 258 0014 FFF7FEFF 		bl	malloc
 259              	.LVL24:
 260 0018 0446     		mov	r4, r0
 261              	.LVL25:
  43:Src/LTC6811.c **** 	config[1] = (uint8_t) (cfg.UndervoltageComparisonVoltage & 0xFF);
 262              		.loc 1 43 2 is_stmt 1 view .LVU67
  43:Src/LTC6811.c **** 	config[1] = (uint8_t) (cfg.UndervoltageComparisonVoltage & 0xFF);
ARM GAS  /tmp/cccH07eq.s 			page 12


 263              		.loc 1 43 28 is_stmt 0 view .LVU68
 264 001a 9DF83070 		ldrb	r7, [sp, #48]	@ zero_extendqisi2
  43:Src/LTC6811.c **** 	config[1] = (uint8_t) (cfg.UndervoltageComparisonVoltage & 0xFF);
 265              		.loc 1 43 14 view .LVU69
 266 001e FF01     		lsls	r7, r7, #7
 267 0020 7FB2     		sxtb	r7, r7
  43:Src/LTC6811.c **** 	config[1] = (uint8_t) (cfg.UndervoltageComparisonVoltage & 0xFF);
 268              		.loc 1 43 58 view .LVU70
 269 0022 9DF83130 		ldrb	r3, [sp, #49]	@ zero_extendqisi2
  43:Src/LTC6811.c **** 	config[1] = (uint8_t) (cfg.UndervoltageComparisonVoltage & 0xFF);
 270              		.loc 1 43 52 view .LVU71
 271 0026 47EA8317 		orr	r7, r7, r3, lsl #6
 272 002a 7FB2     		sxtb	r7, r7
  43:Src/LTC6811.c **** 	config[1] = (uint8_t) (cfg.UndervoltageComparisonVoltage & 0xFF);
 273              		.loc 1 43 88 view .LVU72
 274 002c 9DF83230 		ldrb	r3, [sp, #50]	@ zero_extendqisi2
  43:Src/LTC6811.c **** 	config[1] = (uint8_t) (cfg.UndervoltageComparisonVoltage & 0xFF);
 275              		.loc 1 43 82 view .LVU73
 276 0030 47EA4317 		orr	r7, r7, r3, lsl #5
 277 0034 7FB2     		sxtb	r7, r7
  43:Src/LTC6811.c **** 	config[1] = (uint8_t) (cfg.UndervoltageComparisonVoltage & 0xFF);
 278              		.loc 1 43 118 view .LVU74
 279 0036 9DF83330 		ldrb	r3, [sp, #51]	@ zero_extendqisi2
  43:Src/LTC6811.c **** 	config[1] = (uint8_t) (cfg.UndervoltageComparisonVoltage & 0xFF);
 280              		.loc 1 43 112 view .LVU75
 281 003a 47EA0317 		orr	r7, r7, r3, lsl #4
 282 003e 7FB2     		sxtb	r7, r7
  43:Src/LTC6811.c **** 	config[1] = (uint8_t) (cfg.UndervoltageComparisonVoltage & 0xFF);
 283              		.loc 1 43 148 view .LVU76
 284 0040 9DF83430 		ldrb	r3, [sp, #52]	@ zero_extendqisi2
  43:Src/LTC6811.c **** 	config[1] = (uint8_t) (cfg.UndervoltageComparisonVoltage & 0xFF);
 285              		.loc 1 43 142 view .LVU77
 286 0044 47EAC307 		orr	r7, r7, r3, lsl #3
 287 0048 7FB2     		sxtb	r7, r7
  43:Src/LTC6811.c **** 	config[1] = (uint8_t) (cfg.UndervoltageComparisonVoltage & 0xFF);
 288              		.loc 1 43 178 view .LVU78
 289 004a 9DF83530 		ldrb	r3, [sp, #53]	@ zero_extendqisi2
  43:Src/LTC6811.c **** 	config[1] = (uint8_t) (cfg.UndervoltageComparisonVoltage & 0xFF);
 290              		.loc 1 43 172 view .LVU79
 291 004e 47EA8307 		orr	r7, r7, r3, lsl #2
 292 0052 7FB2     		sxtb	r7, r7
  43:Src/LTC6811.c **** 	config[1] = (uint8_t) (cfg.UndervoltageComparisonVoltage & 0xFF);
 293              		.loc 1 43 203 view .LVU80
 294 0054 9DF93630 		ldrsb	r3, [sp, #54]
  43:Src/LTC6811.c **** 	config[1] = (uint8_t) (cfg.UndervoltageComparisonVoltage & 0xFF);
 295              		.loc 1 43 197 view .LVU81
 296 0058 1F43     		orrs	r7, r7, r3
 297 005a FFB2     		uxtb	r7, r7
  44:Src/LTC6811.c **** 	config[2] = (uint8_t) ((cfg.OvervoltageComparisonVoltage << 4) & 0xF0) | ((cfg.UndervoltageCompari
 298              		.loc 1 44 2 is_stmt 1 view .LVU82
  44:Src/LTC6811.c **** 	config[2] = (uint8_t) ((cfg.OvervoltageComparisonVoltage << 4) & 0xF0) | ((cfg.UndervoltageCompari
 299              		.loc 1 44 28 is_stmt 0 view .LVU83
 300 005c BDF83830 		ldrh	r3, [sp, #56]
  44:Src/LTC6811.c **** 	config[2] = (uint8_t) ((cfg.OvervoltageComparisonVoltage << 4) & 0xF0) | ((cfg.UndervoltageCompari
 301              		.loc 1 44 14 view .LVU84
 302 0060 5FFA83FB 		uxtb	fp, r3
  45:Src/LTC6811.c **** 	config[3] = (uint8_t) ((cfg.OvervoltageComparisonVoltage >> 4) & 0xFF);
ARM GAS  /tmp/cccH07eq.s 			page 13


 303              		.loc 1 45 2 is_stmt 1 view .LVU85
  45:Src/LTC6811.c **** 	config[3] = (uint8_t) ((cfg.OvervoltageComparisonVoltage >> 4) & 0xFF);
 304              		.loc 1 45 29 is_stmt 0 view .LVU86
 305 0064 BDF83A90 		ldrh	r9, [sp, #58]
  45:Src/LTC6811.c **** 	config[3] = (uint8_t) ((cfg.OvervoltageComparisonVoltage >> 4) & 0xFF);
 306              		.loc 1 45 59 view .LVU87
 307 0068 4FEA0918 		lsl	r8, r9, #4
  45:Src/LTC6811.c **** 	config[3] = (uint8_t) ((cfg.OvervoltageComparisonVoltage >> 4) & 0xFF);
 308              		.loc 1 45 14 view .LVU88
 309 006c 4FFA88F8 		sxtb	r8, r8
  45:Src/LTC6811.c **** 	config[3] = (uint8_t) ((cfg.OvervoltageComparisonVoltage >> 4) & 0xFF);
 310              		.loc 1 45 117 view .LVU89
 311 0070 C3F30323 		ubfx	r3, r3, #8, #4
  45:Src/LTC6811.c **** 	config[3] = (uint8_t) ((cfg.OvervoltageComparisonVoltage >> 4) & 0xFF);
 312              		.loc 1 45 73 view .LVU90
 313 0074 48EA0308 		orr	r8, r8, r3
 314 0078 5FFA88F8 		uxtb	r8, r8
  46:Src/LTC6811.c **** 	config[4] = (uint8_t) (cfg.DischargeCell8 << 7) | (cfg.DischargeCell7 << 6) | (cfg.DischargeCell6 
 315              		.loc 1 46 2 is_stmt 1 view .LVU91
  46:Src/LTC6811.c **** 	config[4] = (uint8_t) (cfg.DischargeCell8 << 7) | (cfg.DischargeCell7 << 6) | (cfg.DischargeCell6 
 316              		.loc 1 46 14 is_stmt 0 view .LVU92
 317 007c C9F30719 		ubfx	r9, r9, #4, #8
  47:Src/LTC6811.c **** 	config[5] = (uint8_t) ((cfg.DischargeTimeoutValue << 4) & 0xF0) | (cfg.DischargeCell12 << 3) | (cf
 318              		.loc 1 47 2 is_stmt 1 view .LVU93
  47:Src/LTC6811.c **** 	config[5] = (uint8_t) ((cfg.DischargeTimeoutValue << 4) & 0xF0) | (cfg.DischargeCell12 << 3) | (cf
 319              		.loc 1 47 28 is_stmt 0 view .LVU94
 320 0080 9DF84360 		ldrb	r6, [sp, #67]	@ zero_extendqisi2
  47:Src/LTC6811.c **** 	config[5] = (uint8_t) ((cfg.DischargeTimeoutValue << 4) & 0xF0) | (cfg.DischargeCell12 << 3) | (cf
 321              		.loc 1 47 14 view .LVU95
 322 0084 F601     		lsls	r6, r6, #7
 323 0086 76B2     		sxtb	r6, r6
  47:Src/LTC6811.c **** 	config[5] = (uint8_t) ((cfg.DischargeTimeoutValue << 4) & 0xF0) | (cfg.DischargeCell12 << 3) | (cf
 324              		.loc 1 47 56 view .LVU96
 325 0088 9DF84230 		ldrb	r3, [sp, #66]	@ zero_extendqisi2
  47:Src/LTC6811.c **** 	config[5] = (uint8_t) ((cfg.DischargeTimeoutValue << 4) & 0xF0) | (cfg.DischargeCell12 << 3) | (cf
 326              		.loc 1 47 50 view .LVU97
 327 008c 46EA8316 		orr	r6, r6, r3, lsl #6
 328 0090 76B2     		sxtb	r6, r6
  47:Src/LTC6811.c **** 	config[5] = (uint8_t) ((cfg.DischargeTimeoutValue << 4) & 0xF0) | (cfg.DischargeCell12 << 3) | (cf
 329              		.loc 1 47 84 view .LVU98
 330 0092 9DF84130 		ldrb	r3, [sp, #65]	@ zero_extendqisi2
  47:Src/LTC6811.c **** 	config[5] = (uint8_t) ((cfg.DischargeTimeoutValue << 4) & 0xF0) | (cfg.DischargeCell12 << 3) | (cf
 331              		.loc 1 47 78 view .LVU99
 332 0096 46EA4316 		orr	r6, r6, r3, lsl #5
 333 009a 76B2     		sxtb	r6, r6
  47:Src/LTC6811.c **** 	config[5] = (uint8_t) ((cfg.DischargeTimeoutValue << 4) & 0xF0) | (cfg.DischargeCell12 << 3) | (cf
 334              		.loc 1 47 112 view .LVU100
 335 009c 9DF84030 		ldrb	r3, [sp, #64]	@ zero_extendqisi2
  47:Src/LTC6811.c **** 	config[5] = (uint8_t) ((cfg.DischargeTimeoutValue << 4) & 0xF0) | (cfg.DischargeCell12 << 3) | (cf
 336              		.loc 1 47 106 view .LVU101
 337 00a0 46EA0316 		orr	r6, r6, r3, lsl #4
 338 00a4 76B2     		sxtb	r6, r6
  47:Src/LTC6811.c **** 	config[5] = (uint8_t) ((cfg.DischargeTimeoutValue << 4) & 0xF0) | (cfg.DischargeCell12 << 3) | (cf
 339              		.loc 1 47 140 view .LVU102
 340 00a6 9DF83F30 		ldrb	r3, [sp, #63]	@ zero_extendqisi2
  47:Src/LTC6811.c **** 	config[5] = (uint8_t) ((cfg.DischargeTimeoutValue << 4) & 0xF0) | (cfg.DischargeCell12 << 3) | (cf
 341              		.loc 1 47 134 view .LVU103
ARM GAS  /tmp/cccH07eq.s 			page 14


 342 00aa 46EAC306 		orr	r6, r6, r3, lsl #3
 343 00ae 76B2     		sxtb	r6, r6
  47:Src/LTC6811.c **** 	config[5] = (uint8_t) ((cfg.DischargeTimeoutValue << 4) & 0xF0) | (cfg.DischargeCell12 << 3) | (cf
 344              		.loc 1 47 168 view .LVU104
 345 00b0 9DF83E30 		ldrb	r3, [sp, #62]	@ zero_extendqisi2
  47:Src/LTC6811.c **** 	config[5] = (uint8_t) ((cfg.DischargeTimeoutValue << 4) & 0xF0) | (cfg.DischargeCell12 << 3) | (cf
 346              		.loc 1 47 162 view .LVU105
 347 00b4 46EA8306 		orr	r6, r6, r3, lsl #2
 348 00b8 76B2     		sxtb	r6, r6
  47:Src/LTC6811.c **** 	config[5] = (uint8_t) ((cfg.DischargeTimeoutValue << 4) & 0xF0) | (cfg.DischargeCell12 << 3) | (cf
 349              		.loc 1 47 196 view .LVU106
 350 00ba 9DF83D30 		ldrb	r3, [sp, #61]	@ zero_extendqisi2
  47:Src/LTC6811.c **** 	config[5] = (uint8_t) ((cfg.DischargeTimeoutValue << 4) & 0xF0) | (cfg.DischargeCell12 << 3) | (cf
 351              		.loc 1 47 190 view .LVU107
 352 00be 46EA4306 		orr	r6, r6, r3, lsl #1
 353 00c2 76B2     		sxtb	r6, r6
  47:Src/LTC6811.c **** 	config[5] = (uint8_t) ((cfg.DischargeTimeoutValue << 4) & 0xF0) | (cfg.DischargeCell12 << 3) | (cf
 354              		.loc 1 47 224 view .LVU108
 355 00c4 9DF93C30 		ldrsb	r3, [sp, #60]
  47:Src/LTC6811.c **** 	config[5] = (uint8_t) ((cfg.DischargeTimeoutValue << 4) & 0xF0) | (cfg.DischargeCell12 << 3) | (cf
 356              		.loc 1 47 218 view .LVU109
 357 00c8 1E43     		orrs	r6, r6, r3
 358 00ca F6B2     		uxtb	r6, r6
  48:Src/LTC6811.c **** 	
 359              		.loc 1 48 2 is_stmt 1 view .LVU110
  48:Src/LTC6811.c **** 	
 360              		.loc 1 48 29 is_stmt 0 view .LVU111
 361 00cc 9DF84830 		ldrb	r3, [sp, #72]	@ zero_extendqisi2
  48:Src/LTC6811.c **** 	
 362              		.loc 1 48 52 view .LVU112
 363 00d0 1B01     		lsls	r3, r3, #4
  48:Src/LTC6811.c **** 	
 364              		.loc 1 48 14 view .LVU113
 365 00d2 5BB2     		sxtb	r3, r3
  48:Src/LTC6811.c **** 	
 366              		.loc 1 48 72 view .LVU114
 367 00d4 9DF84720 		ldrb	r2, [sp, #71]	@ zero_extendqisi2
  48:Src/LTC6811.c **** 	
 368              		.loc 1 48 66 view .LVU115
 369 00d8 43EAC203 		orr	r3, r3, r2, lsl #3
 370 00dc 5BB2     		sxtb	r3, r3
  48:Src/LTC6811.c **** 	
 371              		.loc 1 48 101 view .LVU116
 372 00de 9DF84620 		ldrb	r2, [sp, #70]	@ zero_extendqisi2
  48:Src/LTC6811.c **** 	
 373              		.loc 1 48 95 view .LVU117
 374 00e2 43EA8203 		orr	r3, r3, r2, lsl #2
 375 00e6 5BB2     		sxtb	r3, r3
  48:Src/LTC6811.c **** 	
 376              		.loc 1 48 130 view .LVU118
 377 00e8 9DF84520 		ldrb	r2, [sp, #69]	@ zero_extendqisi2
  48:Src/LTC6811.c **** 	
 378              		.loc 1 48 124 view .LVU119
 379 00ec 43EA4203 		orr	r3, r3, r2, lsl #1
 380 00f0 5BB2     		sxtb	r3, r3
  48:Src/LTC6811.c **** 	
 381              		.loc 1 48 159 view .LVU120
ARM GAS  /tmp/cccH07eq.s 			page 15


 382 00f2 9DF94420 		ldrsb	r2, [sp, #68]
  48:Src/LTC6811.c **** 	
 383              		.loc 1 48 153 view .LVU121
 384 00f6 1343     		orrs	r3, r3, r2
 385 00f8 DBB2     		uxtb	r3, r3
 386 00fa 0193     		str	r3, [sp, #4]
  50:Src/LTC6811.c **** 	
 387              		.loc 1 50 2 is_stmt 1 view .LVU122
 388              	.LBB7:
  50:Src/LTC6811.c **** 	
 389              		.loc 1 50 7 view .LVU123
 390              	.LVL26:
  50:Src/LTC6811.c **** 	
 391              		.loc 1 50 15 is_stmt 0 view .LVU124
 392 00fc 0125     		movs	r5, #1
 393              	.LVL27:
 394              	.L20:
  50:Src/LTC6811.c **** 	
 395              		.loc 1 50 2 discriminator 1 view .LVU125
 396 00fe 5545     		cmp	r5, r10
 397 0100 29D8     		bhi	.L23
  52:Src/LTC6811.c **** 		cmd[1] = (uint8_t) (WriteConfigurationRegisterGroup & 0xFF);
 398              		.loc 1 52 3 is_stmt 1 discriminator 3 view .LVU126
  52:Src/LTC6811.c **** 		cmd[1] = (uint8_t) (WriteConfigurationRegisterGroup & 0xFF);
 399              		.loc 1 52 43 is_stmt 0 discriminator 3 view .LVU127
 400 0102 EB00     		lsls	r3, r5, #3
  52:Src/LTC6811.c **** 		cmd[1] = (uint8_t) (WriteConfigurationRegisterGroup & 0xFF);
 401              		.loc 1 52 49 discriminator 3 view .LVU128
 402 0104 03F07803 		and	r3, r3, #120
  52:Src/LTC6811.c **** 		cmd[1] = (uint8_t) (WriteConfigurationRegisterGroup & 0xFF);
 403              		.loc 1 52 12 discriminator 3 view .LVU129
 404 0108 43F08003 		orr	r3, r3, #128
  52:Src/LTC6811.c **** 		cmd[1] = (uint8_t) (WriteConfigurationRegisterGroup & 0xFF);
 405              		.loc 1 52 10 discriminator 3 view .LVU130
 406 010c 2370     		strb	r3, [r4]
  53:Src/LTC6811.c **** 		
 407              		.loc 1 53 3 is_stmt 1 discriminator 3 view .LVU131
  53:Src/LTC6811.c **** 		
 408              		.loc 1 53 10 is_stmt 0 discriminator 3 view .LVU132
 409 010e 0123     		movs	r3, #1
 410 0110 6370     		strb	r3, [r4, #1]
  55:Src/LTC6811.c **** 		
 411              		.loc 1 55 3 is_stmt 1 discriminator 3 view .LVU133
  55:Src/LTC6811.c **** 		
 412              		.loc 1 55 16 is_stmt 0 discriminator 3 view .LVU134
 413 0112 2146     		mov	r1, r4
 414 0114 0220     		movs	r0, #2
 415 0116 FFF7FEFF 		bl	calculatePEC
 416              	.LVL28:
  57:Src/LTC6811.c **** 		cmd[3] = PEC_return & 0xFF;
 417              		.loc 1 57 3 is_stmt 1 discriminator 3 view .LVU135
  57:Src/LTC6811.c **** 		cmd[3] = PEC_return & 0xFF;
 418              		.loc 1 57 10 is_stmt 0 discriminator 3 view .LVU136
 419 011a 030A     		lsrs	r3, r0, #8
 420 011c A370     		strb	r3, [r4, #2]
  58:Src/LTC6811.c **** 	
 421              		.loc 1 58 3 is_stmt 1 discriminator 3 view .LVU137
ARM GAS  /tmp/cccH07eq.s 			page 16


  58:Src/LTC6811.c **** 	
 422              		.loc 1 58 10 is_stmt 0 discriminator 3 view .LVU138
 423 011e E070     		strb	r0, [r4, #3]
  60:Src/LTC6811.c **** 		cmd[5] = config[1];
 424              		.loc 1 60 3 is_stmt 1 discriminator 3 view .LVU139
  60:Src/LTC6811.c **** 		cmd[5] = config[1];
 425              		.loc 1 60 10 is_stmt 0 discriminator 3 view .LVU140
 426 0120 2771     		strb	r7, [r4, #4]
  61:Src/LTC6811.c **** 		cmd[6] = config[2];
 427              		.loc 1 61 3 is_stmt 1 discriminator 3 view .LVU141
  61:Src/LTC6811.c **** 		cmd[6] = config[2];
 428              		.loc 1 61 10 is_stmt 0 discriminator 3 view .LVU142
 429 0122 84F805B0 		strb	fp, [r4, #5]
  62:Src/LTC6811.c **** 		cmd[7] = config[3];
 430              		.loc 1 62 3 is_stmt 1 discriminator 3 view .LVU143
  62:Src/LTC6811.c **** 		cmd[7] = config[3];
 431              		.loc 1 62 10 is_stmt 0 discriminator 3 view .LVU144
 432 0126 84F80680 		strb	r8, [r4, #6]
  63:Src/LTC6811.c **** 		cmd[8] = config[4];
 433              		.loc 1 63 3 is_stmt 1 discriminator 3 view .LVU145
  63:Src/LTC6811.c **** 		cmd[8] = config[4];
 434              		.loc 1 63 10 is_stmt 0 discriminator 3 view .LVU146
 435 012a 84F80790 		strb	r9, [r4, #7]
  64:Src/LTC6811.c **** 		cmd[9] = config[5];
 436              		.loc 1 64 3 is_stmt 1 discriminator 3 view .LVU147
  64:Src/LTC6811.c **** 		cmd[9] = config[5];
 437              		.loc 1 64 10 is_stmt 0 discriminator 3 view .LVU148
 438 012e 2672     		strb	r6, [r4, #8]
  65:Src/LTC6811.c **** 		
 439              		.loc 1 65 3 is_stmt 1 discriminator 3 view .LVU149
  65:Src/LTC6811.c **** 		
 440              		.loc 1 65 10 is_stmt 0 discriminator 3 view .LVU150
 441 0130 019B     		ldr	r3, [sp, #4]
 442 0132 6372     		strb	r3, [r4, #9]
  67:Src/LTC6811.c **** 	
 443              		.loc 1 67 3 is_stmt 1 discriminator 3 view .LVU151
  67:Src/LTC6811.c **** 	
 444              		.loc 1 67 16 is_stmt 0 discriminator 3 view .LVU152
 445 0134 211D     		adds	r1, r4, #4
 446 0136 0620     		movs	r0, #6
 447              	.LVL29:
  67:Src/LTC6811.c **** 	
 448              		.loc 1 67 16 discriminator 3 view .LVU153
 449 0138 FFF7FEFF 		bl	calculatePEC
 450              	.LVL30:
  69:Src/LTC6811.c **** 		cmd[11] = PEC_return & 0xFF;
 451              		.loc 1 69 3 is_stmt 1 discriminator 3 view .LVU154
  69:Src/LTC6811.c **** 		cmd[11] = PEC_return & 0xFF;
 452              		.loc 1 69 11 is_stmt 0 discriminator 3 view .LVU155
 453 013c 030A     		lsrs	r3, r0, #8
 454 013e A372     		strb	r3, [r4, #10]
  70:Src/LTC6811.c **** 		
 455              		.loc 1 70 3 is_stmt 1 discriminator 3 view .LVU156
  70:Src/LTC6811.c **** 		
 456              		.loc 1 70 11 is_stmt 0 discriminator 3 view .LVU157
 457 0140 E072     		strb	r0, [r4, #11]
  72:Src/LTC6811.c **** 		
ARM GAS  /tmp/cccH07eq.s 			page 17


 458              		.loc 1 72 3 is_stmt 1 discriminator 3 view .LVU158
 459 0142 0C21     		movs	r1, #12
 460 0144 2046     		mov	r0, r4
 461              	.LVL31:
  72:Src/LTC6811.c **** 		
 462              		.loc 1 72 3 is_stmt 0 discriminator 3 view .LVU159
 463 0146 FFF7FEFF 		bl	SPIWrite
 464              	.LVL32:
  74:Src/LTC6811.c **** 	}
 465              		.loc 1 74 3 is_stmt 1 discriminator 3 view .LVU160
 466 014a 6420     		movs	r0, #100
 467 014c FFF7FEFF 		bl	HAL_Delay
 468              	.LVL33:
  50:Src/LTC6811.c **** 	
 469              		.loc 1 50 65 is_stmt 0 discriminator 3 view .LVU161
 470 0150 0135     		adds	r5, r5, #1
 471              	.LVL34:
  50:Src/LTC6811.c **** 	
 472              		.loc 1 50 65 discriminator 3 view .LVU162
 473 0152 EDB2     		uxtb	r5, r5
 474              	.LVL35:
  50:Src/LTC6811.c **** 	
 475              		.loc 1 50 65 discriminator 3 view .LVU163
 476 0154 D3E7     		b	.L20
 477              	.L23:
  50:Src/LTC6811.c **** 	
 478              		.loc 1 50 65 discriminator 3 view .LVU164
 479              	.LBE7:
  77:Src/LTC6811.c **** 	
 480              		.loc 1 77 2 is_stmt 1 view .LVU165
 481 0156 2046     		mov	r0, r4
 482 0158 FFF7FEFF 		bl	free
 483              	.LVL36:
  79:Src/LTC6811.c **** 
 484              		.loc 1 79 1 is_stmt 0 view .LVU166
 485 015c 03B0     		add	sp, sp, #12
 486              	.LCFI5:
 487              		.cfi_def_cfa_offset 52
 488              		@ sp needed
 489 015e BDE8F04F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 490              	.LCFI6:
 491              		.cfi_restore 14
 492              		.cfi_restore 11
 493              		.cfi_restore 10
 494              		.cfi_restore 9
 495              		.cfi_restore 8
 496              		.cfi_restore 7
 497              		.cfi_restore 6
 498              		.cfi_restore 5
 499              		.cfi_restore 4
 500              		.cfi_def_cfa_offset 16
 501              	.LVL37:
  79:Src/LTC6811.c **** 
 502              		.loc 1 79 1 view .LVU167
 503 0162 04B0     		add	sp, sp, #16
 504              	.LCFI7:
 505              		.cfi_def_cfa_offset 0
ARM GAS  /tmp/cccH07eq.s 			page 18


 506 0164 7047     		bx	lr
 507              		.cfi_endproc
 508              	.LFE131:
 510              		.section	.text.sendBroadcastCommand,"ax",%progbits
 511              		.align	1
 512              		.global	sendBroadcastCommand
 513              		.syntax unified
 514              		.thumb
 515              		.thumb_func
 516              		.fpu fpv4-sp-d16
 518              	sendBroadcastCommand:
 519              	.LVL38:
 520              	.LFB133:
 284:Src/LTC6811.c **** 	
 521              		.loc 1 284 55 is_stmt 1 view -0
 522              		.cfi_startproc
 523              		@ args = 0, pretend = 0, frame = 8
 524              		@ frame_needed = 0, uses_anonymous_args = 0
 284:Src/LTC6811.c **** 	
 525              		.loc 1 284 55 is_stmt 0 view .LVU169
 526 0000 00B5     		push	{lr}
 527              	.LCFI8:
 528              		.cfi_def_cfa_offset 4
 529              		.cfi_offset 14, -4
 530 0002 83B0     		sub	sp, sp, #12
 531              	.LCFI9:
 532              		.cfi_def_cfa_offset 16
 286:Src/LTC6811.c **** 	uint16_t PEC_return;
 533              		.loc 1 286 2 is_stmt 1 view .LVU170
 287:Src/LTC6811.c **** 	
 534              		.loc 1 287 2 view .LVU171
 289:Src/LTC6811.c **** 	cmd[1] = (uint8_t) (command & 0xFF);
 535              		.loc 1 289 2 view .LVU172
 289:Src/LTC6811.c **** 	cmd[1] = (uint8_t) (command & 0xFF);
 536              		.loc 1 289 11 is_stmt 0 view .LVU173
 537 0004 C0F30323 		ubfx	r3, r0, #8, #4
 289:Src/LTC6811.c **** 	cmd[1] = (uint8_t) (command & 0xFF);
 538              		.loc 1 289 9 view .LVU174
 539 0008 8DF80430 		strb	r3, [sp, #4]
 290:Src/LTC6811.c **** 	
 540              		.loc 1 290 2 is_stmt 1 view .LVU175
 290:Src/LTC6811.c **** 	
 541              		.loc 1 290 9 is_stmt 0 view .LVU176
 542 000c 8DF80500 		strb	r0, [sp, #5]
 292:Src/LTC6811.c **** 	
 543              		.loc 1 292 2 is_stmt 1 view .LVU177
 292:Src/LTC6811.c **** 	
 544              		.loc 1 292 15 is_stmt 0 view .LVU178
 545 0010 01A9     		add	r1, sp, #4
 546 0012 0220     		movs	r0, #2
 547              	.LVL39:
 292:Src/LTC6811.c **** 	
 548              		.loc 1 292 15 view .LVU179
 549 0014 FFF7FEFF 		bl	calculatePEC
 550              	.LVL40:
 294:Src/LTC6811.c **** 	cmd[3] = PEC_return & 0xFF;
 551              		.loc 1 294 2 is_stmt 1 view .LVU180
ARM GAS  /tmp/cccH07eq.s 			page 19


 294:Src/LTC6811.c **** 	cmd[3] = PEC_return & 0xFF;
 552              		.loc 1 294 9 is_stmt 0 view .LVU181
 553 0018 030A     		lsrs	r3, r0, #8
 554 001a 8DF80630 		strb	r3, [sp, #6]
 295:Src/LTC6811.c **** 	
 555              		.loc 1 295 2 is_stmt 1 view .LVU182
 295:Src/LTC6811.c **** 	
 556              		.loc 1 295 9 is_stmt 0 view .LVU183
 557 001e 8DF80700 		strb	r0, [sp, #7]
 297:Src/LTC6811.c **** };
 558              		.loc 1 297 2 is_stmt 1 view .LVU184
 559 0022 0421     		movs	r1, #4
 560 0024 0DEB0100 		add	r0, sp, r1
 561              	.LVL41:
 297:Src/LTC6811.c **** };
 562              		.loc 1 297 2 is_stmt 0 view .LVU185
 563 0028 FFF7FEFF 		bl	SPIWrite
 564              	.LVL42:
 298:Src/LTC6811.c **** 
 565              		.loc 1 298 1 view .LVU186
 566 002c 03B0     		add	sp, sp, #12
 567              	.LCFI10:
 568              		.cfi_def_cfa_offset 4
 569              		@ sp needed
 570 002e 5DF804FB 		ldr	pc, [sp], #4
 571              		.cfi_endproc
 572              	.LFE133:
 574              		.section	.text.sendAddressCommand,"ax",%progbits
 575              		.align	1
 576              		.global	sendAddressCommand
 577              		.syntax unified
 578              		.thumb
 579              		.thumb_func
 580              		.fpu fpv4-sp-d16
 582              	sendAddressCommand:
 583              	.LVL43:
 584              	.LFB134:
 300:Src/LTC6811.c **** 	
 585              		.loc 1 300 70 is_stmt 1 view -0
 586              		.cfi_startproc
 587              		@ args = 0, pretend = 0, frame = 8
 588              		@ frame_needed = 0, uses_anonymous_args = 0
 300:Src/LTC6811.c **** 	
 589              		.loc 1 300 70 is_stmt 0 view .LVU188
 590 0000 70B5     		push	{r4, r5, r6, lr}
 591              	.LCFI11:
 592              		.cfi_def_cfa_offset 16
 593              		.cfi_offset 4, -16
 594              		.cfi_offset 5, -12
 595              		.cfi_offset 6, -8
 596              		.cfi_offset 14, -4
 597 0002 82B0     		sub	sp, sp, #8
 598              	.LCFI12:
 599              		.cfi_def_cfa_offset 24
 600 0004 0546     		mov	r5, r0
 601 0006 0C46     		mov	r4, r1
 302:Src/LTC6811.c **** 	uint16_t PEC_return;
ARM GAS  /tmp/cccH07eq.s 			page 20


 602              		.loc 1 302 2 is_stmt 1 view .LVU189
 303:Src/LTC6811.c **** 	uint8_t *msbytes;
 603              		.loc 1 303 2 view .LVU190
 304:Src/LTC6811.c **** 	
 604              		.loc 1 304 2 view .LVU191
 306:Src/LTC6811.c **** 	
 605              		.loc 1 306 2 view .LVU192
 306:Src/LTC6811.c **** 	
 606              		.loc 1 306 23 is_stmt 0 view .LVU193
 607 0008 0220     		movs	r0, #2
 608              	.LVL44:
 306:Src/LTC6811.c **** 	
 609              		.loc 1 306 23 view .LVU194
 610 000a FFF7FEFF 		bl	malloc
 611              	.LVL45:
 306:Src/LTC6811.c **** 	
 612              		.loc 1 306 23 view .LVU195
 613 000e 0646     		mov	r6, r0
 614              	.LVL46:
 308:Src/LTC6811.c **** 	msbytes[1] = (uint8_t) (command & 0xFF);
 615              		.loc 1 308 2 is_stmt 1 view .LVU196
 308:Src/LTC6811.c **** 	msbytes[1] = (uint8_t) (command & 0xFF);
 616              		.loc 1 308 43 is_stmt 0 view .LVU197
 617 0010 E300     		lsls	r3, r4, #3
 308:Src/LTC6811.c **** 	msbytes[1] = (uint8_t) (command & 0xFF);
 618              		.loc 1 308 49 view .LVU198
 619 0012 03F07803 		and	r3, r3, #120
 308:Src/LTC6811.c **** 	msbytes[1] = (uint8_t) (command & 0xFF);
 620              		.loc 1 308 31 view .LVU199
 621 0016 63F07F03 		orn	r3, r3, #127
 308:Src/LTC6811.c **** 	msbytes[1] = (uint8_t) (command & 0xFF);
 622              		.loc 1 308 75 view .LVU200
 623 001a C5F30224 		ubfx	r4, r5, #8, #3
 308:Src/LTC6811.c **** 	msbytes[1] = (uint8_t) (command & 0xFF);
 624              		.loc 1 308 57 view .LVU201
 625 001e 2343     		orrs	r3, r3, r4
 308:Src/LTC6811.c **** 	msbytes[1] = (uint8_t) (command & 0xFF);
 626              		.loc 1 308 15 view .LVU202
 627 0020 DBB2     		uxtb	r3, r3
 308:Src/LTC6811.c **** 	msbytes[1] = (uint8_t) (command & 0xFF);
 628              		.loc 1 308 13 view .LVU203
 629 0022 0370     		strb	r3, [r0]
 309:Src/LTC6811.c **** 
 630              		.loc 1 309 2 is_stmt 1 view .LVU204
 309:Src/LTC6811.c **** 
 631              		.loc 1 309 15 is_stmt 0 view .LVU205
 632 0024 EDB2     		uxtb	r5, r5
 309:Src/LTC6811.c **** 
 633              		.loc 1 309 13 view .LVU206
 634 0026 4570     		strb	r5, [r0, #1]
 311:Src/LTC6811.c **** 	cmd[1] = msbytes[1];
 635              		.loc 1 311 2 is_stmt 1 view .LVU207
 311:Src/LTC6811.c **** 	cmd[1] = msbytes[1];
 636              		.loc 1 311 9 is_stmt 0 view .LVU208
 637 0028 8DF80430 		strb	r3, [sp, #4]
 312:Src/LTC6811.c **** 	
 638              		.loc 1 312 2 is_stmt 1 view .LVU209
ARM GAS  /tmp/cccH07eq.s 			page 21


 312:Src/LTC6811.c **** 	
 639              		.loc 1 312 9 is_stmt 0 view .LVU210
 640 002c 8DF80550 		strb	r5, [sp, #5]
 314:Src/LTC6811.c **** 	
 641              		.loc 1 314 2 is_stmt 1 view .LVU211
 314:Src/LTC6811.c **** 	
 642              		.loc 1 314 15 is_stmt 0 view .LVU212
 643 0030 0146     		mov	r1, r0
 644 0032 0220     		movs	r0, #2
 645              	.LVL47:
 314:Src/LTC6811.c **** 	
 646              		.loc 1 314 15 view .LVU213
 647 0034 FFF7FEFF 		bl	calculatePEC
 648              	.LVL48:
 316:Src/LTC6811.c **** 	cmd[3] = PEC_return & 0xFF;
 649              		.loc 1 316 2 is_stmt 1 view .LVU214
 316:Src/LTC6811.c **** 	cmd[3] = PEC_return & 0xFF;
 650              		.loc 1 316 9 is_stmt 0 view .LVU215
 651 0038 030A     		lsrs	r3, r0, #8
 652 003a 8DF80630 		strb	r3, [sp, #6]
 317:Src/LTC6811.c **** 	
 653              		.loc 1 317 2 is_stmt 1 view .LVU216
 317:Src/LTC6811.c **** 	
 654              		.loc 1 317 9 is_stmt 0 view .LVU217
 655 003e 8DF80700 		strb	r0, [sp, #7]
 319:Src/LTC6811.c **** 	
 656              		.loc 1 319 2 is_stmt 1 view .LVU218
 657 0042 0421     		movs	r1, #4
 658 0044 0DEB0100 		add	r0, sp, r1
 659              	.LVL49:
 319:Src/LTC6811.c **** 	
 660              		.loc 1 319 2 is_stmt 0 view .LVU219
 661 0048 FFF7FEFF 		bl	SPIWrite
 662              	.LVL50:
 321:Src/LTC6811.c **** };
 663              		.loc 1 321 2 is_stmt 1 view .LVU220
 664 004c 3046     		mov	r0, r6
 665 004e FFF7FEFF 		bl	free
 666              	.LVL51:
 322:Src/LTC6811.c **** 
 667              		.loc 1 322 1 is_stmt 0 view .LVU221
 668 0052 02B0     		add	sp, sp, #8
 669              	.LCFI13:
 670              		.cfi_def_cfa_offset 16
 671              		@ sp needed
 672 0054 70BD     		pop	{r4, r5, r6, pc}
 322:Src/LTC6811.c **** 
 673              		.loc 1 322 1 view .LVU222
 674              		.cfi_endproc
 675              	.LFE134:
 677              		.section	.text.readCellVoltage,"ax",%progbits
 678              		.align	1
 679              		.global	readCellVoltage
 680              		.syntax unified
 681              		.thumb
 682              		.thumb_func
 683              		.fpu fpv4-sp-d16
ARM GAS  /tmp/cccH07eq.s 			page 22


 685              	readCellVoltage:
 686              	.LVL52:
 687              	.LFB132:
  81:Src/LTC6811.c **** 	
 688              		.loc 1 81 64 is_stmt 1 view -0
 689              		.cfi_startproc
 690              		@ args = 0, pretend = 0, frame = 24
 691              		@ frame_needed = 0, uses_anonymous_args = 0
  81:Src/LTC6811.c **** 	
 692              		.loc 1 81 64 is_stmt 0 view .LVU224
 693 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 694              	.LCFI14:
 695              		.cfi_def_cfa_offset 20
 696              		.cfi_offset 4, -20
 697              		.cfi_offset 5, -16
 698              		.cfi_offset 6, -12
 699              		.cfi_offset 7, -8
 700              		.cfi_offset 14, -4
 701 0002 87B0     		sub	sp, sp, #28
 702              	.LCFI15:
 703              		.cfi_def_cfa_offset 48
 704 0004 0646     		mov	r6, r0
 705 0006 0F46     		mov	r7, r1
  83:Src/LTC6811.c **** 	uint8_t rx_data[12];
 706              		.loc 1 83 2 is_stmt 1 view .LVU225
  84:Src/LTC6811.c **** 	uint16_t PEC_return;
 707              		.loc 1 84 2 view .LVU226
  85:Src/LTC6811.c **** 	uint8_t *PEC_send;
 708              		.loc 1 85 2 view .LVU227
  86:Src/LTC6811.c **** 	bool dataValid = true;
 709              		.loc 1 86 2 view .LVU228
  87:Src/LTC6811.c **** 	
 710              		.loc 1 87 2 view .LVU229
 711              	.LVL53:
  89:Src/LTC6811.c **** 
 712              		.loc 1 89 2 view .LVU230
 713 0008 0146     		mov	r1, r0
 714              	.LVL54:
  89:Src/LTC6811.c **** 
 715              		.loc 1 89 2 is_stmt 0 view .LVU231
 716 000a 4FF41870 		mov	r0, #608
 717              	.LVL55:
  89:Src/LTC6811.c **** 
 718              		.loc 1 89 2 view .LVU232
 719 000e FFF7FEFF 		bl	sendAddressCommand
 720              	.LVL56:
  91:Src/LTC6811.c **** 
 721              		.loc 1 91 2 is_stmt 1 view .LVU233
 722 0012 0F20     		movs	r0, #15
 723 0014 FFF7FEFF 		bl	HAL_Delay
 724              	.LVL57:
  94:Src/LTC6811.c **** 	
 725              		.loc 1 94 2 view .LVU234
  94:Src/LTC6811.c **** 	
 726              		.loc 1 94 24 is_stmt 0 view .LVU235
 727 0018 0620     		movs	r0, #6
 728 001a FFF7FEFF 		bl	malloc
ARM GAS  /tmp/cccH07eq.s 			page 23


 729              	.LVL58:
 730 001e 0546     		mov	r5, r0
 731              	.LVL59:
  96:Src/LTC6811.c **** 	PEC_send[1] = (uint8_t) (ReadCellVoltageRegisterGroup1to3 & 0xFF);
 732              		.loc 1 96 2 is_stmt 1 view .LVU236
  96:Src/LTC6811.c **** 	PEC_send[1] = (uint8_t) (ReadCellVoltageRegisterGroup1to3 & 0xFF);
 733              		.loc 1 96 44 is_stmt 0 view .LVU237
 734 0020 F600     		lsls	r6, r6, #3
  96:Src/LTC6811.c **** 	PEC_send[1] = (uint8_t) (ReadCellVoltageRegisterGroup1to3 & 0xFF);
 735              		.loc 1 96 50 view .LVU238
 736 0022 06F07806 		and	r6, r6, #120
  96:Src/LTC6811.c **** 	PEC_send[1] = (uint8_t) (ReadCellVoltageRegisterGroup1to3 & 0xFF);
 737              		.loc 1 96 16 view .LVU239
 738 0026 46F08006 		orr	r6, r6, #128
  96:Src/LTC6811.c **** 	PEC_send[1] = (uint8_t) (ReadCellVoltageRegisterGroup1to3 & 0xFF);
 739              		.loc 1 96 14 view .LVU240
 740 002a 0670     		strb	r6, [r0]
  97:Src/LTC6811.c **** 
 741              		.loc 1 97 2 is_stmt 1 view .LVU241
  97:Src/LTC6811.c **** 
 742              		.loc 1 97 14 is_stmt 0 view .LVU242
 743 002c 0423     		movs	r3, #4
 744 002e 4370     		strb	r3, [r0, #1]
  99:Src/LTC6811.c **** 	cmd[1] = PEC_send[1];
 745              		.loc 1 99 2 is_stmt 1 view .LVU243
  99:Src/LTC6811.c **** 	cmd[1] = PEC_send[1];
 746              		.loc 1 99 9 is_stmt 0 view .LVU244
 747 0030 8DF80C60 		strb	r6, [sp, #12]
 100:Src/LTC6811.c **** 	
 748              		.loc 1 100 2 is_stmt 1 view .LVU245
 100:Src/LTC6811.c **** 	
 749              		.loc 1 100 9 is_stmt 0 view .LVU246
 750 0034 8DF80D30 		strb	r3, [sp, #13]
 102:Src/LTC6811.c **** 	
 751              		.loc 1 102 2 is_stmt 1 view .LVU247
 102:Src/LTC6811.c **** 	
 752              		.loc 1 102 15 is_stmt 0 view .LVU248
 753 0038 0146     		mov	r1, r0
 754 003a 0220     		movs	r0, #2
 755              	.LVL60:
 102:Src/LTC6811.c **** 	
 756              		.loc 1 102 15 view .LVU249
 757 003c FFF7FEFF 		bl	calculatePEC
 758              	.LVL61:
 104:Src/LTC6811.c **** 	cmd[3] = PEC_return & 0xFF;
 759              		.loc 1 104 2 is_stmt 1 view .LVU250
 104:Src/LTC6811.c **** 	cmd[3] = PEC_return & 0xFF;
 760              		.loc 1 104 9 is_stmt 0 view .LVU251
 761 0040 030A     		lsrs	r3, r0, #8
 762 0042 8DF80E30 		strb	r3, [sp, #14]
 105:Src/LTC6811.c **** 	
 763              		.loc 1 105 2 is_stmt 1 view .LVU252
 105:Src/LTC6811.c **** 	
 764              		.loc 1 105 9 is_stmt 0 view .LVU253
 765 0046 8DF80F00 		strb	r0, [sp, #15]
 107:Src/LTC6811.c **** 	cmd[5] = 0;
 766              		.loc 1 107 2 is_stmt 1 view .LVU254
ARM GAS  /tmp/cccH07eq.s 			page 24


 107:Src/LTC6811.c **** 	cmd[5] = 0;
 767              		.loc 1 107 9 is_stmt 0 view .LVU255
 768 004a 0024     		movs	r4, #0
 769 004c 8DF81040 		strb	r4, [sp, #16]
 108:Src/LTC6811.c **** 	cmd[6] = 0;
 770              		.loc 1 108 2 is_stmt 1 view .LVU256
 108:Src/LTC6811.c **** 	cmd[6] = 0;
 771              		.loc 1 108 9 is_stmt 0 view .LVU257
 772 0050 8DF81140 		strb	r4, [sp, #17]
 109:Src/LTC6811.c **** 	cmd[7] = 0;
 773              		.loc 1 109 2 is_stmt 1 view .LVU258
 109:Src/LTC6811.c **** 	cmd[7] = 0;
 774              		.loc 1 109 9 is_stmt 0 view .LVU259
 775 0054 8DF81240 		strb	r4, [sp, #18]
 110:Src/LTC6811.c **** 	cmd[8] = 0;
 776              		.loc 1 110 2 is_stmt 1 view .LVU260
 110:Src/LTC6811.c **** 	cmd[8] = 0;
 777              		.loc 1 110 9 is_stmt 0 view .LVU261
 778 0058 8DF81340 		strb	r4, [sp, #19]
 111:Src/LTC6811.c **** 	cmd[9] = 0;
 779              		.loc 1 111 2 is_stmt 1 view .LVU262
 111:Src/LTC6811.c **** 	cmd[9] = 0;
 780              		.loc 1 111 9 is_stmt 0 view .LVU263
 781 005c 8DF81440 		strb	r4, [sp, #20]
 112:Src/LTC6811.c **** 	cmd[10] = 0;
 782              		.loc 1 112 2 is_stmt 1 view .LVU264
 112:Src/LTC6811.c **** 	cmd[10] = 0;
 783              		.loc 1 112 9 is_stmt 0 view .LVU265
 784 0060 8DF81540 		strb	r4, [sp, #21]
 113:Src/LTC6811.c **** 	cmd[11] = 0;
 785              		.loc 1 113 2 is_stmt 1 view .LVU266
 113:Src/LTC6811.c **** 	cmd[11] = 0;
 786              		.loc 1 113 10 is_stmt 0 view .LVU267
 787 0064 8DF81640 		strb	r4, [sp, #22]
 114:Src/LTC6811.c **** 	
 788              		.loc 1 114 2 is_stmt 1 view .LVU268
 114:Src/LTC6811.c **** 	
 789              		.loc 1 114 10 is_stmt 0 view .LVU269
 790 0068 8DF81740 		strb	r4, [sp, #23]
 116:Src/LTC6811.c **** 	
 791              		.loc 1 116 2 is_stmt 1 view .LVU270
 792 006c 0C22     		movs	r2, #12
 793 006e 6946     		mov	r1, sp
 794 0070 0DEB0200 		add	r0, sp, r2
 795              	.LVL62:
 116:Src/LTC6811.c **** 	
 796              		.loc 1 116 2 is_stmt 0 view .LVU271
 797 0074 FFF7FEFF 		bl	SPIWriteRead
 798              	.LVL63:
 126:Src/LTC6811.c **** 	PEC_send[1] = rx_data[5]; // cell 1 voltage high bytes
 799              		.loc 1 126 2 is_stmt 1 view .LVU272
 127:Src/LTC6811.c **** 	PEC_send[2] = rx_data[6]; // cell 2 voltage low bytes
 800              		.loc 1 127 2 view .LVU273
 127:Src/LTC6811.c **** 	PEC_send[2] = rx_data[6]; // cell 2 voltage low bytes
 801              		.loc 1 127 23 is_stmt 0 view .LVU274
 802 0078 9DF80530 		ldrb	r3, [sp, #5]	@ zero_extendqisi2
 128:Src/LTC6811.c **** 	PEC_send[3] = rx_data[7]; // cell 2 voltage high bytes
ARM GAS  /tmp/cccH07eq.s 			page 25


 803              		.loc 1 128 2 is_stmt 1 view .LVU275
 128:Src/LTC6811.c **** 	PEC_send[3] = rx_data[7]; // cell 2 voltage high bytes
 804              		.loc 1 128 23 is_stmt 0 view .LVU276
 805 007c 9DF806C0 		ldrb	ip, [sp, #6]	@ zero_extendqisi2
 128:Src/LTC6811.c **** 	PEC_send[3] = rx_data[7]; // cell 2 voltage high bytes
 806              		.loc 1 128 14 view .LVU277
 807 0080 85F802C0 		strb	ip, [r5, #2]
 129:Src/LTC6811.c **** 	PEC_send[4] = rx_data[8]; // cell 3 voltage low bytes
 808              		.loc 1 129 2 is_stmt 1 view .LVU278
 129:Src/LTC6811.c **** 	PEC_send[4] = rx_data[8]; // cell 3 voltage low bytes
 809              		.loc 1 129 23 is_stmt 0 view .LVU279
 810 0084 9DF80710 		ldrb	r1, [sp, #7]	@ zero_extendqisi2
 129:Src/LTC6811.c **** 	PEC_send[4] = rx_data[8]; // cell 3 voltage low bytes
 811              		.loc 1 129 14 view .LVU280
 812 0088 E970     		strb	r1, [r5, #3]
 130:Src/LTC6811.c **** 	PEC_send[5] = rx_data[9]; // cell 3 voltage high bytes
 813              		.loc 1 130 2 is_stmt 1 view .LVU281
 130:Src/LTC6811.c **** 	PEC_send[5] = rx_data[9]; // cell 3 voltage high bytes
 814              		.loc 1 130 23 is_stmt 0 view .LVU282
 815 008a 9DF80800 		ldrb	r0, [sp, #8]	@ zero_extendqisi2
 130:Src/LTC6811.c **** 	PEC_send[5] = rx_data[9]; // cell 3 voltage high bytes
 816              		.loc 1 130 14 view .LVU283
 817 008e 2871     		strb	r0, [r5, #4]
 131:Src/LTC6811.c **** 	
 818              		.loc 1 131 2 is_stmt 1 view .LVU284
 131:Src/LTC6811.c **** 	
 819              		.loc 1 131 23 is_stmt 0 view .LVU285
 820 0090 9DF80920 		ldrb	r2, [sp, #9]	@ zero_extendqisi2
 131:Src/LTC6811.c **** 	
 821              		.loc 1 131 14 view .LVU286
 822 0094 6A71     		strb	r2, [r5, #5]
 133:Src/LTC6811.c **** 	
 823              		.loc 1 133 2 is_stmt 1 view .LVU287
 141:Src/LTC6811.c **** 		cellVoltage[0] = (uint16_t) ((rx_data[5] << 8) & 0xFF00) | (rx_data[4] & 0x00FF); // cell 1 volta
 824              		.loc 1 141 2 view .LVU288
 142:Src/LTC6811.c **** 		cellVoltage[1] = (uint16_t) ((rx_data[7] << 8) & 0xFF00) | (rx_data[6] & 0x00FF); // cell 2 volta
 825              		.loc 1 142 3 view .LVU289
 142:Src/LTC6811.c **** 		cellVoltage[1] = (uint16_t) ((rx_data[7] << 8) & 0xFF00) | (rx_data[6] & 0x00FF); // cell 2 volta
 826              		.loc 1 142 44 is_stmt 0 view .LVU290
 827 0096 1B02     		lsls	r3, r3, #8
 142:Src/LTC6811.c **** 		cellVoltage[1] = (uint16_t) ((rx_data[7] << 8) & 0xFF00) | (rx_data[6] & 0x00FF); // cell 2 volta
 828              		.loc 1 142 20 view .LVU291
 829 0098 1BB2     		sxth	r3, r3
 142:Src/LTC6811.c **** 		cellVoltage[1] = (uint16_t) ((rx_data[7] << 8) & 0xFF00) | (rx_data[6] & 0x00FF); // cell 2 volta
 830              		.loc 1 142 70 view .LVU292
 831 009a 9DF804E0 		ldrb	lr, [sp, #4]	@ zero_extendqisi2
 142:Src/LTC6811.c **** 		cellVoltage[1] = (uint16_t) ((rx_data[7] << 8) & 0xFF00) | (rx_data[6] & 0x00FF); // cell 2 volta
 832              		.loc 1 142 60 view .LVU293
 833 009e 43EA0E03 		orr	r3, r3, lr
 142:Src/LTC6811.c **** 		cellVoltage[1] = (uint16_t) ((rx_data[7] << 8) & 0xFF00) | (rx_data[6] & 0x00FF); // cell 2 volta
 834              		.loc 1 142 18 view .LVU294
 835 00a2 3B80     		strh	r3, [r7]	@ movhi
 143:Src/LTC6811.c **** 		cellVoltage[2] = (uint16_t) ((rx_data[9] << 8) & 0xFF00) | (rx_data[8] & 0x00FF); // cell 3 volta
 836              		.loc 1 143 3 is_stmt 1 view .LVU295
 143:Src/LTC6811.c **** 		cellVoltage[2] = (uint16_t) ((rx_data[9] << 8) & 0xFF00) | (rx_data[8] & 0x00FF); // cell 3 volta
 837              		.loc 1 143 44 is_stmt 0 view .LVU296
 838 00a4 0902     		lsls	r1, r1, #8
ARM GAS  /tmp/cccH07eq.s 			page 26


 143:Src/LTC6811.c **** 		cellVoltage[2] = (uint16_t) ((rx_data[9] << 8) & 0xFF00) | (rx_data[8] & 0x00FF); // cell 3 volta
 839              		.loc 1 143 20 view .LVU297
 840 00a6 09B2     		sxth	r1, r1
 143:Src/LTC6811.c **** 		cellVoltage[2] = (uint16_t) ((rx_data[9] << 8) & 0xFF00) | (rx_data[8] & 0x00FF); // cell 3 volta
 841              		.loc 1 143 60 view .LVU298
 842 00a8 4CEA0101 		orr	r1, ip, r1
 143:Src/LTC6811.c **** 		cellVoltage[2] = (uint16_t) ((rx_data[9] << 8) & 0xFF00) | (rx_data[8] & 0x00FF); // cell 3 volta
 843              		.loc 1 143 18 view .LVU299
 844 00ac 7980     		strh	r1, [r7, #2]	@ movhi
 144:Src/LTC6811.c **** 	}
 845              		.loc 1 144 3 is_stmt 1 view .LVU300
 144:Src/LTC6811.c **** 	}
 846              		.loc 1 144 44 is_stmt 0 view .LVU301
 847 00ae 1202     		lsls	r2, r2, #8
 144:Src/LTC6811.c **** 	}
 848              		.loc 1 144 20 view .LVU302
 849 00b0 12B2     		sxth	r2, r2
 144:Src/LTC6811.c **** 	}
 850              		.loc 1 144 60 view .LVU303
 851 00b2 0243     		orrs	r2, r2, r0
 144:Src/LTC6811.c **** 	}
 852              		.loc 1 144 18 view .LVU304
 853 00b4 BA80     		strh	r2, [r7, #4]	@ movhi
 148:Src/LTC6811.c **** 	PEC_send[1] = (uint8_t) (ReadCellVoltageRegisterGroup4to6 & 0xFF);
 854              		.loc 1 148 2 is_stmt 1 view .LVU305
 148:Src/LTC6811.c **** 	PEC_send[1] = (uint8_t) (ReadCellVoltageRegisterGroup4to6 & 0xFF);
 855              		.loc 1 148 14 is_stmt 0 view .LVU306
 856 00b6 2E70     		strb	r6, [r5]
 149:Src/LTC6811.c **** 
 857              		.loc 1 149 2 is_stmt 1 view .LVU307
 149:Src/LTC6811.c **** 
 858              		.loc 1 149 14 is_stmt 0 view .LVU308
 859 00b8 0623     		movs	r3, #6
 860 00ba 6B70     		strb	r3, [r5, #1]
 151:Src/LTC6811.c **** 	cmd[1] = PEC_send[1];
 861              		.loc 1 151 2 is_stmt 1 view .LVU309
 151:Src/LTC6811.c **** 	cmd[1] = PEC_send[1];
 862              		.loc 1 151 9 is_stmt 0 view .LVU310
 863 00bc 8DF80C60 		strb	r6, [sp, #12]
 152:Src/LTC6811.c **** 	
 864              		.loc 1 152 2 is_stmt 1 view .LVU311
 152:Src/LTC6811.c **** 	
 865              		.loc 1 152 9 is_stmt 0 view .LVU312
 866 00c0 8DF80D30 		strb	r3, [sp, #13]
 154:Src/LTC6811.c **** 	
 867              		.loc 1 154 2 is_stmt 1 view .LVU313
 154:Src/LTC6811.c **** 	
 868              		.loc 1 154 15 is_stmt 0 view .LVU314
 869 00c4 2946     		mov	r1, r5
 870 00c6 0220     		movs	r0, #2
 871 00c8 FFF7FEFF 		bl	calculatePEC
 872              	.LVL64:
 156:Src/LTC6811.c **** 	cmd[3] = PEC_return & 0xFF;
 873              		.loc 1 156 2 is_stmt 1 view .LVU315
 156:Src/LTC6811.c **** 	cmd[3] = PEC_return & 0xFF;
 874              		.loc 1 156 9 is_stmt 0 view .LVU316
 875 00cc 030A     		lsrs	r3, r0, #8
ARM GAS  /tmp/cccH07eq.s 			page 27


 876 00ce 8DF80E30 		strb	r3, [sp, #14]
 157:Src/LTC6811.c **** 	
 877              		.loc 1 157 2 is_stmt 1 view .LVU317
 157:Src/LTC6811.c **** 	
 878              		.loc 1 157 9 is_stmt 0 view .LVU318
 879 00d2 8DF80F00 		strb	r0, [sp, #15]
 159:Src/LTC6811.c **** 	cmd[5] = 0;
 880              		.loc 1 159 2 is_stmt 1 view .LVU319
 159:Src/LTC6811.c **** 	cmd[5] = 0;
 881              		.loc 1 159 9 is_stmt 0 view .LVU320
 882 00d6 8DF81040 		strb	r4, [sp, #16]
 160:Src/LTC6811.c **** 	cmd[6] = 0;
 883              		.loc 1 160 2 is_stmt 1 view .LVU321
 160:Src/LTC6811.c **** 	cmd[6] = 0;
 884              		.loc 1 160 9 is_stmt 0 view .LVU322
 885 00da 8DF81140 		strb	r4, [sp, #17]
 161:Src/LTC6811.c **** 	cmd[7] = 0;
 886              		.loc 1 161 2 is_stmt 1 view .LVU323
 161:Src/LTC6811.c **** 	cmd[7] = 0;
 887              		.loc 1 161 9 is_stmt 0 view .LVU324
 888 00de 8DF81240 		strb	r4, [sp, #18]
 162:Src/LTC6811.c **** 	cmd[8] = 0;
 889              		.loc 1 162 2 is_stmt 1 view .LVU325
 162:Src/LTC6811.c **** 	cmd[8] = 0;
 890              		.loc 1 162 9 is_stmt 0 view .LVU326
 891 00e2 8DF81340 		strb	r4, [sp, #19]
 163:Src/LTC6811.c **** 	cmd[9] = 0;
 892              		.loc 1 163 2 is_stmt 1 view .LVU327
 163:Src/LTC6811.c **** 	cmd[9] = 0;
 893              		.loc 1 163 9 is_stmt 0 view .LVU328
 894 00e6 8DF81440 		strb	r4, [sp, #20]
 164:Src/LTC6811.c **** 	cmd[10] = 0;
 895              		.loc 1 164 2 is_stmt 1 view .LVU329
 164:Src/LTC6811.c **** 	cmd[10] = 0;
 896              		.loc 1 164 9 is_stmt 0 view .LVU330
 897 00ea 8DF81540 		strb	r4, [sp, #21]
 165:Src/LTC6811.c **** 	cmd[11] = 0;
 898              		.loc 1 165 2 is_stmt 1 view .LVU331
 165:Src/LTC6811.c **** 	cmd[11] = 0;
 899              		.loc 1 165 10 is_stmt 0 view .LVU332
 900 00ee 8DF81640 		strb	r4, [sp, #22]
 166:Src/LTC6811.c **** 	
 901              		.loc 1 166 2 is_stmt 1 view .LVU333
 166:Src/LTC6811.c **** 	
 902              		.loc 1 166 10 is_stmt 0 view .LVU334
 903 00f2 8DF81740 		strb	r4, [sp, #23]
 168:Src/LTC6811.c **** 	
 904              		.loc 1 168 2 is_stmt 1 view .LVU335
 905 00f6 0C22     		movs	r2, #12
 906 00f8 6946     		mov	r1, sp
 907 00fa 0DEB0200 		add	r0, sp, r2
 908              	.LVL65:
 168:Src/LTC6811.c **** 	
 909              		.loc 1 168 2 is_stmt 0 view .LVU336
 910 00fe FFF7FEFF 		bl	SPIWriteRead
 911              	.LVL66:
 171:Src/LTC6811.c **** 	PEC_send[1] = rx_data[5]; // cell 4 voltage high bytes
ARM GAS  /tmp/cccH07eq.s 			page 28


 912              		.loc 1 171 2 is_stmt 1 view .LVU337
 172:Src/LTC6811.c **** 	PEC_send[2] = rx_data[6]; // cell 5 voltage low bytes
 913              		.loc 1 172 2 view .LVU338
 172:Src/LTC6811.c **** 	PEC_send[2] = rx_data[6]; // cell 5 voltage low bytes
 914              		.loc 1 172 23 is_stmt 0 view .LVU339
 915 0102 9DF80530 		ldrb	r3, [sp, #5]	@ zero_extendqisi2
 173:Src/LTC6811.c **** 	PEC_send[3] = rx_data[7]; // cell 5 voltage high bytes
 916              		.loc 1 173 2 is_stmt 1 view .LVU340
 173:Src/LTC6811.c **** 	PEC_send[3] = rx_data[7]; // cell 5 voltage high bytes
 917              		.loc 1 173 23 is_stmt 0 view .LVU341
 918 0106 9DF80620 		ldrb	r2, [sp, #6]	@ zero_extendqisi2
 173:Src/LTC6811.c **** 	PEC_send[3] = rx_data[7]; // cell 5 voltage high bytes
 919              		.loc 1 173 14 view .LVU342
 920 010a AA70     		strb	r2, [r5, #2]
 174:Src/LTC6811.c **** 	PEC_send[4] = rx_data[8]; // cell 6 voltage low bytes
 921              		.loc 1 174 2 is_stmt 1 view .LVU343
 174:Src/LTC6811.c **** 	PEC_send[4] = rx_data[8]; // cell 6 voltage low bytes
 922              		.loc 1 174 23 is_stmt 0 view .LVU344
 923 010c 9DF80720 		ldrb	r2, [sp, #7]	@ zero_extendqisi2
 174:Src/LTC6811.c **** 	PEC_send[4] = rx_data[8]; // cell 6 voltage low bytes
 924              		.loc 1 174 14 view .LVU345
 925 0110 EA70     		strb	r2, [r5, #3]
 175:Src/LTC6811.c **** 	PEC_send[5] = rx_data[9]; // cell 6 voltage high bytes
 926              		.loc 1 175 2 is_stmt 1 view .LVU346
 175:Src/LTC6811.c **** 	PEC_send[5] = rx_data[9]; // cell 6 voltage high bytes
 927              		.loc 1 175 23 is_stmt 0 view .LVU347
 928 0112 9DF80820 		ldrb	r2, [sp, #8]	@ zero_extendqisi2
 175:Src/LTC6811.c **** 	PEC_send[5] = rx_data[9]; // cell 6 voltage high bytes
 929              		.loc 1 175 14 view .LVU348
 930 0116 2A71     		strb	r2, [r5, #4]
 176:Src/LTC6811.c **** 	
 931              		.loc 1 176 2 is_stmt 1 view .LVU349
 176:Src/LTC6811.c **** 	
 932              		.loc 1 176 23 is_stmt 0 view .LVU350
 933 0118 9DF80920 		ldrb	r2, [sp, #9]	@ zero_extendqisi2
 176:Src/LTC6811.c **** 	
 934              		.loc 1 176 14 view .LVU351
 935 011c 6A71     		strb	r2, [r5, #5]
 178:Src/LTC6811.c **** 	
 936              		.loc 1 178 2 is_stmt 1 view .LVU352
 186:Src/LTC6811.c **** 		cellVoltage[3] = (uint16_t) ((rx_data[5] << 8) & 0xFF00) | (rx_data[4] & 0x00FF); // cell 4 volta
 937              		.loc 1 186 2 view .LVU353
 187:Src/LTC6811.c **** 	}
 938              		.loc 1 187 3 view .LVU354
 187:Src/LTC6811.c **** 	}
 939              		.loc 1 187 44 is_stmt 0 view .LVU355
 940 011e 1B02     		lsls	r3, r3, #8
 187:Src/LTC6811.c **** 	}
 941              		.loc 1 187 20 view .LVU356
 942 0120 1BB2     		sxth	r3, r3
 187:Src/LTC6811.c **** 	}
 943              		.loc 1 187 70 view .LVU357
 944 0122 9DF80420 		ldrb	r2, [sp, #4]	@ zero_extendqisi2
 187:Src/LTC6811.c **** 	}
 945              		.loc 1 187 60 view .LVU358
 946 0126 1343     		orrs	r3, r3, r2
 187:Src/LTC6811.c **** 	}
ARM GAS  /tmp/cccH07eq.s 			page 29


 947              		.loc 1 187 18 view .LVU359
 948 0128 FB80     		strh	r3, [r7, #6]	@ movhi
 191:Src/LTC6811.c **** 	PEC_send[1] = (uint8_t) (ReadCellVoltageRegisterGroup7to9 & 0xFF);
 949              		.loc 1 191 2 is_stmt 1 view .LVU360
 191:Src/LTC6811.c **** 	PEC_send[1] = (uint8_t) (ReadCellVoltageRegisterGroup7to9 & 0xFF);
 950              		.loc 1 191 14 is_stmt 0 view .LVU361
 951 012a 2E70     		strb	r6, [r5]
 192:Src/LTC6811.c **** 
 952              		.loc 1 192 2 is_stmt 1 view .LVU362
 192:Src/LTC6811.c **** 
 953              		.loc 1 192 14 is_stmt 0 view .LVU363
 954 012c 0823     		movs	r3, #8
 955 012e 6B70     		strb	r3, [r5, #1]
 194:Src/LTC6811.c **** 	cmd[1] = PEC_send[1];
 956              		.loc 1 194 2 is_stmt 1 view .LVU364
 194:Src/LTC6811.c **** 	cmd[1] = PEC_send[1];
 957              		.loc 1 194 9 is_stmt 0 view .LVU365
 958 0130 8DF80C60 		strb	r6, [sp, #12]
 195:Src/LTC6811.c **** 	
 959              		.loc 1 195 2 is_stmt 1 view .LVU366
 195:Src/LTC6811.c **** 	
 960              		.loc 1 195 9 is_stmt 0 view .LVU367
 961 0134 8DF80D30 		strb	r3, [sp, #13]
 197:Src/LTC6811.c **** 	
 962              		.loc 1 197 2 is_stmt 1 view .LVU368
 197:Src/LTC6811.c **** 	
 963              		.loc 1 197 15 is_stmt 0 view .LVU369
 964 0138 2946     		mov	r1, r5
 965 013a 0220     		movs	r0, #2
 966 013c FFF7FEFF 		bl	calculatePEC
 967              	.LVL67:
 199:Src/LTC6811.c **** 	cmd[3] = PEC_return & 0xFF;
 968              		.loc 1 199 2 is_stmt 1 view .LVU370
 199:Src/LTC6811.c **** 	cmd[3] = PEC_return & 0xFF;
 969              		.loc 1 199 9 is_stmt 0 view .LVU371
 970 0140 030A     		lsrs	r3, r0, #8
 971 0142 8DF80E30 		strb	r3, [sp, #14]
 200:Src/LTC6811.c **** 	
 972              		.loc 1 200 2 is_stmt 1 view .LVU372
 200:Src/LTC6811.c **** 	
 973              		.loc 1 200 9 is_stmt 0 view .LVU373
 974 0146 8DF80F00 		strb	r0, [sp, #15]
 202:Src/LTC6811.c **** 	cmd[5] = 0;
 975              		.loc 1 202 2 is_stmt 1 view .LVU374
 202:Src/LTC6811.c **** 	cmd[5] = 0;
 976              		.loc 1 202 9 is_stmt 0 view .LVU375
 977 014a 8DF81040 		strb	r4, [sp, #16]
 203:Src/LTC6811.c **** 	cmd[6] = 0;
 978              		.loc 1 203 2 is_stmt 1 view .LVU376
 203:Src/LTC6811.c **** 	cmd[6] = 0;
 979              		.loc 1 203 9 is_stmt 0 view .LVU377
 980 014e 8DF81140 		strb	r4, [sp, #17]
 204:Src/LTC6811.c **** 	cmd[7] = 0;
 981              		.loc 1 204 2 is_stmt 1 view .LVU378
 204:Src/LTC6811.c **** 	cmd[7] = 0;
 982              		.loc 1 204 9 is_stmt 0 view .LVU379
 983 0152 8DF81240 		strb	r4, [sp, #18]
ARM GAS  /tmp/cccH07eq.s 			page 30


 205:Src/LTC6811.c **** 	cmd[8] = 0;
 984              		.loc 1 205 2 is_stmt 1 view .LVU380
 205:Src/LTC6811.c **** 	cmd[8] = 0;
 985              		.loc 1 205 9 is_stmt 0 view .LVU381
 986 0156 8DF81340 		strb	r4, [sp, #19]
 206:Src/LTC6811.c **** 	cmd[9] = 0;
 987              		.loc 1 206 2 is_stmt 1 view .LVU382
 206:Src/LTC6811.c **** 	cmd[9] = 0;
 988              		.loc 1 206 9 is_stmt 0 view .LVU383
 989 015a 8DF81440 		strb	r4, [sp, #20]
 207:Src/LTC6811.c **** 	cmd[10] = 0;
 990              		.loc 1 207 2 is_stmt 1 view .LVU384
 207:Src/LTC6811.c **** 	cmd[10] = 0;
 991              		.loc 1 207 9 is_stmt 0 view .LVU385
 992 015e 8DF81540 		strb	r4, [sp, #21]
 208:Src/LTC6811.c **** 	cmd[11] = 0;
 993              		.loc 1 208 2 is_stmt 1 view .LVU386
 208:Src/LTC6811.c **** 	cmd[11] = 0;
 994              		.loc 1 208 10 is_stmt 0 view .LVU387
 995 0162 8DF81640 		strb	r4, [sp, #22]
 209:Src/LTC6811.c **** 	
 996              		.loc 1 209 2 is_stmt 1 view .LVU388
 209:Src/LTC6811.c **** 	
 997              		.loc 1 209 10 is_stmt 0 view .LVU389
 998 0166 8DF81740 		strb	r4, [sp, #23]
 211:Src/LTC6811.c **** 	
 999              		.loc 1 211 2 is_stmt 1 view .LVU390
 1000 016a 0C22     		movs	r2, #12
 1001 016c 6946     		mov	r1, sp
 1002 016e 0DEB0200 		add	r0, sp, r2
 1003              	.LVL68:
 211:Src/LTC6811.c **** 	
 1004              		.loc 1 211 2 is_stmt 0 view .LVU391
 1005 0172 FFF7FEFF 		bl	SPIWriteRead
 1006              	.LVL69:
 214:Src/LTC6811.c **** 	PEC_send[1] = rx_data[5]; // cell 7 voltage high bytes
 1007              		.loc 1 214 2 is_stmt 1 view .LVU392
 215:Src/LTC6811.c **** 	PEC_send[2] = rx_data[6]; // cell 8 voltage low bytes
 1008              		.loc 1 215 2 view .LVU393
 215:Src/LTC6811.c **** 	PEC_send[2] = rx_data[6]; // cell 8 voltage low bytes
 1009              		.loc 1 215 23 is_stmt 0 view .LVU394
 1010 0176 9DF80530 		ldrb	r3, [sp, #5]	@ zero_extendqisi2
 216:Src/LTC6811.c **** 	PEC_send[3] = rx_data[7]; // cell 8 voltage high bytes
 1011              		.loc 1 216 2 is_stmt 1 view .LVU395
 216:Src/LTC6811.c **** 	PEC_send[3] = rx_data[7]; // cell 8 voltage high bytes
 1012              		.loc 1 216 23 is_stmt 0 view .LVU396
 1013 017a 9DF806C0 		ldrb	ip, [sp, #6]	@ zero_extendqisi2
 216:Src/LTC6811.c **** 	PEC_send[3] = rx_data[7]; // cell 8 voltage high bytes
 1014              		.loc 1 216 14 view .LVU397
 1015 017e 85F802C0 		strb	ip, [r5, #2]
 217:Src/LTC6811.c **** 	PEC_send[4] = rx_data[8]; // cell 9 voltage low bytes
 1016              		.loc 1 217 2 is_stmt 1 view .LVU398
 217:Src/LTC6811.c **** 	PEC_send[4] = rx_data[8]; // cell 9 voltage low bytes
 1017              		.loc 1 217 23 is_stmt 0 view .LVU399
 1018 0182 9DF80710 		ldrb	r1, [sp, #7]	@ zero_extendqisi2
 217:Src/LTC6811.c **** 	PEC_send[4] = rx_data[8]; // cell 9 voltage low bytes
 1019              		.loc 1 217 14 view .LVU400
ARM GAS  /tmp/cccH07eq.s 			page 31


 1020 0186 E970     		strb	r1, [r5, #3]
 218:Src/LTC6811.c **** 	PEC_send[5] = rx_data[9]; // cell 9 voltage high bytes
 1021              		.loc 1 218 2 is_stmt 1 view .LVU401
 218:Src/LTC6811.c **** 	PEC_send[5] = rx_data[9]; // cell 9 voltage high bytes
 1022              		.loc 1 218 23 is_stmt 0 view .LVU402
 1023 0188 9DF80800 		ldrb	r0, [sp, #8]	@ zero_extendqisi2
 218:Src/LTC6811.c **** 	PEC_send[5] = rx_data[9]; // cell 9 voltage high bytes
 1024              		.loc 1 218 14 view .LVU403
 1025 018c 2871     		strb	r0, [r5, #4]
 219:Src/LTC6811.c **** 	
 1026              		.loc 1 219 2 is_stmt 1 view .LVU404
 219:Src/LTC6811.c **** 	
 1027              		.loc 1 219 23 is_stmt 0 view .LVU405
 1028 018e 9DF80920 		ldrb	r2, [sp, #9]	@ zero_extendqisi2
 219:Src/LTC6811.c **** 	
 1029              		.loc 1 219 14 view .LVU406
 1030 0192 6A71     		strb	r2, [r5, #5]
 221:Src/LTC6811.c **** 	
 1031              		.loc 1 221 2 is_stmt 1 view .LVU407
 229:Src/LTC6811.c **** 		cellVoltage[4] = (uint16_t) ((rx_data[5] << 8) & 0xFF00) | (rx_data[4] & 0x00FF); // cell 7 volta
 1032              		.loc 1 229 2 view .LVU408
 230:Src/LTC6811.c **** 		cellVoltage[5] = (uint16_t) ((rx_data[7] << 8) & 0xFF00) | (rx_data[6] & 0x00FF); // cell 8 volta
 1033              		.loc 1 230 3 view .LVU409
 230:Src/LTC6811.c **** 		cellVoltage[5] = (uint16_t) ((rx_data[7] << 8) & 0xFF00) | (rx_data[6] & 0x00FF); // cell 8 volta
 1034              		.loc 1 230 44 is_stmt 0 view .LVU410
 1035 0194 1B02     		lsls	r3, r3, #8
 230:Src/LTC6811.c **** 		cellVoltage[5] = (uint16_t) ((rx_data[7] << 8) & 0xFF00) | (rx_data[6] & 0x00FF); // cell 8 volta
 1036              		.loc 1 230 20 view .LVU411
 1037 0196 1BB2     		sxth	r3, r3
 230:Src/LTC6811.c **** 		cellVoltage[5] = (uint16_t) ((rx_data[7] << 8) & 0xFF00) | (rx_data[6] & 0x00FF); // cell 8 volta
 1038              		.loc 1 230 70 view .LVU412
 1039 0198 9DF804E0 		ldrb	lr, [sp, #4]	@ zero_extendqisi2
 230:Src/LTC6811.c **** 		cellVoltage[5] = (uint16_t) ((rx_data[7] << 8) & 0xFF00) | (rx_data[6] & 0x00FF); // cell 8 volta
 1040              		.loc 1 230 60 view .LVU413
 1041 019c 43EA0E03 		orr	r3, r3, lr
 230:Src/LTC6811.c **** 		cellVoltage[5] = (uint16_t) ((rx_data[7] << 8) & 0xFF00) | (rx_data[6] & 0x00FF); // cell 8 volta
 1042              		.loc 1 230 18 view .LVU414
 1043 01a0 3B81     		strh	r3, [r7, #8]	@ movhi
 231:Src/LTC6811.c **** 		cellVoltage[6] = (uint16_t) ((rx_data[9] << 8) & 0xFF00) | (rx_data[8] & 0x00FF); // cell 9 volta
 1044              		.loc 1 231 3 is_stmt 1 view .LVU415
 231:Src/LTC6811.c **** 		cellVoltage[6] = (uint16_t) ((rx_data[9] << 8) & 0xFF00) | (rx_data[8] & 0x00FF); // cell 9 volta
 1045              		.loc 1 231 44 is_stmt 0 view .LVU416
 1046 01a2 0902     		lsls	r1, r1, #8
 231:Src/LTC6811.c **** 		cellVoltage[6] = (uint16_t) ((rx_data[9] << 8) & 0xFF00) | (rx_data[8] & 0x00FF); // cell 9 volta
 1047              		.loc 1 231 20 view .LVU417
 1048 01a4 09B2     		sxth	r1, r1
 231:Src/LTC6811.c **** 		cellVoltage[6] = (uint16_t) ((rx_data[9] << 8) & 0xFF00) | (rx_data[8] & 0x00FF); // cell 9 volta
 1049              		.loc 1 231 60 view .LVU418
 1050 01a6 4CEA0101 		orr	r1, ip, r1
 231:Src/LTC6811.c **** 		cellVoltage[6] = (uint16_t) ((rx_data[9] << 8) & 0xFF00) | (rx_data[8] & 0x00FF); // cell 9 volta
 1051              		.loc 1 231 18 view .LVU419
 1052 01aa 7981     		strh	r1, [r7, #10]	@ movhi
 232:Src/LTC6811.c **** 	}
 1053              		.loc 1 232 3 is_stmt 1 view .LVU420
 232:Src/LTC6811.c **** 	}
 1054              		.loc 1 232 44 is_stmt 0 view .LVU421
 1055 01ac 1202     		lsls	r2, r2, #8
ARM GAS  /tmp/cccH07eq.s 			page 32


 232:Src/LTC6811.c **** 	}
 1056              		.loc 1 232 20 view .LVU422
 1057 01ae 12B2     		sxth	r2, r2
 232:Src/LTC6811.c **** 	}
 1058              		.loc 1 232 60 view .LVU423
 1059 01b0 0243     		orrs	r2, r2, r0
 232:Src/LTC6811.c **** 	}
 1060              		.loc 1 232 18 view .LVU424
 1061 01b2 BA81     		strh	r2, [r7, #12]	@ movhi
 236:Src/LTC6811.c **** 	PEC_send[1] = (uint8_t) (ReadCellVoltageRegisterGroup10to12 & 0xFF);
 1062              		.loc 1 236 2 is_stmt 1 view .LVU425
 236:Src/LTC6811.c **** 	PEC_send[1] = (uint8_t) (ReadCellVoltageRegisterGroup10to12 & 0xFF);
 1063              		.loc 1 236 14 is_stmt 0 view .LVU426
 1064 01b4 2E70     		strb	r6, [r5]
 237:Src/LTC6811.c **** 
 1065              		.loc 1 237 2 is_stmt 1 view .LVU427
 237:Src/LTC6811.c **** 
 1066              		.loc 1 237 14 is_stmt 0 view .LVU428
 1067 01b6 0A23     		movs	r3, #10
 1068 01b8 6B70     		strb	r3, [r5, #1]
 239:Src/LTC6811.c **** 	cmd[1] = PEC_send[1];
 1069              		.loc 1 239 2 is_stmt 1 view .LVU429
 239:Src/LTC6811.c **** 	cmd[1] = PEC_send[1];
 1070              		.loc 1 239 9 is_stmt 0 view .LVU430
 1071 01ba 8DF80C60 		strb	r6, [sp, #12]
 240:Src/LTC6811.c **** 	
 1072              		.loc 1 240 2 is_stmt 1 view .LVU431
 240:Src/LTC6811.c **** 	
 1073              		.loc 1 240 9 is_stmt 0 view .LVU432
 1074 01be 8DF80D30 		strb	r3, [sp, #13]
 242:Src/LTC6811.c **** 	
 1075              		.loc 1 242 2 is_stmt 1 view .LVU433
 242:Src/LTC6811.c **** 	
 1076              		.loc 1 242 15 is_stmt 0 view .LVU434
 1077 01c2 2946     		mov	r1, r5
 1078 01c4 0220     		movs	r0, #2
 1079 01c6 FFF7FEFF 		bl	calculatePEC
 1080              	.LVL70:
 244:Src/LTC6811.c **** 	cmd[3] = PEC_return & 0xFF;
 1081              		.loc 1 244 2 is_stmt 1 view .LVU435
 244:Src/LTC6811.c **** 	cmd[3] = PEC_return & 0xFF;
 1082              		.loc 1 244 9 is_stmt 0 view .LVU436
 1083 01ca 030A     		lsrs	r3, r0, #8
 1084 01cc 8DF80E30 		strb	r3, [sp, #14]
 245:Src/LTC6811.c **** 	
 1085              		.loc 1 245 2 is_stmt 1 view .LVU437
 245:Src/LTC6811.c **** 	
 1086              		.loc 1 245 9 is_stmt 0 view .LVU438
 1087 01d0 8DF80F00 		strb	r0, [sp, #15]
 247:Src/LTC6811.c **** 	cmd[5] = 0;
 1088              		.loc 1 247 2 is_stmt 1 view .LVU439
 247:Src/LTC6811.c **** 	cmd[5] = 0;
 1089              		.loc 1 247 9 is_stmt 0 view .LVU440
 1090 01d4 8DF81040 		strb	r4, [sp, #16]
 248:Src/LTC6811.c **** 	cmd[6] = 0;
 1091              		.loc 1 248 2 is_stmt 1 view .LVU441
 248:Src/LTC6811.c **** 	cmd[6] = 0;
ARM GAS  /tmp/cccH07eq.s 			page 33


 1092              		.loc 1 248 9 is_stmt 0 view .LVU442
 1093 01d8 8DF81140 		strb	r4, [sp, #17]
 249:Src/LTC6811.c **** 	cmd[7] = 0;
 1094              		.loc 1 249 2 is_stmt 1 view .LVU443
 249:Src/LTC6811.c **** 	cmd[7] = 0;
 1095              		.loc 1 249 9 is_stmt 0 view .LVU444
 1096 01dc 8DF81240 		strb	r4, [sp, #18]
 250:Src/LTC6811.c **** 	cmd[8] = 0;
 1097              		.loc 1 250 2 is_stmt 1 view .LVU445
 250:Src/LTC6811.c **** 	cmd[8] = 0;
 1098              		.loc 1 250 9 is_stmt 0 view .LVU446
 1099 01e0 8DF81340 		strb	r4, [sp, #19]
 251:Src/LTC6811.c **** 	cmd[9] = 0;
 1100              		.loc 1 251 2 is_stmt 1 view .LVU447
 251:Src/LTC6811.c **** 	cmd[9] = 0;
 1101              		.loc 1 251 9 is_stmt 0 view .LVU448
 1102 01e4 8DF81440 		strb	r4, [sp, #20]
 252:Src/LTC6811.c **** 	cmd[10] = 0;
 1103              		.loc 1 252 2 is_stmt 1 view .LVU449
 252:Src/LTC6811.c **** 	cmd[10] = 0;
 1104              		.loc 1 252 9 is_stmt 0 view .LVU450
 1105 01e8 8DF81540 		strb	r4, [sp, #21]
 253:Src/LTC6811.c **** 	cmd[11] = 0;
 1106              		.loc 1 253 2 is_stmt 1 view .LVU451
 253:Src/LTC6811.c **** 	cmd[11] = 0;
 1107              		.loc 1 253 10 is_stmt 0 view .LVU452
 1108 01ec 8DF81640 		strb	r4, [sp, #22]
 254:Src/LTC6811.c **** 	
 1109              		.loc 1 254 2 is_stmt 1 view .LVU453
 254:Src/LTC6811.c **** 	
 1110              		.loc 1 254 10 is_stmt 0 view .LVU454
 1111 01f0 8DF81740 		strb	r4, [sp, #23]
 256:Src/LTC6811.c **** 	
 1112              		.loc 1 256 2 is_stmt 1 view .LVU455
 1113 01f4 0C22     		movs	r2, #12
 1114 01f6 6946     		mov	r1, sp
 1115 01f8 0DEB0200 		add	r0, sp, r2
 1116              	.LVL71:
 256:Src/LTC6811.c **** 	
 1117              		.loc 1 256 2 is_stmt 0 view .LVU456
 1118 01fc FFF7FEFF 		bl	SPIWriteRead
 1119              	.LVL72:
 259:Src/LTC6811.c **** 	PEC_send[1] = rx_data[5]; // cell 10 voltage high bytes
 1120              		.loc 1 259 2 is_stmt 1 view .LVU457
 259:Src/LTC6811.c **** 	PEC_send[1] = rx_data[5]; // cell 10 voltage high bytes
 1121              		.loc 1 259 23 is_stmt 0 view .LVU458
 1122 0200 9DF80420 		ldrb	r2, [sp, #4]	@ zero_extendqisi2
 259:Src/LTC6811.c **** 	PEC_send[1] = rx_data[5]; // cell 10 voltage high bytes
 1123              		.loc 1 259 14 view .LVU459
 1124 0204 2A70     		strb	r2, [r5]
 260:Src/LTC6811.c **** 	PEC_send[2] = rx_data[6]; // cell 11 voltage low bytes
 1125              		.loc 1 260 2 is_stmt 1 view .LVU460
 260:Src/LTC6811.c **** 	PEC_send[2] = rx_data[6]; // cell 11 voltage low bytes
 1126              		.loc 1 260 23 is_stmt 0 view .LVU461
 1127 0206 9DF80530 		ldrb	r3, [sp, #5]	@ zero_extendqisi2
 260:Src/LTC6811.c **** 	PEC_send[2] = rx_data[6]; // cell 11 voltage low bytes
 1128              		.loc 1 260 14 view .LVU462
ARM GAS  /tmp/cccH07eq.s 			page 34


 1129 020a 6B70     		strb	r3, [r5, #1]
 261:Src/LTC6811.c **** 	PEC_send[3] = rx_data[7]; // cell 11 voltage high bytes
 1130              		.loc 1 261 2 is_stmt 1 view .LVU463
 261:Src/LTC6811.c **** 	PEC_send[3] = rx_data[7]; // cell 11 voltage high bytes
 1131              		.loc 1 261 23 is_stmt 0 view .LVU464
 1132 020c 9DF80610 		ldrb	r1, [sp, #6]	@ zero_extendqisi2
 261:Src/LTC6811.c **** 	PEC_send[3] = rx_data[7]; // cell 11 voltage high bytes
 1133              		.loc 1 261 14 view .LVU465
 1134 0210 A970     		strb	r1, [r5, #2]
 262:Src/LTC6811.c **** 	PEC_send[4] = rx_data[8]; // cell 12 voltage low bytes
 1135              		.loc 1 262 2 is_stmt 1 view .LVU466
 262:Src/LTC6811.c **** 	PEC_send[4] = rx_data[8]; // cell 12 voltage low bytes
 1136              		.loc 1 262 23 is_stmt 0 view .LVU467
 1137 0212 9DF80710 		ldrb	r1, [sp, #7]	@ zero_extendqisi2
 262:Src/LTC6811.c **** 	PEC_send[4] = rx_data[8]; // cell 12 voltage low bytes
 1138              		.loc 1 262 14 view .LVU468
 1139 0216 E970     		strb	r1, [r5, #3]
 263:Src/LTC6811.c **** 	PEC_send[5] = rx_data[9]; // cell 12 voltage high bytes
 1140              		.loc 1 263 2 is_stmt 1 view .LVU469
 263:Src/LTC6811.c **** 	PEC_send[5] = rx_data[9]; // cell 12 voltage high bytes
 1141              		.loc 1 263 23 is_stmt 0 view .LVU470
 1142 0218 9DF80810 		ldrb	r1, [sp, #8]	@ zero_extendqisi2
 263:Src/LTC6811.c **** 	PEC_send[5] = rx_data[9]; // cell 12 voltage high bytes
 1143              		.loc 1 263 14 view .LVU471
 1144 021c 2971     		strb	r1, [r5, #4]
 264:Src/LTC6811.c **** 	
 1145              		.loc 1 264 2 is_stmt 1 view .LVU472
 264:Src/LTC6811.c **** 	
 1146              		.loc 1 264 23 is_stmt 0 view .LVU473
 1147 021e 9DF80910 		ldrb	r1, [sp, #9]	@ zero_extendqisi2
 264:Src/LTC6811.c **** 	
 1148              		.loc 1 264 14 view .LVU474
 1149 0222 6971     		strb	r1, [r5, #5]
 266:Src/LTC6811.c **** 	
 1150              		.loc 1 266 2 is_stmt 1 view .LVU475
 274:Src/LTC6811.c **** 		cellVoltage[7] = (uint16_t) ((rx_data[5] << 8) & 0xFF00) | (rx_data[4] & 0x00FF); // cell 7 volta
 1151              		.loc 1 274 2 view .LVU476
 275:Src/LTC6811.c **** 	}
 1152              		.loc 1 275 3 view .LVU477
 275:Src/LTC6811.c **** 	}
 1153              		.loc 1 275 44 is_stmt 0 view .LVU478
 1154 0224 1B02     		lsls	r3, r3, #8
 275:Src/LTC6811.c **** 	}
 1155              		.loc 1 275 20 view .LVU479
 1156 0226 1BB2     		sxth	r3, r3
 275:Src/LTC6811.c **** 	}
 1157              		.loc 1 275 60 view .LVU480
 1158 0228 1343     		orrs	r3, r3, r2
 275:Src/LTC6811.c **** 	}
 1159              		.loc 1 275 18 view .LVU481
 1160 022a FB81     		strh	r3, [r7, #14]	@ movhi
 278:Src/LTC6811.c **** 	
 1161              		.loc 1 278 2 is_stmt 1 view .LVU482
 1162 022c 2846     		mov	r0, r5
 1163 022e FFF7FEFF 		bl	free
 1164              	.LVL73:
 280:Src/LTC6811.c **** 	
ARM GAS  /tmp/cccH07eq.s 			page 35


 1165              		.loc 1 280 2 view .LVU483
 282:Src/LTC6811.c **** 
 1166              		.loc 1 282 1 is_stmt 0 view .LVU484
 1167 0232 0120     		movs	r0, #1
 1168 0234 07B0     		add	sp, sp, #28
 1169              	.LCFI16:
 1170              		.cfi_def_cfa_offset 20
 1171              		@ sp needed
 1172 0236 F0BD     		pop	{r4, r5, r6, r7, pc}
 282:Src/LTC6811.c **** 
 1173              		.loc 1 282 1 view .LVU485
 1174              		.cfi_endproc
 1175              	.LFE132:
 1177              		.global	CRC15_POLY
 1178              		.comm	pec15Table,512,4
 1179              		.section	.data.CRC15_POLY,"aw"
 1180              		.align	1
 1181              		.set	.LANCHOR0,. + 0
 1184              	CRC15_POLY:
 1185 0000 9945     		.short	17817
 1186              		.text
 1187              	.Letext0:
 1188              		.file 2 "/mnt/c/Users/evanc/Documents/IFE/gcc-arm-none-eabi-8-2018-q4-major/arm-none-eabi/include/
 1189              		.file 3 "/mnt/c/Users/evanc/Documents/IFE/gcc-arm-none-eabi-8-2018-q4-major/arm-none-eabi/include/
 1190              		.file 4 "Drivers/CMSIS/Include/core_cm4.h"
 1191              		.file 5 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
 1192              		.file 6 "/mnt/c/Users/evanc/Documents/IFE/gcc-arm-none-eabi-8-2018-q4-major/arm-none-eabi/include/
 1193              		.file 7 "/mnt/c/Users/evanc/Documents/IFE/gcc-arm-none-eabi-8-2018-q4-major/arm-none-eabi/include/
 1194              		.file 8 "/mnt/c/Users/evanc/Documents/IFE/gcc-arm-none-eabi-8-2018-q4-major/lib/gcc/arm-none-eabi/
 1195              		.file 9 "/mnt/c/Users/evanc/Documents/IFE/gcc-arm-none-eabi-8-2018-q4-major/arm-none-eabi/include/
 1196              		.file 10 "/mnt/c/Users/evanc/Documents/IFE/gcc-arm-none-eabi-8-2018-q4-major/arm-none-eabi/include
 1197              		.file 11 "Inc/BMSconfig.h"
 1198              		.file 12 "Inc/LTC6811.h"
 1199              		.file 13 "Inc/SPI.h"
 1200              		.file 14 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal.h"
ARM GAS  /tmp/cccH07eq.s 			page 36


DEFINED SYMBOLS
                            *ABS*:0000000000000000 LTC6811.c
     /tmp/cccH07eq.s:18     .text.initPECTable:0000000000000000 $t
     /tmp/cccH07eq.s:26     .text.initPECTable:0000000000000000 initPECTable
     /tmp/cccH07eq.s:120    .text.initPECTable:0000000000000038 $d
                            *COM*:0000000000000200 pec15Table
     /tmp/cccH07eq.s:126    .text.calculatePEC:0000000000000000 $t
     /tmp/cccH07eq.s:133    .text.calculatePEC:0000000000000000 calculatePEC
     /tmp/cccH07eq.s:209    .text.calculatePEC:000000000000002c $d
     /tmp/cccH07eq.s:214    .text.writeConfig:0000000000000000 $t
     /tmp/cccH07eq.s:221    .text.writeConfig:0000000000000000 writeConfig
     /tmp/cccH07eq.s:511    .text.sendBroadcastCommand:0000000000000000 $t
     /tmp/cccH07eq.s:518    .text.sendBroadcastCommand:0000000000000000 sendBroadcastCommand
     /tmp/cccH07eq.s:575    .text.sendAddressCommand:0000000000000000 $t
     /tmp/cccH07eq.s:582    .text.sendAddressCommand:0000000000000000 sendAddressCommand
     /tmp/cccH07eq.s:678    .text.readCellVoltage:0000000000000000 $t
     /tmp/cccH07eq.s:685    .text.readCellVoltage:0000000000000000 readCellVoltage
     /tmp/cccH07eq.s:1184   .data.CRC15_POLY:0000000000000000 CRC15_POLY
     /tmp/cccH07eq.s:1180   .data.CRC15_POLY:0000000000000000 $d

UNDEFINED SYMBOLS
malloc
SPIWrite
HAL_Delay
free
SPIWriteRead
