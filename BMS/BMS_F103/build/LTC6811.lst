ARM GAS  C:\cygwin64\tmp\ccp74qwu.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 1
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"LTC6811.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.initPECTable,"ax",%progbits
  16              		.align	1
  17              		.global	initPECTable
  18              		.arch armv7-m
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu softvfp
  24              	initPECTable:
  25              	.LFB66:
  26              		.file 1 "Src/LTC6811.c"
   1:Src/LTC6811.c **** #include "LTC6811.h"
   2:Src/LTC6811.c **** 
   3:Src/LTC6811.c **** //CommandCodeTypedef CommandCode;
   4:Src/LTC6811.c **** 
   5:Src/LTC6811.c **** uint16_t pec15Table[256];
   6:Src/LTC6811.c **** uint16_t CRC15_POLY = 0x4599;
   7:Src/LTC6811.c **** 
   8:Src/LTC6811.c **** void initPECTable(void) {
  27              		.loc 1 8 25 view -0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              		@ link register save eliminated.
   9:Src/LTC6811.c **** 	
  10:Src/LTC6811.c **** 	uint16_t remainder;
  32              		.loc 1 10 2 view .LVU1
  11:Src/LTC6811.c **** 	
  12:Src/LTC6811.c **** 	for (int i = 0; i < 256; i++) {
  33              		.loc 1 12 2 view .LVU2
  34              	.LBB2:
  35              		.loc 1 12 7 view .LVU3
  36              	.LVL0:
  37              		.loc 1 12 11 is_stmt 0 view .LVU4
  38 0000 0020     		movs	r0, #0
  39              		.loc 1 12 2 view .LVU5
  40 0002 11E0     		b	.L2
  41              	.LVL1:
  42              	.L4:
  43              	.LBB3:
  13:Src/LTC6811.c **** 		remainder = i << 7;
  14:Src/LTC6811.c **** 		for (int bit = 8; bit > 0; bit--) {
  15:Src/LTC6811.c **** 			if (remainder & 0x4000) {
ARM GAS  C:\cygwin64\tmp\ccp74qwu.s 			page 2


  16:Src/LTC6811.c **** 				remainder = ((remainder << 1));
  17:Src/LTC6811.c **** 				remainder = (remainder ^ CRC15_POLY);
  18:Src/LTC6811.c **** 			}
  19:Src/LTC6811.c **** 			else {
  20:Src/LTC6811.c **** 				remainder = ((remainder << 1));
  44              		.loc 1 20 5 is_stmt 1 view .LVU6
  45              		.loc 1 20 15 is_stmt 0 view .LVU7
  46 0004 5B00     		lsls	r3, r3, #1
  47              	.LVL2:
  48              		.loc 1 20 15 view .LVU8
  49 0006 9BB2     		uxth	r3, r3
  50              	.LVL3:
  51              	.L5:
  14:Src/LTC6811.c **** 			if (remainder & 0x4000) {
  52              		.loc 1 14 33 discriminator 2 view .LVU9
  53 0008 013A     		subs	r2, r2, #1
  54              	.LVL4:
  55              	.L3:
  14:Src/LTC6811.c **** 			if (remainder & 0x4000) {
  56              		.loc 1 14 3 discriminator 1 view .LVU10
  57 000a 002A     		cmp	r2, #0
  58 000c 08DD     		ble	.L8
  15:Src/LTC6811.c **** 				remainder = ((remainder << 1));
  59              		.loc 1 15 4 is_stmt 1 view .LVU11
  15:Src/LTC6811.c **** 				remainder = ((remainder << 1));
  60              		.loc 1 15 7 is_stmt 0 view .LVU12
  61 000e 13F4804F 		tst	r3, #16384
  62 0012 F7D0     		beq	.L4
  16:Src/LTC6811.c **** 				remainder = (remainder ^ CRC15_POLY);
  63              		.loc 1 16 5 is_stmt 1 view .LVU13
  16:Src/LTC6811.c **** 				remainder = (remainder ^ CRC15_POLY);
  64              		.loc 1 16 15 is_stmt 0 view .LVU14
  65 0014 5B00     		lsls	r3, r3, #1
  66              	.LVL5:
  16:Src/LTC6811.c **** 				remainder = (remainder ^ CRC15_POLY);
  67              		.loc 1 16 15 view .LVU15
  68 0016 9BB2     		uxth	r3, r3
  69              	.LVL6:
  17:Src/LTC6811.c **** 			}
  70              		.loc 1 17 5 is_stmt 1 view .LVU16
  17:Src/LTC6811.c **** 			}
  71              		.loc 1 17 15 is_stmt 0 view .LVU17
  72 0018 0749     		ldr	r1, .L10
  73 001a 0988     		ldrh	r1, [r1]
  74 001c 4B40     		eors	r3, r3, r1
  75              	.LVL7:
  17:Src/LTC6811.c **** 			}
  76              		.loc 1 17 15 view .LVU18
  77 001e F3E7     		b	.L5
  78              	.L8:
  17:Src/LTC6811.c **** 			}
  79              		.loc 1 17 15 view .LVU19
  80              	.LBE3:
  21:Src/LTC6811.c **** 			}
  22:Src/LTC6811.c **** 		}
  23:Src/LTC6811.c **** 		pec15Table[i] = remainder & 0xFFFF;
  81              		.loc 1 23 3 is_stmt 1 discriminator 2 view .LVU20
ARM GAS  C:\cygwin64\tmp\ccp74qwu.s 			page 3


  82              		.loc 1 23 17 is_stmt 0 discriminator 2 view .LVU21
  83 0020 064A     		ldr	r2, .L10+4
  84              	.LVL8:
  85              		.loc 1 23 17 discriminator 2 view .LVU22
  86 0022 22F81030 		strh	r3, [r2, r0, lsl #1]	@ movhi
  12:Src/LTC6811.c **** 		remainder = i << 7;
  87              		.loc 1 12 28 discriminator 2 view .LVU23
  88 0026 0130     		adds	r0, r0, #1
  89              	.LVL9:
  90              	.L2:
  12:Src/LTC6811.c **** 		remainder = i << 7;
  91              		.loc 1 12 2 discriminator 1 view .LVU24
  92 0028 FF28     		cmp	r0, #255
  93 002a 04DC     		bgt	.L9
  13:Src/LTC6811.c **** 		for (int bit = 8; bit > 0; bit--) {
  94              		.loc 1 13 3 is_stmt 1 view .LVU25
  13:Src/LTC6811.c **** 		for (int bit = 8; bit > 0; bit--) {
  95              		.loc 1 13 17 is_stmt 0 view .LVU26
  96 002c 83B2     		uxth	r3, r0
  13:Src/LTC6811.c **** 		for (int bit = 8; bit > 0; bit--) {
  97              		.loc 1 13 13 view .LVU27
  98 002e DB01     		lsls	r3, r3, #7
  99 0030 9BB2     		uxth	r3, r3
 100              	.LVL10:
  14:Src/LTC6811.c **** 			if (remainder & 0x4000) {
 101              		.loc 1 14 3 is_stmt 1 view .LVU28
 102              	.LBB4:
  14:Src/LTC6811.c **** 			if (remainder & 0x4000) {
 103              		.loc 1 14 8 view .LVU29
  14:Src/LTC6811.c **** 			if (remainder & 0x4000) {
 104              		.loc 1 14 12 is_stmt 0 view .LVU30
 105 0032 0822     		movs	r2, #8
  14:Src/LTC6811.c **** 			if (remainder & 0x4000) {
 106              		.loc 1 14 3 view .LVU31
 107 0034 E9E7     		b	.L3
 108              	.LVL11:
 109              	.L9:
  14:Src/LTC6811.c **** 			if (remainder & 0x4000) {
 110              		.loc 1 14 3 view .LVU32
 111              	.LBE4:
 112              	.LBE2:
  24:Src/LTC6811.c **** 	}
  25:Src/LTC6811.c **** };
 113              		.loc 1 25 1 view .LVU33
 114 0036 7047     		bx	lr
 115              	.L11:
 116              		.align	2
 117              	.L10:
 118 0038 00000000 		.word	.LANCHOR0
 119 003c 00000000 		.word	pec15Table
 120              		.cfi_endproc
 121              	.LFE66:
 123              		.section	.text.calculatePEC,"ax",%progbits
 124              		.align	1
 125              		.global	calculatePEC
 126              		.syntax unified
 127              		.thumb
ARM GAS  C:\cygwin64\tmp\ccp74qwu.s 			page 4


 128              		.thumb_func
 129              		.fpu softvfp
 131              	calculatePEC:
 132              	.LVL12:
 133              	.LFB71:
  26:Src/LTC6811.c ****  
  27:Src/LTC6811.c **** void writeConfig(BMSconfigStructTypedef cfg, uint8_t total_ic) {
  28:Src/LTC6811.c **** 	
  29:Src/LTC6811.c **** 	/*uint8_t TxBuffer[12] = {0x11, 0x22, 0x33, 0x44, 0x55, 0x66, 0x77, 0x88, 0x99, 0xAA, 0xBB, 0xCC};
  30:Src/LTC6811.c **** 	uint8_t RxBuffer[12];
  31:Src/LTC6811.c **** 	
  32:Src/LTC6811.c **** 	if (cfg.ADCModeOption == 0) HAL_GPIO_TogglePin(GPIOC, GPIO_PIN_13);
  33:Src/LTC6811.c **** 	
  34:Src/LTC6811.c **** 	if (SPIWriteRead(TxBuffer, RxBuffer, 12) == 1) HAL_GPIO_TogglePin(GPIOC, GPIO_PIN_13);*/
  35:Src/LTC6811.c **** 	
  36:Src/LTC6811.c **** 	uint8_t config[6];
  37:Src/LTC6811.c **** 	uint8_t *cmd;
  38:Src/LTC6811.c **** 	uint8_t cmd_len = 12;
  39:Src/LTC6811.c **** 	uint16_t PEC_return;
  40:Src/LTC6811.c **** 	
  41:Src/LTC6811.c **** 	cmd = (uint8_t *)malloc(cmd_len*sizeof(uint8_t));
  42:Src/LTC6811.c **** 	
  43:Src/LTC6811.c **** 	config[0] = (uint8_t) (cfg.GPIO5PulldownOff << 7) | (cfg.GPIO4PulldownOff << 6) | (cfg.GPIO3Pulldo
  44:Src/LTC6811.c **** 	config[1] = (uint8_t) (cfg.UndervoltageComparisonVoltage & 0xFF);
  45:Src/LTC6811.c **** 	config[2] = (uint8_t) ((cfg.OvervoltageComparisonVoltage << 4) & 0xF0) | ((cfg.UndervoltageCompari
  46:Src/LTC6811.c **** 	config[3] = (uint8_t) ((cfg.OvervoltageComparisonVoltage >> 4) & 0xFF);
  47:Src/LTC6811.c **** 	config[4] = (uint8_t) (cfg.DischargeCell8 << 7) | (cfg.DischargeCell7 << 6) | (cfg.DischargeCell6 
  48:Src/LTC6811.c **** 	config[5] = (uint8_t) ((cfg.DischargeTimeoutValue << 4) & 0xF0) | (cfg.DischargeCell12 << 3) | (cf
  49:Src/LTC6811.c **** 	
  50:Src/LTC6811.c **** 	for (uint8_t current_ic = 1; current_ic <= total_ic; current_ic++) {
  51:Src/LTC6811.c **** 	
  52:Src/LTC6811.c **** 		cmd[0] = (uint8_t) (0x80 | ((current_ic << 3) & 0x78) | ((WriteConfigurationRegisterGroup >> 8) &
  53:Src/LTC6811.c **** 		cmd[1] = (uint8_t) (WriteConfigurationRegisterGroup & 0xFF);
  54:Src/LTC6811.c **** 		
  55:Src/LTC6811.c **** 		PEC_return = calculatePEC(2, cmd);
  56:Src/LTC6811.c **** 		
  57:Src/LTC6811.c **** 		cmd[2] = (PEC_return >> 8) & 0xFF;
  58:Src/LTC6811.c **** 		cmd[3] = PEC_return & 0xFF;
  59:Src/LTC6811.c **** 	
  60:Src/LTC6811.c **** 		cmd[4] = config[0];
  61:Src/LTC6811.c **** 		cmd[5] = config[1];
  62:Src/LTC6811.c **** 		cmd[6] = config[2];
  63:Src/LTC6811.c **** 		cmd[7] = config[3];
  64:Src/LTC6811.c **** 		cmd[8] = config[4];
  65:Src/LTC6811.c **** 		cmd[9] = config[5];
  66:Src/LTC6811.c **** 		
  67:Src/LTC6811.c **** 		PEC_return = calculatePEC(6, cmd + 4);
  68:Src/LTC6811.c **** 	
  69:Src/LTC6811.c **** 		cmd[10] = (PEC_return >> 8) & 0xFF;
  70:Src/LTC6811.c **** 		cmd[11] = PEC_return & 0xFF;
  71:Src/LTC6811.c **** 		
  72:Src/LTC6811.c **** 		SPIWrite(cmd, cmd_len);
  73:Src/LTC6811.c **** 		
  74:Src/LTC6811.c **** 		HAL_Delay(100);
  75:Src/LTC6811.c **** 	}
  76:Src/LTC6811.c **** 	
  77:Src/LTC6811.c **** 	free(cmd);
ARM GAS  C:\cygwin64\tmp\ccp74qwu.s 			page 5


  78:Src/LTC6811.c **** 	
  79:Src/LTC6811.c **** };
  80:Src/LTC6811.c **** 
  81:Src/LTC6811.c **** bool readCellVoltage(uint8_t address, uint16_t cellVoltage[8]) {
  82:Src/LTC6811.c **** 	
  83:Src/LTC6811.c **** 	uint8_t cmd[12];
  84:Src/LTC6811.c **** 	uint8_t rx_data[12];
  85:Src/LTC6811.c **** 	uint16_t PEC_return;
  86:Src/LTC6811.c **** 	uint8_t *PEC_send;
  87:Src/LTC6811.c **** 	bool dataValid = true;
  88:Src/LTC6811.c **** 	
  89:Src/LTC6811.c **** 	sendAddressCommand(StartCellVoltageADCConversionAll, address); // start conversion for every cell
  90:Src/LTC6811.c **** 
  91:Src/LTC6811.c **** 	HAL_Delay(15); // conversion time is 12.8ms at 422Hz, so wait 15ms
  92:Src/LTC6811.c **** 
  93:Src/LTC6811.c **** 	// group 1: cells 1, 2, and 3
  94:Src/LTC6811.c **** 	PEC_send = (uint8_t *)malloc(6*sizeof(uint8_t));
  95:Src/LTC6811.c **** 	
  96:Src/LTC6811.c **** 	PEC_send[0] = (uint8_t) (0x80 | ((address << 3) & 0x78) | ((ReadCellVoltageRegisterGroup1to3 >> 8)
  97:Src/LTC6811.c **** 	PEC_send[1] = (uint8_t) (ReadCellVoltageRegisterGroup1to3 & 0xFF);
  98:Src/LTC6811.c **** 
  99:Src/LTC6811.c **** 	cmd[0] = PEC_send[0];
 100:Src/LTC6811.c **** 	cmd[1] = PEC_send[1];
 101:Src/LTC6811.c **** 	
 102:Src/LTC6811.c **** 	PEC_return = calculatePEC(2, PEC_send);
 103:Src/LTC6811.c **** 	
 104:Src/LTC6811.c **** 	cmd[2] = (PEC_return >> 8) & 0xFF;
 105:Src/LTC6811.c **** 	cmd[3] = PEC_return & 0xFF;
 106:Src/LTC6811.c **** 	
 107:Src/LTC6811.c **** 	cmd[4] = 0;
 108:Src/LTC6811.c **** 	cmd[5] = 0;
 109:Src/LTC6811.c **** 	cmd[6] = 0;
 110:Src/LTC6811.c **** 	cmd[7] = 0;
 111:Src/LTC6811.c **** 	cmd[8] = 0;
 112:Src/LTC6811.c **** 	cmd[9] = 0;
 113:Src/LTC6811.c **** 	cmd[10] = 0;
 114:Src/LTC6811.c **** 	cmd[11] = 0;
 115:Src/LTC6811.c **** 	
 116:Src/LTC6811.c **** 	SPIWriteRead(cmd, rx_data, sizeof(cmd)); // send 4 command bytes, receive 6 cell voltage bytes (4-
 117:Src/LTC6811.c **** 	
 118:Src/LTC6811.c **** 	/*cellVoltage[0] = ((rx_data[0] << 8) & 0xFF00) | (rx_data[1] & 0x00FF);
 119:Src/LTC6811.c **** 	cellVoltage[1] = ((rx_data[2] << 8) & 0xFF00) | (rx_data[3] & 0x00FF);
 120:Src/LTC6811.c **** 	cellVoltage[2] = ((rx_data[4] << 8) & 0xFF00) | (rx_data[5] & 0x00FF);
 121:Src/LTC6811.c **** 	cellVoltage[3] = ((rx_data[6] << 8) & 0xFF00) | (rx_data[7] & 0x00FF);
 122:Src/LTC6811.c **** 	cellVoltage[4] = ((rx_data[8] << 8) & 0xFF00) | (rx_data[9] & 0x00FF);
 123:Src/LTC6811.c **** 	cellVoltage[5] = ((rx_data[10] << 8) & 0xFF00) | (rx_data[11] & 0x00FF);*/
 124:Src/LTC6811.c **** 	
 125:Src/LTC6811.c **** 	// calculate PEC based on cell voltage data received
 126:Src/LTC6811.c **** 	PEC_send[0] = rx_data[4]; // cell 1 voltage low bytes
 127:Src/LTC6811.c **** 	PEC_send[1] = rx_data[5]; // cell 1 voltage high bytes
 128:Src/LTC6811.c **** 	PEC_send[2] = rx_data[6]; // cell 2 voltage low bytes
 129:Src/LTC6811.c **** 	PEC_send[3] = rx_data[7]; // cell 2 voltage high bytes
 130:Src/LTC6811.c **** 	PEC_send[4] = rx_data[8]; // cell 3 voltage low bytes
 131:Src/LTC6811.c **** 	PEC_send[5] = rx_data[9]; // cell 3 voltage high bytes
 132:Src/LTC6811.c **** 	
 133:Src/LTC6811.c **** 	PEC_return = calculatePEC(6, PEC_send);
 134:Src/LTC6811.c **** 	
ARM GAS  C:\cygwin64\tmp\ccp74qwu.s 			page 6


 135:Src/LTC6811.c **** 	// check if received PEC matches calculated PEC
 136:Src/LTC6811.c **** 	/*if (PEC_return != (((rx_data[10] >> 8) & 0xFF00) | (rx_data[11] & 0x00FF))) {
 137:Src/LTC6811.c **** 		dataValid = false;
 138:Src/LTC6811.c **** 	}*/
 139:Src/LTC6811.c **** 	
 140:Src/LTC6811.c **** 	// store values if data is valid
 141:Src/LTC6811.c **** 	if (dataValid == true) {
 142:Src/LTC6811.c **** 		cellVoltage[0] = (uint16_t) ((rx_data[5] << 8) & 0xFF00) | (rx_data[4] & 0x00FF); // cell 1 volta
 143:Src/LTC6811.c **** 		cellVoltage[1] = (uint16_t) ((rx_data[7] << 8) & 0xFF00) | (rx_data[6] & 0x00FF); // cell 2 volta
 144:Src/LTC6811.c **** 		cellVoltage[2] = (uint16_t) ((rx_data[9] << 8) & 0xFF00) | (rx_data[8] & 0x00FF); // cell 3 volta
 145:Src/LTC6811.c **** 	}
 146:Src/LTC6811.c **** 	
 147:Src/LTC6811.c **** 	// group 2: cells 4, 5, and 6
 148:Src/LTC6811.c **** 	PEC_send[0] = (uint8_t) (0x80 | ((address << 3) & 0x78) | ((ReadCellVoltageRegisterGroup4to6 >> 8)
 149:Src/LTC6811.c **** 	PEC_send[1] = (uint8_t) (ReadCellVoltageRegisterGroup4to6 & 0xFF);
 150:Src/LTC6811.c **** 
 151:Src/LTC6811.c **** 	cmd[0] = PEC_send[0];
 152:Src/LTC6811.c **** 	cmd[1] = PEC_send[1];
 153:Src/LTC6811.c **** 	
 154:Src/LTC6811.c **** 	PEC_return = calculatePEC(2, PEC_send);
 155:Src/LTC6811.c **** 	
 156:Src/LTC6811.c **** 	cmd[2] = (PEC_return >> 8) & 0xFF;
 157:Src/LTC6811.c **** 	cmd[3] = PEC_return & 0xFF;
 158:Src/LTC6811.c **** 	
 159:Src/LTC6811.c **** 	cmd[4] = 0;
 160:Src/LTC6811.c **** 	cmd[5] = 0;
 161:Src/LTC6811.c **** 	cmd[6] = 0;
 162:Src/LTC6811.c **** 	cmd[7] = 0;
 163:Src/LTC6811.c **** 	cmd[8] = 0;
 164:Src/LTC6811.c **** 	cmd[9] = 0;
 165:Src/LTC6811.c **** 	cmd[10] = 0;
 166:Src/LTC6811.c **** 	cmd[11] = 0;
 167:Src/LTC6811.c **** 	
 168:Src/LTC6811.c **** 	SPIWriteRead(cmd, rx_data, sizeof(cmd));
 169:Src/LTC6811.c **** 	
 170:Src/LTC6811.c **** 	// calculate PEC
 171:Src/LTC6811.c **** 	PEC_send[0] = rx_data[4]; // cell 4 voltage low bytes
 172:Src/LTC6811.c **** 	PEC_send[1] = rx_data[5]; // cell 4 voltage high bytes
 173:Src/LTC6811.c **** 	PEC_send[2] = rx_data[6]; // cell 5 voltage low bytes
 174:Src/LTC6811.c **** 	PEC_send[3] = rx_data[7]; // cell 5 voltage high bytes
 175:Src/LTC6811.c **** 	PEC_send[4] = rx_data[8]; // cell 6 voltage low bytes
 176:Src/LTC6811.c **** 	PEC_send[5] = rx_data[9]; // cell 6 voltage high bytes
 177:Src/LTC6811.c **** 	
 178:Src/LTC6811.c **** 	PEC_return = calculatePEC(6, PEC_send);
 179:Src/LTC6811.c **** 	
 180:Src/LTC6811.c **** 	// store values if data is valid
 181:Src/LTC6811.c **** 	
 182:Src/LTC6811.c **** 	/*if (PEC_return != (((rx_data[10] >> 8) & 0xFF00) | (rx_data[11] & 0x00FF))) {
 183:Src/LTC6811.c **** 		dataValid = false;
 184:Src/LTC6811.c **** 	}*/
 185:Src/LTC6811.c **** 	
 186:Src/LTC6811.c **** 	if (dataValid == true) {
 187:Src/LTC6811.c **** 		cellVoltage[3] = (uint16_t) ((rx_data[5] << 8) & 0xFF00) | (rx_data[4] & 0x00FF); // cell 4 volta
 188:Src/LTC6811.c **** 	}
 189:Src/LTC6811.c **** 	
 190:Src/LTC6811.c **** 	// group 3: cells 7, 8, and 9
 191:Src/LTC6811.c **** 	PEC_send[0] = (uint8_t) (0x80 | ((address << 3) & 0x78) | ((ReadCellVoltageRegisterGroup7to9 >> 8)
ARM GAS  C:\cygwin64\tmp\ccp74qwu.s 			page 7


 192:Src/LTC6811.c **** 	PEC_send[1] = (uint8_t) (ReadCellVoltageRegisterGroup7to9 & 0xFF);
 193:Src/LTC6811.c **** 
 194:Src/LTC6811.c **** 	cmd[0] = PEC_send[0];
 195:Src/LTC6811.c **** 	cmd[1] = PEC_send[1];
 196:Src/LTC6811.c **** 	
 197:Src/LTC6811.c **** 	PEC_return = calculatePEC(2, PEC_send);
 198:Src/LTC6811.c **** 	
 199:Src/LTC6811.c **** 	cmd[2] = (PEC_return >> 8) & 0xFF;
 200:Src/LTC6811.c **** 	cmd[3] = PEC_return & 0xFF;
 201:Src/LTC6811.c **** 	
 202:Src/LTC6811.c **** 	cmd[4] = 0;
 203:Src/LTC6811.c **** 	cmd[5] = 0;
 204:Src/LTC6811.c **** 	cmd[6] = 0;
 205:Src/LTC6811.c **** 	cmd[7] = 0;
 206:Src/LTC6811.c **** 	cmd[8] = 0;
 207:Src/LTC6811.c **** 	cmd[9] = 0;
 208:Src/LTC6811.c **** 	cmd[10] = 0;
 209:Src/LTC6811.c **** 	cmd[11] = 0;
 210:Src/LTC6811.c **** 	
 211:Src/LTC6811.c **** 	SPIWriteRead(cmd, rx_data, sizeof(cmd));
 212:Src/LTC6811.c **** 	
 213:Src/LTC6811.c **** 	// calculate PEC
 214:Src/LTC6811.c **** 	PEC_send[0] = rx_data[4]; // cell 7 voltage low bytes
 215:Src/LTC6811.c **** 	PEC_send[1] = rx_data[5]; // cell 7 voltage high bytes
 216:Src/LTC6811.c **** 	PEC_send[2] = rx_data[6]; // cell 8 voltage low bytes
 217:Src/LTC6811.c **** 	PEC_send[3] = rx_data[7]; // cell 8 voltage high bytes
 218:Src/LTC6811.c **** 	PEC_send[4] = rx_data[8]; // cell 9 voltage low bytes
 219:Src/LTC6811.c **** 	PEC_send[5] = rx_data[9]; // cell 9 voltage high bytes
 220:Src/LTC6811.c **** 	
 221:Src/LTC6811.c **** 	PEC_return = calculatePEC(6, PEC_send);
 222:Src/LTC6811.c **** 	
 223:Src/LTC6811.c **** 	// store values if data is valid
 224:Src/LTC6811.c **** 	
 225:Src/LTC6811.c **** 	/*if (PEC_return != (((rx_data[10] >> 8) & 0xFF00) | (rx_data[11] & 0x00FF))) {
 226:Src/LTC6811.c **** 		dataValid = false;
 227:Src/LTC6811.c **** 	}*/
 228:Src/LTC6811.c **** 	
 229:Src/LTC6811.c **** 	if (dataValid == true) {
 230:Src/LTC6811.c **** 		cellVoltage[4] = (uint16_t) ((rx_data[5] << 8) & 0xFF00) | (rx_data[4] & 0x00FF); // cell 7 volta
 231:Src/LTC6811.c **** 		cellVoltage[5] = (uint16_t) ((rx_data[7] << 8) & 0xFF00) | (rx_data[6] & 0x00FF); // cell 8 volta
 232:Src/LTC6811.c **** 		cellVoltage[6] = (uint16_t) ((rx_data[9] << 8) & 0xFF00) | (rx_data[8] & 0x00FF); // cell 9 volta
 233:Src/LTC6811.c **** 	}
 234:Src/LTC6811.c **** 	
 235:Src/LTC6811.c **** 	// group 4: cells 10, 11, and 12
 236:Src/LTC6811.c **** 	PEC_send[0] = (uint8_t) (0x80 | ((address << 3) & 0x78) | ((ReadCellVoltageRegisterGroup10to12 >> 
 237:Src/LTC6811.c **** 	PEC_send[1] = (uint8_t) (ReadCellVoltageRegisterGroup10to12 & 0xFF);
 238:Src/LTC6811.c **** 
 239:Src/LTC6811.c **** 	cmd[0] = PEC_send[0];
 240:Src/LTC6811.c **** 	cmd[1] = PEC_send[1];
 241:Src/LTC6811.c **** 	
 242:Src/LTC6811.c **** 	PEC_return = calculatePEC(2, PEC_send);
 243:Src/LTC6811.c **** 	
 244:Src/LTC6811.c **** 	cmd[2] = (PEC_return >> 8) & 0xFF;
 245:Src/LTC6811.c **** 	cmd[3] = PEC_return & 0xFF;
 246:Src/LTC6811.c **** 	
 247:Src/LTC6811.c **** 	cmd[4] = 0;
 248:Src/LTC6811.c **** 	cmd[5] = 0;
ARM GAS  C:\cygwin64\tmp\ccp74qwu.s 			page 8


 249:Src/LTC6811.c **** 	cmd[6] = 0;
 250:Src/LTC6811.c **** 	cmd[7] = 0;
 251:Src/LTC6811.c **** 	cmd[8] = 0;
 252:Src/LTC6811.c **** 	cmd[9] = 0;
 253:Src/LTC6811.c **** 	cmd[10] = 0;
 254:Src/LTC6811.c **** 	cmd[11] = 0;
 255:Src/LTC6811.c **** 	
 256:Src/LTC6811.c **** 	SPIWriteRead(cmd, rx_data, sizeof(cmd));
 257:Src/LTC6811.c **** 	
 258:Src/LTC6811.c **** 	// calculate PEC
 259:Src/LTC6811.c **** 	PEC_send[0] = rx_data[4]; // cell 10 voltage low bytes
 260:Src/LTC6811.c **** 	PEC_send[1] = rx_data[5]; // cell 10 voltage high bytes
 261:Src/LTC6811.c **** 	PEC_send[2] = rx_data[6]; // cell 11 voltage low bytes
 262:Src/LTC6811.c **** 	PEC_send[3] = rx_data[7]; // cell 11 voltage high bytes
 263:Src/LTC6811.c **** 	PEC_send[4] = rx_data[8]; // cell 12 voltage low bytes
 264:Src/LTC6811.c **** 	PEC_send[5] = rx_data[9]; // cell 12 voltage high bytes
 265:Src/LTC6811.c **** 	
 266:Src/LTC6811.c **** 	PEC_return = calculatePEC(6, PEC_send);
 267:Src/LTC6811.c **** 	
 268:Src/LTC6811.c **** 	// store values if data is valid
 269:Src/LTC6811.c **** 	
 270:Src/LTC6811.c **** 	/*if (PEC_return != (((rx_data[10] >> 8) & 0xFF00) | (rx_data[11] & 0x00FF))) {
 271:Src/LTC6811.c **** 		dataValid = false;
 272:Src/LTC6811.c **** 	}*/
 273:Src/LTC6811.c **** 	
 274:Src/LTC6811.c **** 	if (dataValid == true) {
 275:Src/LTC6811.c **** 		cellVoltage[7] = (uint16_t) ((rx_data[5] << 8) & 0xFF00) | (rx_data[4] & 0x00FF); // cell 7 volta
 276:Src/LTC6811.c **** 	}
 277:Src/LTC6811.c **** 	
 278:Src/LTC6811.c **** 	free(PEC_send);
 279:Src/LTC6811.c **** 	
 280:Src/LTC6811.c **** 	return (dataValid == true);
 281:Src/LTC6811.c **** 	
 282:Src/LTC6811.c **** };
 283:Src/LTC6811.c **** 
 284:Src/LTC6811.c **** void sendBroadcastCommand(CommandCodeTypedef command) {
 285:Src/LTC6811.c **** 	
 286:Src/LTC6811.c **** 	uint8_t cmd[4];
 287:Src/LTC6811.c **** 	uint16_t PEC_return;
 288:Src/LTC6811.c **** 	
 289:Src/LTC6811.c **** 	cmd[0] = (uint8_t) ((command >> 8) & 0x0F);
 290:Src/LTC6811.c **** 	cmd[1] = (uint8_t) (command & 0xFF);
 291:Src/LTC6811.c **** 	
 292:Src/LTC6811.c **** 	PEC_return = calculatePEC(2, (uint8_t *)&(cmd));
 293:Src/LTC6811.c **** 	
 294:Src/LTC6811.c **** 	cmd[2] = (PEC_return >> 8) & 0xFF;
 295:Src/LTC6811.c **** 	cmd[3] = PEC_return & 0xFF;
 296:Src/LTC6811.c **** 	
 297:Src/LTC6811.c **** 	SPIWrite(cmd, 4);
 298:Src/LTC6811.c **** };
 299:Src/LTC6811.c **** 
 300:Src/LTC6811.c **** void sendAddressCommand(CommandCodeTypedef command, uint8_t address) {
 301:Src/LTC6811.c **** 	
 302:Src/LTC6811.c **** 	uint8_t cmd[4];
 303:Src/LTC6811.c **** 	uint16_t PEC_return;
 304:Src/LTC6811.c **** 	uint8_t *msbytes;
 305:Src/LTC6811.c **** 	
ARM GAS  C:\cygwin64\tmp\ccp74qwu.s 			page 9


 306:Src/LTC6811.c **** 	msbytes = (uint8_t *)malloc(2*sizeof(uint8_t));
 307:Src/LTC6811.c **** 	
 308:Src/LTC6811.c **** 	msbytes[0] = (uint8_t) (0x80 | ((address << 3) & 0x78) | ((command >> 8) & 0x07));
 309:Src/LTC6811.c **** 	msbytes[1] = (uint8_t) (command & 0xFF);
 310:Src/LTC6811.c **** 
 311:Src/LTC6811.c **** 	cmd[0] = msbytes[0];
 312:Src/LTC6811.c **** 	cmd[1] = msbytes[1];
 313:Src/LTC6811.c **** 	
 314:Src/LTC6811.c **** 	PEC_return = calculatePEC(2, msbytes);
 315:Src/LTC6811.c **** 	
 316:Src/LTC6811.c **** 	cmd[2] = (PEC_return >> 8) & 0xFF;
 317:Src/LTC6811.c **** 	cmd[3] = PEC_return & 0xFF;
 318:Src/LTC6811.c **** 	
 319:Src/LTC6811.c **** 	SPIWrite(cmd, 4);
 320:Src/LTC6811.c **** 	
 321:Src/LTC6811.c **** 	free(msbytes);
 322:Src/LTC6811.c **** };
 323:Src/LTC6811.c **** 
 324:Src/LTC6811.c **** uint16_t calculatePEC(uint8_t len, uint8_t *data) {
 134              		.loc 1 324 51 is_stmt 1 view -0
 135              		.cfi_startproc
 136              		@ args = 0, pretend = 0, frame = 0
 137              		@ frame_needed = 0, uses_anonymous_args = 0
 138              		@ link register save eliminated.
 139              		.loc 1 324 51 is_stmt 0 view .LVU35
 140 0000 30B4     		push	{r4, r5}
 141              	.LCFI0:
 142              		.cfi_def_cfa_offset 8
 143              		.cfi_offset 4, -8
 144              		.cfi_offset 5, -4
 325:Src/LTC6811.c **** 	
 326:Src/LTC6811.c **** 	uint16_t remainder, address;
 145              		.loc 1 326 2 is_stmt 1 view .LVU36
 327:Src/LTC6811.c **** 	remainder = 16; //PEC seed
 146              		.loc 1 327 2 view .LVU37
 147              	.LVL13:
 328:Src/LTC6811.c **** 	
 329:Src/LTC6811.c **** 	for (int i = 0; i < len; i++) {
 148              		.loc 1 329 2 view .LVU38
 149              	.LBB5:
 150              		.loc 1 329 7 view .LVU39
 151              		.loc 1 329 11 is_stmt 0 view .LVU40
 152 0002 0024     		movs	r4, #0
 153              	.LBE5:
 327:Src/LTC6811.c **** 	remainder = 16; //PEC seed
 154              		.loc 1 327 12 view .LVU41
 155 0004 1022     		movs	r2, #16
 156              	.LVL14:
 157              	.L13:
 158              	.LBB6:
 159              		.loc 1 329 2 discriminator 1 view .LVU42
 160 0006 A042     		cmp	r0, r4
 161 0008 0BDD     		ble	.L16
 330:Src/LTC6811.c **** 		address = ((remainder >> 7) ^ data[i]) & 0xFF; //calculate PEC table address
 162              		.loc 1 330 3 is_stmt 1 discriminator 3 view .LVU43
 163              		.loc 1 330 37 is_stmt 0 discriminator 3 view .LVU44
 164 000a 0B5D     		ldrb	r3, [r1, r4]	@ zero_extendqisi2
ARM GAS  C:\cygwin64\tmp\ccp74qwu.s 			page 10


 165              		.loc 1 330 31 discriminator 3 view .LVU45
 166 000c 83EAD213 		eor	r3, r3, r2, lsr #7
 167              		.loc 1 330 11 discriminator 3 view .LVU46
 168 0010 DBB2     		uxtb	r3, r3
 169              	.LVL15:
 331:Src/LTC6811.c **** 		remainder = (remainder << 8) ^ pec15Table[address];
 170              		.loc 1 331 3 is_stmt 1 discriminator 3 view .LVU47
 171              		.loc 1 331 44 is_stmt 0 discriminator 3 view .LVU48
 172 0012 064D     		ldr	r5, .L17
 173 0014 35F91330 		ldrsh	r3, [r5, r3, lsl #1]
 174              	.LVL16:
 175              		.loc 1 331 32 discriminator 3 view .LVU49
 176 0018 83EA0222 		eor	r2, r3, r2, lsl #8
 177              	.LVL17:
 178              		.loc 1 331 13 discriminator 3 view .LVU50
 179 001c 92B2     		uxth	r2, r2
 180              	.LVL18:
 329:Src/LTC6811.c **** 		address = ((remainder >> 7) ^ data[i]) & 0xFF; //calculate PEC table address
 181              		.loc 1 329 28 discriminator 3 view .LVU51
 182 001e 0134     		adds	r4, r4, #1
 183              	.LVL19:
 329:Src/LTC6811.c **** 		address = ((remainder >> 7) ^ data[i]) & 0xFF; //calculate PEC table address
 184              		.loc 1 329 28 discriminator 3 view .LVU52
 185 0020 F1E7     		b	.L13
 186              	.L16:
 329:Src/LTC6811.c **** 		address = ((remainder >> 7) ^ data[i]) & 0xFF; //calculate PEC table address
 187              		.loc 1 329 28 discriminator 3 view .LVU53
 188              	.LBE6:
 332:Src/LTC6811.c **** 	}
 333:Src/LTC6811.c **** 	
 334:Src/LTC6811.c **** 	return (remainder * 2); //The CRC15 has a 0 in the LSB so the final value must be multiplied by 2
 189              		.loc 1 334 2 is_stmt 1 view .LVU54
 190              		.loc 1 334 20 is_stmt 0 view .LVU55
 191 0022 5000     		lsls	r0, r2, #1
 192              	.LVL20:
 193              		.loc 1 334 20 view .LVU56
 194 0024 80B2     		uxth	r0, r0
 335:Src/LTC6811.c **** };
 195              		.loc 1 335 1 view .LVU57
 196 0026 30BC     		pop	{r4, r5}
 197              	.LCFI1:
 198              		.cfi_restore 5
 199              		.cfi_restore 4
 200              		.cfi_def_cfa_offset 0
 201              	.LVL21:
 202              		.loc 1 335 1 view .LVU58
 203 0028 7047     		bx	lr
 204              	.L18:
 205 002a 00BF     		.align	2
 206              	.L17:
 207 002c 00000000 		.word	pec15Table
 208              		.cfi_endproc
 209              	.LFE71:
 211              		.section	.text.writeConfig,"ax",%progbits
 212              		.align	1
 213              		.global	writeConfig
 214              		.syntax unified
ARM GAS  C:\cygwin64\tmp\ccp74qwu.s 			page 11


 215              		.thumb
 216              		.thumb_func
 217              		.fpu softvfp
 219              	writeConfig:
 220              	.LVL22:
 221              	.LFB67:
  27:Src/LTC6811.c **** 	
 222              		.loc 1 27 64 is_stmt 1 view -0
 223              		.cfi_startproc
 224              		@ args = 32, pretend = 16, frame = 8
 225              		@ frame_needed = 0, uses_anonymous_args = 0
  27:Src/LTC6811.c **** 	
 226              		.loc 1 27 64 is_stmt 0 view .LVU60
 227 0000 84B0     		sub	sp, sp, #16
 228              	.LCFI2:
 229              		.cfi_def_cfa_offset 16
 230 0002 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 231              	.LCFI3:
 232              		.cfi_def_cfa_offset 52
 233              		.cfi_offset 4, -52
 234              		.cfi_offset 5, -48
 235              		.cfi_offset 6, -44
 236              		.cfi_offset 7, -40
 237              		.cfi_offset 8, -36
 238              		.cfi_offset 9, -32
 239              		.cfi_offset 10, -28
 240              		.cfi_offset 11, -24
 241              		.cfi_offset 14, -20
 242 0006 83B0     		sub	sp, sp, #12
 243              	.LCFI4:
 244              		.cfi_def_cfa_offset 64
 245 0008 0CAC     		add	r4, sp, #48
 246 000a 84E80F00 		stm	r4, {r0, r1, r2, r3}
 247 000e 9DF84CA0 		ldrb	r10, [sp, #76]	@ zero_extendqisi2
  36:Src/LTC6811.c **** 	uint8_t *cmd;
 248              		.loc 1 36 2 is_stmt 1 view .LVU61
  37:Src/LTC6811.c **** 	uint8_t cmd_len = 12;
 249              		.loc 1 37 2 view .LVU62
  38:Src/LTC6811.c **** 	uint16_t PEC_return;
 250              		.loc 1 38 2 view .LVU63
 251              	.LVL23:
  39:Src/LTC6811.c **** 	
 252              		.loc 1 39 2 view .LVU64
  41:Src/LTC6811.c **** 	
 253              		.loc 1 41 2 view .LVU65
  41:Src/LTC6811.c **** 	
 254              		.loc 1 41 19 is_stmt 0 view .LVU66
 255 0012 0C20     		movs	r0, #12
 256 0014 FFF7FEFF 		bl	malloc
 257              	.LVL24:
 258 0018 0446     		mov	r4, r0
 259              	.LVL25:
  43:Src/LTC6811.c **** 	config[1] = (uint8_t) (cfg.UndervoltageComparisonVoltage & 0xFF);
 260              		.loc 1 43 2 is_stmt 1 view .LVU67
  43:Src/LTC6811.c **** 	config[1] = (uint8_t) (cfg.UndervoltageComparisonVoltage & 0xFF);
 261              		.loc 1 43 28 is_stmt 0 view .LVU68
 262 001a 9DF83070 		ldrb	r7, [sp, #48]	@ zero_extendqisi2
ARM GAS  C:\cygwin64\tmp\ccp74qwu.s 			page 12


  43:Src/LTC6811.c **** 	config[1] = (uint8_t) (cfg.UndervoltageComparisonVoltage & 0xFF);
 263              		.loc 1 43 14 view .LVU69
 264 001e FF01     		lsls	r7, r7, #7
 265 0020 7FB2     		sxtb	r7, r7
  43:Src/LTC6811.c **** 	config[1] = (uint8_t) (cfg.UndervoltageComparisonVoltage & 0xFF);
 266              		.loc 1 43 58 view .LVU70
 267 0022 9DF83130 		ldrb	r3, [sp, #49]	@ zero_extendqisi2
  43:Src/LTC6811.c **** 	config[1] = (uint8_t) (cfg.UndervoltageComparisonVoltage & 0xFF);
 268              		.loc 1 43 52 view .LVU71
 269 0026 47EA8317 		orr	r7, r7, r3, lsl #6
 270 002a 7FB2     		sxtb	r7, r7
  43:Src/LTC6811.c **** 	config[1] = (uint8_t) (cfg.UndervoltageComparisonVoltage & 0xFF);
 271              		.loc 1 43 88 view .LVU72
 272 002c 9DF83230 		ldrb	r3, [sp, #50]	@ zero_extendqisi2
  43:Src/LTC6811.c **** 	config[1] = (uint8_t) (cfg.UndervoltageComparisonVoltage & 0xFF);
 273              		.loc 1 43 82 view .LVU73
 274 0030 47EA4317 		orr	r7, r7, r3, lsl #5
 275 0034 7FB2     		sxtb	r7, r7
  43:Src/LTC6811.c **** 	config[1] = (uint8_t) (cfg.UndervoltageComparisonVoltage & 0xFF);
 276              		.loc 1 43 118 view .LVU74
 277 0036 9DF83330 		ldrb	r3, [sp, #51]	@ zero_extendqisi2
  43:Src/LTC6811.c **** 	config[1] = (uint8_t) (cfg.UndervoltageComparisonVoltage & 0xFF);
 278              		.loc 1 43 112 view .LVU75
 279 003a 47EA0317 		orr	r7, r7, r3, lsl #4
 280 003e 7FB2     		sxtb	r7, r7
  43:Src/LTC6811.c **** 	config[1] = (uint8_t) (cfg.UndervoltageComparisonVoltage & 0xFF);
 281              		.loc 1 43 148 view .LVU76
 282 0040 9DF83430 		ldrb	r3, [sp, #52]	@ zero_extendqisi2
  43:Src/LTC6811.c **** 	config[1] = (uint8_t) (cfg.UndervoltageComparisonVoltage & 0xFF);
 283              		.loc 1 43 142 view .LVU77
 284 0044 47EAC307 		orr	r7, r7, r3, lsl #3
 285 0048 7FB2     		sxtb	r7, r7
  43:Src/LTC6811.c **** 	config[1] = (uint8_t) (cfg.UndervoltageComparisonVoltage & 0xFF);
 286              		.loc 1 43 178 view .LVU78
 287 004a 9DF83530 		ldrb	r3, [sp, #53]	@ zero_extendqisi2
  43:Src/LTC6811.c **** 	config[1] = (uint8_t) (cfg.UndervoltageComparisonVoltage & 0xFF);
 288              		.loc 1 43 172 view .LVU79
 289 004e 47EA8307 		orr	r7, r7, r3, lsl #2
 290 0052 7FB2     		sxtb	r7, r7
  43:Src/LTC6811.c **** 	config[1] = (uint8_t) (cfg.UndervoltageComparisonVoltage & 0xFF);
 291              		.loc 1 43 203 view .LVU80
 292 0054 9DF93630 		ldrsb	r3, [sp, #54]
  43:Src/LTC6811.c **** 	config[1] = (uint8_t) (cfg.UndervoltageComparisonVoltage & 0xFF);
 293              		.loc 1 43 197 view .LVU81
 294 0058 1F43     		orrs	r7, r7, r3
 295 005a FFB2     		uxtb	r7, r7
  44:Src/LTC6811.c **** 	config[2] = (uint8_t) ((cfg.OvervoltageComparisonVoltage << 4) & 0xF0) | ((cfg.UndervoltageCompari
 296              		.loc 1 44 2 is_stmt 1 view .LVU82
  44:Src/LTC6811.c **** 	config[2] = (uint8_t) ((cfg.OvervoltageComparisonVoltage << 4) & 0xF0) | ((cfg.UndervoltageCompari
 297              		.loc 1 44 28 is_stmt 0 view .LVU83
 298 005c BDF83830 		ldrh	r3, [sp, #56]
  44:Src/LTC6811.c **** 	config[2] = (uint8_t) ((cfg.OvervoltageComparisonVoltage << 4) & 0xF0) | ((cfg.UndervoltageCompari
 299              		.loc 1 44 14 view .LVU84
 300 0060 5FFA83FB 		uxtb	fp, r3
  45:Src/LTC6811.c **** 	config[3] = (uint8_t) ((cfg.OvervoltageComparisonVoltage >> 4) & 0xFF);
 301              		.loc 1 45 2 is_stmt 1 view .LVU85
  45:Src/LTC6811.c **** 	config[3] = (uint8_t) ((cfg.OvervoltageComparisonVoltage >> 4) & 0xFF);
ARM GAS  C:\cygwin64\tmp\ccp74qwu.s 			page 13


 302              		.loc 1 45 29 is_stmt 0 view .LVU86
 303 0064 BDF83A90 		ldrh	r9, [sp, #58]
  45:Src/LTC6811.c **** 	config[3] = (uint8_t) ((cfg.OvervoltageComparisonVoltage >> 4) & 0xFF);
 304              		.loc 1 45 59 view .LVU87
 305 0068 4FEA0918 		lsl	r8, r9, #4
  45:Src/LTC6811.c **** 	config[3] = (uint8_t) ((cfg.OvervoltageComparisonVoltage >> 4) & 0xFF);
 306              		.loc 1 45 14 view .LVU88
 307 006c 4FFA88F8 		sxtb	r8, r8
  45:Src/LTC6811.c **** 	config[3] = (uint8_t) ((cfg.OvervoltageComparisonVoltage >> 4) & 0xFF);
 308              		.loc 1 45 117 view .LVU89
 309 0070 C3F30323 		ubfx	r3, r3, #8, #4
  45:Src/LTC6811.c **** 	config[3] = (uint8_t) ((cfg.OvervoltageComparisonVoltage >> 4) & 0xFF);
 310              		.loc 1 45 73 view .LVU90
 311 0074 48EA0308 		orr	r8, r8, r3
 312 0078 5FFA88F8 		uxtb	r8, r8
  46:Src/LTC6811.c **** 	config[4] = (uint8_t) (cfg.DischargeCell8 << 7) | (cfg.DischargeCell7 << 6) | (cfg.DischargeCell6 
 313              		.loc 1 46 2 is_stmt 1 view .LVU91
  46:Src/LTC6811.c **** 	config[4] = (uint8_t) (cfg.DischargeCell8 << 7) | (cfg.DischargeCell7 << 6) | (cfg.DischargeCell6 
 314              		.loc 1 46 14 is_stmt 0 view .LVU92
 315 007c C9F30719 		ubfx	r9, r9, #4, #8
  47:Src/LTC6811.c **** 	config[5] = (uint8_t) ((cfg.DischargeTimeoutValue << 4) & 0xF0) | (cfg.DischargeCell12 << 3) | (cf
 316              		.loc 1 47 2 is_stmt 1 view .LVU93
  47:Src/LTC6811.c **** 	config[5] = (uint8_t) ((cfg.DischargeTimeoutValue << 4) & 0xF0) | (cfg.DischargeCell12 << 3) | (cf
 317              		.loc 1 47 28 is_stmt 0 view .LVU94
 318 0080 9DF84360 		ldrb	r6, [sp, #67]	@ zero_extendqisi2
  47:Src/LTC6811.c **** 	config[5] = (uint8_t) ((cfg.DischargeTimeoutValue << 4) & 0xF0) | (cfg.DischargeCell12 << 3) | (cf
 319              		.loc 1 47 14 view .LVU95
 320 0084 F601     		lsls	r6, r6, #7
 321 0086 76B2     		sxtb	r6, r6
  47:Src/LTC6811.c **** 	config[5] = (uint8_t) ((cfg.DischargeTimeoutValue << 4) & 0xF0) | (cfg.DischargeCell12 << 3) | (cf
 322              		.loc 1 47 56 view .LVU96
 323 0088 9DF84230 		ldrb	r3, [sp, #66]	@ zero_extendqisi2
  47:Src/LTC6811.c **** 	config[5] = (uint8_t) ((cfg.DischargeTimeoutValue << 4) & 0xF0) | (cfg.DischargeCell12 << 3) | (cf
 324              		.loc 1 47 50 view .LVU97
 325 008c 46EA8316 		orr	r6, r6, r3, lsl #6
 326 0090 76B2     		sxtb	r6, r6
  47:Src/LTC6811.c **** 	config[5] = (uint8_t) ((cfg.DischargeTimeoutValue << 4) & 0xF0) | (cfg.DischargeCell12 << 3) | (cf
 327              		.loc 1 47 84 view .LVU98
 328 0092 9DF84130 		ldrb	r3, [sp, #65]	@ zero_extendqisi2
  47:Src/LTC6811.c **** 	config[5] = (uint8_t) ((cfg.DischargeTimeoutValue << 4) & 0xF0) | (cfg.DischargeCell12 << 3) | (cf
 329              		.loc 1 47 78 view .LVU99
 330 0096 46EA4316 		orr	r6, r6, r3, lsl #5
 331 009a 76B2     		sxtb	r6, r6
  47:Src/LTC6811.c **** 	config[5] = (uint8_t) ((cfg.DischargeTimeoutValue << 4) & 0xF0) | (cfg.DischargeCell12 << 3) | (cf
 332              		.loc 1 47 112 view .LVU100
 333 009c 9DF84030 		ldrb	r3, [sp, #64]	@ zero_extendqisi2
  47:Src/LTC6811.c **** 	config[5] = (uint8_t) ((cfg.DischargeTimeoutValue << 4) & 0xF0) | (cfg.DischargeCell12 << 3) | (cf
 334              		.loc 1 47 106 view .LVU101
 335 00a0 46EA0316 		orr	r6, r6, r3, lsl #4
 336 00a4 76B2     		sxtb	r6, r6
  47:Src/LTC6811.c **** 	config[5] = (uint8_t) ((cfg.DischargeTimeoutValue << 4) & 0xF0) | (cfg.DischargeCell12 << 3) | (cf
 337              		.loc 1 47 140 view .LVU102
 338 00a6 9DF83F30 		ldrb	r3, [sp, #63]	@ zero_extendqisi2
  47:Src/LTC6811.c **** 	config[5] = (uint8_t) ((cfg.DischargeTimeoutValue << 4) & 0xF0) | (cfg.DischargeCell12 << 3) | (cf
 339              		.loc 1 47 134 view .LVU103
 340 00aa 46EAC306 		orr	r6, r6, r3, lsl #3
 341 00ae 76B2     		sxtb	r6, r6
ARM GAS  C:\cygwin64\tmp\ccp74qwu.s 			page 14


  47:Src/LTC6811.c **** 	config[5] = (uint8_t) ((cfg.DischargeTimeoutValue << 4) & 0xF0) | (cfg.DischargeCell12 << 3) | (cf
 342              		.loc 1 47 168 view .LVU104
 343 00b0 9DF83E30 		ldrb	r3, [sp, #62]	@ zero_extendqisi2
  47:Src/LTC6811.c **** 	config[5] = (uint8_t) ((cfg.DischargeTimeoutValue << 4) & 0xF0) | (cfg.DischargeCell12 << 3) | (cf
 344              		.loc 1 47 162 view .LVU105
 345 00b4 46EA8306 		orr	r6, r6, r3, lsl #2
 346 00b8 76B2     		sxtb	r6, r6
  47:Src/LTC6811.c **** 	config[5] = (uint8_t) ((cfg.DischargeTimeoutValue << 4) & 0xF0) | (cfg.DischargeCell12 << 3) | (cf
 347              		.loc 1 47 196 view .LVU106
 348 00ba 9DF83D30 		ldrb	r3, [sp, #61]	@ zero_extendqisi2
  47:Src/LTC6811.c **** 	config[5] = (uint8_t) ((cfg.DischargeTimeoutValue << 4) & 0xF0) | (cfg.DischargeCell12 << 3) | (cf
 349              		.loc 1 47 190 view .LVU107
 350 00be 46EA4306 		orr	r6, r6, r3, lsl #1
 351 00c2 76B2     		sxtb	r6, r6
  47:Src/LTC6811.c **** 	config[5] = (uint8_t) ((cfg.DischargeTimeoutValue << 4) & 0xF0) | (cfg.DischargeCell12 << 3) | (cf
 352              		.loc 1 47 224 view .LVU108
 353 00c4 9DF93C30 		ldrsb	r3, [sp, #60]
  47:Src/LTC6811.c **** 	config[5] = (uint8_t) ((cfg.DischargeTimeoutValue << 4) & 0xF0) | (cfg.DischargeCell12 << 3) | (cf
 354              		.loc 1 47 218 view .LVU109
 355 00c8 1E43     		orrs	r6, r6, r3
 356 00ca F6B2     		uxtb	r6, r6
  48:Src/LTC6811.c **** 	
 357              		.loc 1 48 2 is_stmt 1 view .LVU110
  48:Src/LTC6811.c **** 	
 358              		.loc 1 48 29 is_stmt 0 view .LVU111
 359 00cc 9DF84830 		ldrb	r3, [sp, #72]	@ zero_extendqisi2
  48:Src/LTC6811.c **** 	
 360              		.loc 1 48 52 view .LVU112
 361 00d0 1B01     		lsls	r3, r3, #4
  48:Src/LTC6811.c **** 	
 362              		.loc 1 48 14 view .LVU113
 363 00d2 5BB2     		sxtb	r3, r3
  48:Src/LTC6811.c **** 	
 364              		.loc 1 48 72 view .LVU114
 365 00d4 9DF84720 		ldrb	r2, [sp, #71]	@ zero_extendqisi2
  48:Src/LTC6811.c **** 	
 366              		.loc 1 48 66 view .LVU115
 367 00d8 43EAC203 		orr	r3, r3, r2, lsl #3
 368 00dc 5BB2     		sxtb	r3, r3
  48:Src/LTC6811.c **** 	
 369              		.loc 1 48 101 view .LVU116
 370 00de 9DF84620 		ldrb	r2, [sp, #70]	@ zero_extendqisi2
  48:Src/LTC6811.c **** 	
 371              		.loc 1 48 95 view .LVU117
 372 00e2 43EA8203 		orr	r3, r3, r2, lsl #2
 373 00e6 5BB2     		sxtb	r3, r3
  48:Src/LTC6811.c **** 	
 374              		.loc 1 48 130 view .LVU118
 375 00e8 9DF84520 		ldrb	r2, [sp, #69]	@ zero_extendqisi2
  48:Src/LTC6811.c **** 	
 376              		.loc 1 48 124 view .LVU119
 377 00ec 43EA4203 		orr	r3, r3, r2, lsl #1
 378 00f0 5BB2     		sxtb	r3, r3
  48:Src/LTC6811.c **** 	
 379              		.loc 1 48 159 view .LVU120
 380 00f2 9DF94420 		ldrsb	r2, [sp, #68]
  48:Src/LTC6811.c **** 	
ARM GAS  C:\cygwin64\tmp\ccp74qwu.s 			page 15


 381              		.loc 1 48 153 view .LVU121
 382 00f6 1343     		orrs	r3, r3, r2
 383 00f8 DBB2     		uxtb	r3, r3
 384 00fa 0193     		str	r3, [sp, #4]
  50:Src/LTC6811.c **** 	
 385              		.loc 1 50 2 is_stmt 1 view .LVU122
 386              	.LBB7:
  50:Src/LTC6811.c **** 	
 387              		.loc 1 50 7 view .LVU123
 388              	.LVL26:
  50:Src/LTC6811.c **** 	
 389              		.loc 1 50 15 is_stmt 0 view .LVU124
 390 00fc 0125     		movs	r5, #1
 391              	.LVL27:
 392              	.L20:
  50:Src/LTC6811.c **** 	
 393              		.loc 1 50 2 discriminator 1 view .LVU125
 394 00fe 5545     		cmp	r5, r10
 395 0100 29D8     		bhi	.L23
  52:Src/LTC6811.c **** 		cmd[1] = (uint8_t) (WriteConfigurationRegisterGroup & 0xFF);
 396              		.loc 1 52 3 is_stmt 1 discriminator 3 view .LVU126
  52:Src/LTC6811.c **** 		cmd[1] = (uint8_t) (WriteConfigurationRegisterGroup & 0xFF);
 397              		.loc 1 52 43 is_stmt 0 discriminator 3 view .LVU127
 398 0102 EB00     		lsls	r3, r5, #3
  52:Src/LTC6811.c **** 		cmd[1] = (uint8_t) (WriteConfigurationRegisterGroup & 0xFF);
 399              		.loc 1 52 49 discriminator 3 view .LVU128
 400 0104 03F07803 		and	r3, r3, #120
  52:Src/LTC6811.c **** 		cmd[1] = (uint8_t) (WriteConfigurationRegisterGroup & 0xFF);
 401              		.loc 1 52 12 discriminator 3 view .LVU129
 402 0108 43F08003 		orr	r3, r3, #128
  52:Src/LTC6811.c **** 		cmd[1] = (uint8_t) (WriteConfigurationRegisterGroup & 0xFF);
 403              		.loc 1 52 10 discriminator 3 view .LVU130
 404 010c 2370     		strb	r3, [r4]
  53:Src/LTC6811.c **** 		
 405              		.loc 1 53 3 is_stmt 1 discriminator 3 view .LVU131
  53:Src/LTC6811.c **** 		
 406              		.loc 1 53 10 is_stmt 0 discriminator 3 view .LVU132
 407 010e 0123     		movs	r3, #1
 408 0110 6370     		strb	r3, [r4, #1]
  55:Src/LTC6811.c **** 		
 409              		.loc 1 55 3 is_stmt 1 discriminator 3 view .LVU133
  55:Src/LTC6811.c **** 		
 410              		.loc 1 55 16 is_stmt 0 discriminator 3 view .LVU134
 411 0112 2146     		mov	r1, r4
 412 0114 0220     		movs	r0, #2
 413 0116 FFF7FEFF 		bl	calculatePEC
 414              	.LVL28:
  57:Src/LTC6811.c **** 		cmd[3] = PEC_return & 0xFF;
 415              		.loc 1 57 3 is_stmt 1 discriminator 3 view .LVU135
  57:Src/LTC6811.c **** 		cmd[3] = PEC_return & 0xFF;
 416              		.loc 1 57 10 is_stmt 0 discriminator 3 view .LVU136
 417 011a 030A     		lsrs	r3, r0, #8
 418 011c A370     		strb	r3, [r4, #2]
  58:Src/LTC6811.c **** 	
 419              		.loc 1 58 3 is_stmt 1 discriminator 3 view .LVU137
  58:Src/LTC6811.c **** 	
 420              		.loc 1 58 10 is_stmt 0 discriminator 3 view .LVU138
ARM GAS  C:\cygwin64\tmp\ccp74qwu.s 			page 16


 421 011e E070     		strb	r0, [r4, #3]
  60:Src/LTC6811.c **** 		cmd[5] = config[1];
 422              		.loc 1 60 3 is_stmt 1 discriminator 3 view .LVU139
  60:Src/LTC6811.c **** 		cmd[5] = config[1];
 423              		.loc 1 60 10 is_stmt 0 discriminator 3 view .LVU140
 424 0120 2771     		strb	r7, [r4, #4]
  61:Src/LTC6811.c **** 		cmd[6] = config[2];
 425              		.loc 1 61 3 is_stmt 1 discriminator 3 view .LVU141
  61:Src/LTC6811.c **** 		cmd[6] = config[2];
 426              		.loc 1 61 10 is_stmt 0 discriminator 3 view .LVU142
 427 0122 84F805B0 		strb	fp, [r4, #5]
  62:Src/LTC6811.c **** 		cmd[7] = config[3];
 428              		.loc 1 62 3 is_stmt 1 discriminator 3 view .LVU143
  62:Src/LTC6811.c **** 		cmd[7] = config[3];
 429              		.loc 1 62 10 is_stmt 0 discriminator 3 view .LVU144
 430 0126 84F80680 		strb	r8, [r4, #6]
  63:Src/LTC6811.c **** 		cmd[8] = config[4];
 431              		.loc 1 63 3 is_stmt 1 discriminator 3 view .LVU145
  63:Src/LTC6811.c **** 		cmd[8] = config[4];
 432              		.loc 1 63 10 is_stmt 0 discriminator 3 view .LVU146
 433 012a 84F80790 		strb	r9, [r4, #7]
  64:Src/LTC6811.c **** 		cmd[9] = config[5];
 434              		.loc 1 64 3 is_stmt 1 discriminator 3 view .LVU147
  64:Src/LTC6811.c **** 		cmd[9] = config[5];
 435              		.loc 1 64 10 is_stmt 0 discriminator 3 view .LVU148
 436 012e 2672     		strb	r6, [r4, #8]
  65:Src/LTC6811.c **** 		
 437              		.loc 1 65 3 is_stmt 1 discriminator 3 view .LVU149
  65:Src/LTC6811.c **** 		
 438              		.loc 1 65 10 is_stmt 0 discriminator 3 view .LVU150
 439 0130 019B     		ldr	r3, [sp, #4]
 440 0132 6372     		strb	r3, [r4, #9]
  67:Src/LTC6811.c **** 	
 441              		.loc 1 67 3 is_stmt 1 discriminator 3 view .LVU151
  67:Src/LTC6811.c **** 	
 442              		.loc 1 67 16 is_stmt 0 discriminator 3 view .LVU152
 443 0134 211D     		adds	r1, r4, #4
 444 0136 0620     		movs	r0, #6
 445              	.LVL29:
  67:Src/LTC6811.c **** 	
 446              		.loc 1 67 16 discriminator 3 view .LVU153
 447 0138 FFF7FEFF 		bl	calculatePEC
 448              	.LVL30:
  69:Src/LTC6811.c **** 		cmd[11] = PEC_return & 0xFF;
 449              		.loc 1 69 3 is_stmt 1 discriminator 3 view .LVU154
  69:Src/LTC6811.c **** 		cmd[11] = PEC_return & 0xFF;
 450              		.loc 1 69 11 is_stmt 0 discriminator 3 view .LVU155
 451 013c 030A     		lsrs	r3, r0, #8
 452 013e A372     		strb	r3, [r4, #10]
  70:Src/LTC6811.c **** 		
 453              		.loc 1 70 3 is_stmt 1 discriminator 3 view .LVU156
  70:Src/LTC6811.c **** 		
 454              		.loc 1 70 11 is_stmt 0 discriminator 3 view .LVU157
 455 0140 E072     		strb	r0, [r4, #11]
  72:Src/LTC6811.c **** 		
 456              		.loc 1 72 3 is_stmt 1 discriminator 3 view .LVU158
 457 0142 0C21     		movs	r1, #12
ARM GAS  C:\cygwin64\tmp\ccp74qwu.s 			page 17


 458 0144 2046     		mov	r0, r4
 459              	.LVL31:
  72:Src/LTC6811.c **** 		
 460              		.loc 1 72 3 is_stmt 0 discriminator 3 view .LVU159
 461 0146 FFF7FEFF 		bl	SPIWrite
 462              	.LVL32:
  74:Src/LTC6811.c **** 	}
 463              		.loc 1 74 3 is_stmt 1 discriminator 3 view .LVU160
 464 014a 6420     		movs	r0, #100
 465 014c FFF7FEFF 		bl	HAL_Delay
 466              	.LVL33:
  50:Src/LTC6811.c **** 	
 467              		.loc 1 50 65 is_stmt 0 discriminator 3 view .LVU161
 468 0150 0135     		adds	r5, r5, #1
 469              	.LVL34:
  50:Src/LTC6811.c **** 	
 470              		.loc 1 50 65 discriminator 3 view .LVU162
 471 0152 EDB2     		uxtb	r5, r5
 472              	.LVL35:
  50:Src/LTC6811.c **** 	
 473              		.loc 1 50 65 discriminator 3 view .LVU163
 474 0154 D3E7     		b	.L20
 475              	.L23:
  50:Src/LTC6811.c **** 	
 476              		.loc 1 50 65 discriminator 3 view .LVU164
 477              	.LBE7:
  77:Src/LTC6811.c **** 	
 478              		.loc 1 77 2 is_stmt 1 view .LVU165
 479 0156 2046     		mov	r0, r4
 480 0158 FFF7FEFF 		bl	free
 481              	.LVL36:
  79:Src/LTC6811.c **** 
 482              		.loc 1 79 1 is_stmt 0 view .LVU166
 483 015c 03B0     		add	sp, sp, #12
 484              	.LCFI5:
 485              		.cfi_def_cfa_offset 52
 486              		@ sp needed
 487 015e BDE8F04F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 488              	.LCFI6:
 489              		.cfi_restore 14
 490              		.cfi_restore 11
 491              		.cfi_restore 10
 492              		.cfi_restore 9
 493              		.cfi_restore 8
 494              		.cfi_restore 7
 495              		.cfi_restore 6
 496              		.cfi_restore 5
 497              		.cfi_restore 4
 498              		.cfi_def_cfa_offset 16
 499              	.LVL37:
  79:Src/LTC6811.c **** 
 500              		.loc 1 79 1 view .LVU167
 501 0162 04B0     		add	sp, sp, #16
 502              	.LCFI7:
 503              		.cfi_def_cfa_offset 0
 504 0164 7047     		bx	lr
 505              		.cfi_endproc
ARM GAS  C:\cygwin64\tmp\ccp74qwu.s 			page 18


 506              	.LFE67:
 508              		.section	.text.sendBroadcastCommand,"ax",%progbits
 509              		.align	1
 510              		.global	sendBroadcastCommand
 511              		.syntax unified
 512              		.thumb
 513              		.thumb_func
 514              		.fpu softvfp
 516              	sendBroadcastCommand:
 517              	.LVL38:
 518              	.LFB69:
 284:Src/LTC6811.c **** 	
 519              		.loc 1 284 55 is_stmt 1 view -0
 520              		.cfi_startproc
 521              		@ args = 0, pretend = 0, frame = 8
 522              		@ frame_needed = 0, uses_anonymous_args = 0
 284:Src/LTC6811.c **** 	
 523              		.loc 1 284 55 is_stmt 0 view .LVU169
 524 0000 00B5     		push	{lr}
 525              	.LCFI8:
 526              		.cfi_def_cfa_offset 4
 527              		.cfi_offset 14, -4
 528 0002 83B0     		sub	sp, sp, #12
 529              	.LCFI9:
 530              		.cfi_def_cfa_offset 16
 286:Src/LTC6811.c **** 	uint16_t PEC_return;
 531              		.loc 1 286 2 is_stmt 1 view .LVU170
 287:Src/LTC6811.c **** 	
 532              		.loc 1 287 2 view .LVU171
 289:Src/LTC6811.c **** 	cmd[1] = (uint8_t) (command & 0xFF);
 533              		.loc 1 289 2 view .LVU172
 289:Src/LTC6811.c **** 	cmd[1] = (uint8_t) (command & 0xFF);
 534              		.loc 1 289 11 is_stmt 0 view .LVU173
 535 0004 C0F30323 		ubfx	r3, r0, #8, #4
 289:Src/LTC6811.c **** 	cmd[1] = (uint8_t) (command & 0xFF);
 536              		.loc 1 289 9 view .LVU174
 537 0008 8DF80430 		strb	r3, [sp, #4]
 290:Src/LTC6811.c **** 	
 538              		.loc 1 290 2 is_stmt 1 view .LVU175
 290:Src/LTC6811.c **** 	
 539              		.loc 1 290 9 is_stmt 0 view .LVU176
 540 000c 8DF80500 		strb	r0, [sp, #5]
 292:Src/LTC6811.c **** 	
 541              		.loc 1 292 2 is_stmt 1 view .LVU177
 292:Src/LTC6811.c **** 	
 542              		.loc 1 292 15 is_stmt 0 view .LVU178
 543 0010 01A9     		add	r1, sp, #4
 544 0012 0220     		movs	r0, #2
 545              	.LVL39:
 292:Src/LTC6811.c **** 	
 546              		.loc 1 292 15 view .LVU179
 547 0014 FFF7FEFF 		bl	calculatePEC
 548              	.LVL40:
 294:Src/LTC6811.c **** 	cmd[3] = PEC_return & 0xFF;
 549              		.loc 1 294 2 is_stmt 1 view .LVU180
 294:Src/LTC6811.c **** 	cmd[3] = PEC_return & 0xFF;
 550              		.loc 1 294 9 is_stmt 0 view .LVU181
ARM GAS  C:\cygwin64\tmp\ccp74qwu.s 			page 19


 551 0018 030A     		lsrs	r3, r0, #8
 552 001a 8DF80630 		strb	r3, [sp, #6]
 295:Src/LTC6811.c **** 	
 553              		.loc 1 295 2 is_stmt 1 view .LVU182
 295:Src/LTC6811.c **** 	
 554              		.loc 1 295 9 is_stmt 0 view .LVU183
 555 001e 8DF80700 		strb	r0, [sp, #7]
 297:Src/LTC6811.c **** };
 556              		.loc 1 297 2 is_stmt 1 view .LVU184
 557 0022 0421     		movs	r1, #4
 558 0024 0DEB0100 		add	r0, sp, r1
 559              	.LVL41:
 297:Src/LTC6811.c **** };
 560              		.loc 1 297 2 is_stmt 0 view .LVU185
 561 0028 FFF7FEFF 		bl	SPIWrite
 562              	.LVL42:
 298:Src/LTC6811.c **** 
 563              		.loc 1 298 1 view .LVU186
 564 002c 03B0     		add	sp, sp, #12
 565              	.LCFI10:
 566              		.cfi_def_cfa_offset 4
 567              		@ sp needed
 568 002e 5DF804FB 		ldr	pc, [sp], #4
 569              		.cfi_endproc
 570              	.LFE69:
 572              		.section	.text.sendAddressCommand,"ax",%progbits
 573              		.align	1
 574              		.global	sendAddressCommand
 575              		.syntax unified
 576              		.thumb
 577              		.thumb_func
 578              		.fpu softvfp
 580              	sendAddressCommand:
 581              	.LVL43:
 582              	.LFB70:
 300:Src/LTC6811.c **** 	
 583              		.loc 1 300 70 is_stmt 1 view -0
 584              		.cfi_startproc
 585              		@ args = 0, pretend = 0, frame = 8
 586              		@ frame_needed = 0, uses_anonymous_args = 0
 300:Src/LTC6811.c **** 	
 587              		.loc 1 300 70 is_stmt 0 view .LVU188
 588 0000 70B5     		push	{r4, r5, r6, lr}
 589              	.LCFI11:
 590              		.cfi_def_cfa_offset 16
 591              		.cfi_offset 4, -16
 592              		.cfi_offset 5, -12
 593              		.cfi_offset 6, -8
 594              		.cfi_offset 14, -4
 595 0002 82B0     		sub	sp, sp, #8
 596              	.LCFI12:
 597              		.cfi_def_cfa_offset 24
 598 0004 0546     		mov	r5, r0
 599 0006 0C46     		mov	r4, r1
 302:Src/LTC6811.c **** 	uint16_t PEC_return;
 600              		.loc 1 302 2 is_stmt 1 view .LVU189
 303:Src/LTC6811.c **** 	uint8_t *msbytes;
ARM GAS  C:\cygwin64\tmp\ccp74qwu.s 			page 20


 601              		.loc 1 303 2 view .LVU190
 304:Src/LTC6811.c **** 	
 602              		.loc 1 304 2 view .LVU191
 306:Src/LTC6811.c **** 	
 603              		.loc 1 306 2 view .LVU192
 306:Src/LTC6811.c **** 	
 604              		.loc 1 306 23 is_stmt 0 view .LVU193
 605 0008 0220     		movs	r0, #2
 606              	.LVL44:
 306:Src/LTC6811.c **** 	
 607              		.loc 1 306 23 view .LVU194
 608 000a FFF7FEFF 		bl	malloc
 609              	.LVL45:
 306:Src/LTC6811.c **** 	
 610              		.loc 1 306 23 view .LVU195
 611 000e 0646     		mov	r6, r0
 612              	.LVL46:
 308:Src/LTC6811.c **** 	msbytes[1] = (uint8_t) (command & 0xFF);
 613              		.loc 1 308 2 is_stmt 1 view .LVU196
 308:Src/LTC6811.c **** 	msbytes[1] = (uint8_t) (command & 0xFF);
 614              		.loc 1 308 43 is_stmt 0 view .LVU197
 615 0010 E300     		lsls	r3, r4, #3
 308:Src/LTC6811.c **** 	msbytes[1] = (uint8_t) (command & 0xFF);
 616              		.loc 1 308 49 view .LVU198
 617 0012 03F07803 		and	r3, r3, #120
 308:Src/LTC6811.c **** 	msbytes[1] = (uint8_t) (command & 0xFF);
 618              		.loc 1 308 31 view .LVU199
 619 0016 63F07F03 		orn	r3, r3, #127
 308:Src/LTC6811.c **** 	msbytes[1] = (uint8_t) (command & 0xFF);
 620              		.loc 1 308 75 view .LVU200
 621 001a C5F30224 		ubfx	r4, r5, #8, #3
 308:Src/LTC6811.c **** 	msbytes[1] = (uint8_t) (command & 0xFF);
 622              		.loc 1 308 57 view .LVU201
 623 001e 2343     		orrs	r3, r3, r4
 308:Src/LTC6811.c **** 	msbytes[1] = (uint8_t) (command & 0xFF);
 624              		.loc 1 308 15 view .LVU202
 625 0020 DBB2     		uxtb	r3, r3
 308:Src/LTC6811.c **** 	msbytes[1] = (uint8_t) (command & 0xFF);
 626              		.loc 1 308 13 view .LVU203
 627 0022 0370     		strb	r3, [r0]
 309:Src/LTC6811.c **** 
 628              		.loc 1 309 2 is_stmt 1 view .LVU204
 309:Src/LTC6811.c **** 
 629              		.loc 1 309 15 is_stmt 0 view .LVU205
 630 0024 EDB2     		uxtb	r5, r5
 309:Src/LTC6811.c **** 
 631              		.loc 1 309 13 view .LVU206
 632 0026 4570     		strb	r5, [r0, #1]
 311:Src/LTC6811.c **** 	cmd[1] = msbytes[1];
 633              		.loc 1 311 2 is_stmt 1 view .LVU207
 311:Src/LTC6811.c **** 	cmd[1] = msbytes[1];
 634              		.loc 1 311 9 is_stmt 0 view .LVU208
 635 0028 8DF80430 		strb	r3, [sp, #4]
 312:Src/LTC6811.c **** 	
 636              		.loc 1 312 2 is_stmt 1 view .LVU209
 312:Src/LTC6811.c **** 	
 637              		.loc 1 312 9 is_stmt 0 view .LVU210
ARM GAS  C:\cygwin64\tmp\ccp74qwu.s 			page 21


 638 002c 8DF80550 		strb	r5, [sp, #5]
 314:Src/LTC6811.c **** 	
 639              		.loc 1 314 2 is_stmt 1 view .LVU211
 314:Src/LTC6811.c **** 	
 640              		.loc 1 314 15 is_stmt 0 view .LVU212
 641 0030 0146     		mov	r1, r0
 642 0032 0220     		movs	r0, #2
 643              	.LVL47:
 314:Src/LTC6811.c **** 	
 644              		.loc 1 314 15 view .LVU213
 645 0034 FFF7FEFF 		bl	calculatePEC
 646              	.LVL48:
 316:Src/LTC6811.c **** 	cmd[3] = PEC_return & 0xFF;
 647              		.loc 1 316 2 is_stmt 1 view .LVU214
 316:Src/LTC6811.c **** 	cmd[3] = PEC_return & 0xFF;
 648              		.loc 1 316 9 is_stmt 0 view .LVU215
 649 0038 030A     		lsrs	r3, r0, #8
 650 003a 8DF80630 		strb	r3, [sp, #6]
 317:Src/LTC6811.c **** 	
 651              		.loc 1 317 2 is_stmt 1 view .LVU216
 317:Src/LTC6811.c **** 	
 652              		.loc 1 317 9 is_stmt 0 view .LVU217
 653 003e 8DF80700 		strb	r0, [sp, #7]
 319:Src/LTC6811.c **** 	
 654              		.loc 1 319 2 is_stmt 1 view .LVU218
 655 0042 0421     		movs	r1, #4
 656 0044 0DEB0100 		add	r0, sp, r1
 657              	.LVL49:
 319:Src/LTC6811.c **** 	
 658              		.loc 1 319 2 is_stmt 0 view .LVU219
 659 0048 FFF7FEFF 		bl	SPIWrite
 660              	.LVL50:
 321:Src/LTC6811.c **** };
 661              		.loc 1 321 2 is_stmt 1 view .LVU220
 662 004c 3046     		mov	r0, r6
 663 004e FFF7FEFF 		bl	free
 664              	.LVL51:
 322:Src/LTC6811.c **** 
 665              		.loc 1 322 1 is_stmt 0 view .LVU221
 666 0052 02B0     		add	sp, sp, #8
 667              	.LCFI13:
 668              		.cfi_def_cfa_offset 16
 669              		@ sp needed
 670 0054 70BD     		pop	{r4, r5, r6, pc}
 322:Src/LTC6811.c **** 
 671              		.loc 1 322 1 view .LVU222
 672              		.cfi_endproc
 673              	.LFE70:
 675              		.section	.text.readCellVoltage,"ax",%progbits
 676              		.align	1
 677              		.global	readCellVoltage
 678              		.syntax unified
 679              		.thumb
 680              		.thumb_func
 681              		.fpu softvfp
 683              	readCellVoltage:
 684              	.LVL52:
ARM GAS  C:\cygwin64\tmp\ccp74qwu.s 			page 22


 685              	.LFB68:
  81:Src/LTC6811.c **** 	
 686              		.loc 1 81 64 is_stmt 1 view -0
 687              		.cfi_startproc
 688              		@ args = 0, pretend = 0, frame = 24
 689              		@ frame_needed = 0, uses_anonymous_args = 0
  81:Src/LTC6811.c **** 	
 690              		.loc 1 81 64 is_stmt 0 view .LVU224
 691 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 692              	.LCFI14:
 693              		.cfi_def_cfa_offset 20
 694              		.cfi_offset 4, -20
 695              		.cfi_offset 5, -16
 696              		.cfi_offset 6, -12
 697              		.cfi_offset 7, -8
 698              		.cfi_offset 14, -4
 699 0002 87B0     		sub	sp, sp, #28
 700              	.LCFI15:
 701              		.cfi_def_cfa_offset 48
 702 0004 0646     		mov	r6, r0
 703 0006 0F46     		mov	r7, r1
  83:Src/LTC6811.c **** 	uint8_t rx_data[12];
 704              		.loc 1 83 2 is_stmt 1 view .LVU225
  84:Src/LTC6811.c **** 	uint16_t PEC_return;
 705              		.loc 1 84 2 view .LVU226
  85:Src/LTC6811.c **** 	uint8_t *PEC_send;
 706              		.loc 1 85 2 view .LVU227
  86:Src/LTC6811.c **** 	bool dataValid = true;
 707              		.loc 1 86 2 view .LVU228
  87:Src/LTC6811.c **** 	
 708              		.loc 1 87 2 view .LVU229
 709              	.LVL53:
  89:Src/LTC6811.c **** 
 710              		.loc 1 89 2 view .LVU230
 711 0008 0146     		mov	r1, r0
 712              	.LVL54:
  89:Src/LTC6811.c **** 
 713              		.loc 1 89 2 is_stmt 0 view .LVU231
 714 000a 4FF41870 		mov	r0, #608
 715              	.LVL55:
  89:Src/LTC6811.c **** 
 716              		.loc 1 89 2 view .LVU232
 717 000e FFF7FEFF 		bl	sendAddressCommand
 718              	.LVL56:
  91:Src/LTC6811.c **** 
 719              		.loc 1 91 2 is_stmt 1 view .LVU233
 720 0012 0F20     		movs	r0, #15
 721 0014 FFF7FEFF 		bl	HAL_Delay
 722              	.LVL57:
  94:Src/LTC6811.c **** 	
 723              		.loc 1 94 2 view .LVU234
  94:Src/LTC6811.c **** 	
 724              		.loc 1 94 24 is_stmt 0 view .LVU235
 725 0018 0620     		movs	r0, #6
 726 001a FFF7FEFF 		bl	malloc
 727              	.LVL58:
 728 001e 0546     		mov	r5, r0
ARM GAS  C:\cygwin64\tmp\ccp74qwu.s 			page 23


 729              	.LVL59:
  96:Src/LTC6811.c **** 	PEC_send[1] = (uint8_t) (ReadCellVoltageRegisterGroup1to3 & 0xFF);
 730              		.loc 1 96 2 is_stmt 1 view .LVU236
  96:Src/LTC6811.c **** 	PEC_send[1] = (uint8_t) (ReadCellVoltageRegisterGroup1to3 & 0xFF);
 731              		.loc 1 96 44 is_stmt 0 view .LVU237
 732 0020 F600     		lsls	r6, r6, #3
  96:Src/LTC6811.c **** 	PEC_send[1] = (uint8_t) (ReadCellVoltageRegisterGroup1to3 & 0xFF);
 733              		.loc 1 96 50 view .LVU238
 734 0022 06F07806 		and	r6, r6, #120
  96:Src/LTC6811.c **** 	PEC_send[1] = (uint8_t) (ReadCellVoltageRegisterGroup1to3 & 0xFF);
 735              		.loc 1 96 16 view .LVU239
 736 0026 46F08006 		orr	r6, r6, #128
  96:Src/LTC6811.c **** 	PEC_send[1] = (uint8_t) (ReadCellVoltageRegisterGroup1to3 & 0xFF);
 737              		.loc 1 96 14 view .LVU240
 738 002a 0670     		strb	r6, [r0]
  97:Src/LTC6811.c **** 
 739              		.loc 1 97 2 is_stmt 1 view .LVU241
  97:Src/LTC6811.c **** 
 740              		.loc 1 97 14 is_stmt 0 view .LVU242
 741 002c 0423     		movs	r3, #4
 742 002e 4370     		strb	r3, [r0, #1]
  99:Src/LTC6811.c **** 	cmd[1] = PEC_send[1];
 743              		.loc 1 99 2 is_stmt 1 view .LVU243
  99:Src/LTC6811.c **** 	cmd[1] = PEC_send[1];
 744              		.loc 1 99 9 is_stmt 0 view .LVU244
 745 0030 8DF80C60 		strb	r6, [sp, #12]
 100:Src/LTC6811.c **** 	
 746              		.loc 1 100 2 is_stmt 1 view .LVU245
 100:Src/LTC6811.c **** 	
 747              		.loc 1 100 9 is_stmt 0 view .LVU246
 748 0034 8DF80D30 		strb	r3, [sp, #13]
 102:Src/LTC6811.c **** 	
 749              		.loc 1 102 2 is_stmt 1 view .LVU247
 102:Src/LTC6811.c **** 	
 750              		.loc 1 102 15 is_stmt 0 view .LVU248
 751 0038 0146     		mov	r1, r0
 752 003a 0220     		movs	r0, #2
 753              	.LVL60:
 102:Src/LTC6811.c **** 	
 754              		.loc 1 102 15 view .LVU249
 755 003c FFF7FEFF 		bl	calculatePEC
 756              	.LVL61:
 104:Src/LTC6811.c **** 	cmd[3] = PEC_return & 0xFF;
 757              		.loc 1 104 2 is_stmt 1 view .LVU250
 104:Src/LTC6811.c **** 	cmd[3] = PEC_return & 0xFF;
 758              		.loc 1 104 9 is_stmt 0 view .LVU251
 759 0040 030A     		lsrs	r3, r0, #8
 760 0042 8DF80E30 		strb	r3, [sp, #14]
 105:Src/LTC6811.c **** 	
 761              		.loc 1 105 2 is_stmt 1 view .LVU252
 105:Src/LTC6811.c **** 	
 762              		.loc 1 105 9 is_stmt 0 view .LVU253
 763 0046 8DF80F00 		strb	r0, [sp, #15]
 107:Src/LTC6811.c **** 	cmd[5] = 0;
 764              		.loc 1 107 2 is_stmt 1 view .LVU254
 107:Src/LTC6811.c **** 	cmd[5] = 0;
 765              		.loc 1 107 9 is_stmt 0 view .LVU255
ARM GAS  C:\cygwin64\tmp\ccp74qwu.s 			page 24


 766 004a 0024     		movs	r4, #0
 767 004c 8DF81040 		strb	r4, [sp, #16]
 108:Src/LTC6811.c **** 	cmd[6] = 0;
 768              		.loc 1 108 2 is_stmt 1 view .LVU256
 108:Src/LTC6811.c **** 	cmd[6] = 0;
 769              		.loc 1 108 9 is_stmt 0 view .LVU257
 770 0050 8DF81140 		strb	r4, [sp, #17]
 109:Src/LTC6811.c **** 	cmd[7] = 0;
 771              		.loc 1 109 2 is_stmt 1 view .LVU258
 109:Src/LTC6811.c **** 	cmd[7] = 0;
 772              		.loc 1 109 9 is_stmt 0 view .LVU259
 773 0054 8DF81240 		strb	r4, [sp, #18]
 110:Src/LTC6811.c **** 	cmd[8] = 0;
 774              		.loc 1 110 2 is_stmt 1 view .LVU260
 110:Src/LTC6811.c **** 	cmd[8] = 0;
 775              		.loc 1 110 9 is_stmt 0 view .LVU261
 776 0058 8DF81340 		strb	r4, [sp, #19]
 111:Src/LTC6811.c **** 	cmd[9] = 0;
 777              		.loc 1 111 2 is_stmt 1 view .LVU262
 111:Src/LTC6811.c **** 	cmd[9] = 0;
 778              		.loc 1 111 9 is_stmt 0 view .LVU263
 779 005c 8DF81440 		strb	r4, [sp, #20]
 112:Src/LTC6811.c **** 	cmd[10] = 0;
 780              		.loc 1 112 2 is_stmt 1 view .LVU264
 112:Src/LTC6811.c **** 	cmd[10] = 0;
 781              		.loc 1 112 9 is_stmt 0 view .LVU265
 782 0060 8DF81540 		strb	r4, [sp, #21]
 113:Src/LTC6811.c **** 	cmd[11] = 0;
 783              		.loc 1 113 2 is_stmt 1 view .LVU266
 113:Src/LTC6811.c **** 	cmd[11] = 0;
 784              		.loc 1 113 10 is_stmt 0 view .LVU267
 785 0064 8DF81640 		strb	r4, [sp, #22]
 114:Src/LTC6811.c **** 	
 786              		.loc 1 114 2 is_stmt 1 view .LVU268
 114:Src/LTC6811.c **** 	
 787              		.loc 1 114 10 is_stmt 0 view .LVU269
 788 0068 8DF81740 		strb	r4, [sp, #23]
 116:Src/LTC6811.c **** 	
 789              		.loc 1 116 2 is_stmt 1 view .LVU270
 790 006c 0C22     		movs	r2, #12
 791 006e 6946     		mov	r1, sp
 792 0070 0DEB0200 		add	r0, sp, r2
 793              	.LVL62:
 116:Src/LTC6811.c **** 	
 794              		.loc 1 116 2 is_stmt 0 view .LVU271
 795 0074 FFF7FEFF 		bl	SPIWriteRead
 796              	.LVL63:
 126:Src/LTC6811.c **** 	PEC_send[1] = rx_data[5]; // cell 1 voltage high bytes
 797              		.loc 1 126 2 is_stmt 1 view .LVU272
 127:Src/LTC6811.c **** 	PEC_send[2] = rx_data[6]; // cell 2 voltage low bytes
 798              		.loc 1 127 2 view .LVU273
 127:Src/LTC6811.c **** 	PEC_send[2] = rx_data[6]; // cell 2 voltage low bytes
 799              		.loc 1 127 23 is_stmt 0 view .LVU274
 800 0078 9DF80530 		ldrb	r3, [sp, #5]	@ zero_extendqisi2
 128:Src/LTC6811.c **** 	PEC_send[3] = rx_data[7]; // cell 2 voltage high bytes
 801              		.loc 1 128 2 is_stmt 1 view .LVU275
 128:Src/LTC6811.c **** 	PEC_send[3] = rx_data[7]; // cell 2 voltage high bytes
ARM GAS  C:\cygwin64\tmp\ccp74qwu.s 			page 25


 802              		.loc 1 128 23 is_stmt 0 view .LVU276
 803 007c 9DF806C0 		ldrb	ip, [sp, #6]	@ zero_extendqisi2
 128:Src/LTC6811.c **** 	PEC_send[3] = rx_data[7]; // cell 2 voltage high bytes
 804              		.loc 1 128 14 view .LVU277
 805 0080 85F802C0 		strb	ip, [r5, #2]
 129:Src/LTC6811.c **** 	PEC_send[4] = rx_data[8]; // cell 3 voltage low bytes
 806              		.loc 1 129 2 is_stmt 1 view .LVU278
 129:Src/LTC6811.c **** 	PEC_send[4] = rx_data[8]; // cell 3 voltage low bytes
 807              		.loc 1 129 23 is_stmt 0 view .LVU279
 808 0084 9DF80710 		ldrb	r1, [sp, #7]	@ zero_extendqisi2
 129:Src/LTC6811.c **** 	PEC_send[4] = rx_data[8]; // cell 3 voltage low bytes
 809              		.loc 1 129 14 view .LVU280
 810 0088 E970     		strb	r1, [r5, #3]
 130:Src/LTC6811.c **** 	PEC_send[5] = rx_data[9]; // cell 3 voltage high bytes
 811              		.loc 1 130 2 is_stmt 1 view .LVU281
 130:Src/LTC6811.c **** 	PEC_send[5] = rx_data[9]; // cell 3 voltage high bytes
 812              		.loc 1 130 23 is_stmt 0 view .LVU282
 813 008a 9DF80800 		ldrb	r0, [sp, #8]	@ zero_extendqisi2
 130:Src/LTC6811.c **** 	PEC_send[5] = rx_data[9]; // cell 3 voltage high bytes
 814              		.loc 1 130 14 view .LVU283
 815 008e 2871     		strb	r0, [r5, #4]
 131:Src/LTC6811.c **** 	
 816              		.loc 1 131 2 is_stmt 1 view .LVU284
 131:Src/LTC6811.c **** 	
 817              		.loc 1 131 23 is_stmt 0 view .LVU285
 818 0090 9DF80920 		ldrb	r2, [sp, #9]	@ zero_extendqisi2
 131:Src/LTC6811.c **** 	
 819              		.loc 1 131 14 view .LVU286
 820 0094 6A71     		strb	r2, [r5, #5]
 133:Src/LTC6811.c **** 	
 821              		.loc 1 133 2 is_stmt 1 view .LVU287
 141:Src/LTC6811.c **** 		cellVoltage[0] = (uint16_t) ((rx_data[5] << 8) & 0xFF00) | (rx_data[4] & 0x00FF); // cell 1 volta
 822              		.loc 1 141 2 view .LVU288
 142:Src/LTC6811.c **** 		cellVoltage[1] = (uint16_t) ((rx_data[7] << 8) & 0xFF00) | (rx_data[6] & 0x00FF); // cell 2 volta
 823              		.loc 1 142 3 view .LVU289
 142:Src/LTC6811.c **** 		cellVoltage[1] = (uint16_t) ((rx_data[7] << 8) & 0xFF00) | (rx_data[6] & 0x00FF); // cell 2 volta
 824              		.loc 1 142 44 is_stmt 0 view .LVU290
 825 0096 1B02     		lsls	r3, r3, #8
 142:Src/LTC6811.c **** 		cellVoltage[1] = (uint16_t) ((rx_data[7] << 8) & 0xFF00) | (rx_data[6] & 0x00FF); // cell 2 volta
 826              		.loc 1 142 20 view .LVU291
 827 0098 1BB2     		sxth	r3, r3
 142:Src/LTC6811.c **** 		cellVoltage[1] = (uint16_t) ((rx_data[7] << 8) & 0xFF00) | (rx_data[6] & 0x00FF); // cell 2 volta
 828              		.loc 1 142 70 view .LVU292
 829 009a 9DF804E0 		ldrb	lr, [sp, #4]	@ zero_extendqisi2
 142:Src/LTC6811.c **** 		cellVoltage[1] = (uint16_t) ((rx_data[7] << 8) & 0xFF00) | (rx_data[6] & 0x00FF); // cell 2 volta
 830              		.loc 1 142 60 view .LVU293
 831 009e 43EA0E03 		orr	r3, r3, lr
 142:Src/LTC6811.c **** 		cellVoltage[1] = (uint16_t) ((rx_data[7] << 8) & 0xFF00) | (rx_data[6] & 0x00FF); // cell 2 volta
 832              		.loc 1 142 18 view .LVU294
 833 00a2 3B80     		strh	r3, [r7]	@ movhi
 143:Src/LTC6811.c **** 		cellVoltage[2] = (uint16_t) ((rx_data[9] << 8) & 0xFF00) | (rx_data[8] & 0x00FF); // cell 3 volta
 834              		.loc 1 143 3 is_stmt 1 view .LVU295
 143:Src/LTC6811.c **** 		cellVoltage[2] = (uint16_t) ((rx_data[9] << 8) & 0xFF00) | (rx_data[8] & 0x00FF); // cell 3 volta
 835              		.loc 1 143 44 is_stmt 0 view .LVU296
 836 00a4 0902     		lsls	r1, r1, #8
 143:Src/LTC6811.c **** 		cellVoltage[2] = (uint16_t) ((rx_data[9] << 8) & 0xFF00) | (rx_data[8] & 0x00FF); // cell 3 volta
 837              		.loc 1 143 20 view .LVU297
ARM GAS  C:\cygwin64\tmp\ccp74qwu.s 			page 26


 838 00a6 09B2     		sxth	r1, r1
 143:Src/LTC6811.c **** 		cellVoltage[2] = (uint16_t) ((rx_data[9] << 8) & 0xFF00) | (rx_data[8] & 0x00FF); // cell 3 volta
 839              		.loc 1 143 60 view .LVU298
 840 00a8 4CEA0101 		orr	r1, ip, r1
 143:Src/LTC6811.c **** 		cellVoltage[2] = (uint16_t) ((rx_data[9] << 8) & 0xFF00) | (rx_data[8] & 0x00FF); // cell 3 volta
 841              		.loc 1 143 18 view .LVU299
 842 00ac 7980     		strh	r1, [r7, #2]	@ movhi
 144:Src/LTC6811.c **** 	}
 843              		.loc 1 144 3 is_stmt 1 view .LVU300
 144:Src/LTC6811.c **** 	}
 844              		.loc 1 144 44 is_stmt 0 view .LVU301
 845 00ae 1202     		lsls	r2, r2, #8
 144:Src/LTC6811.c **** 	}
 846              		.loc 1 144 20 view .LVU302
 847 00b0 12B2     		sxth	r2, r2
 144:Src/LTC6811.c **** 	}
 848              		.loc 1 144 60 view .LVU303
 849 00b2 0243     		orrs	r2, r2, r0
 144:Src/LTC6811.c **** 	}
 850              		.loc 1 144 18 view .LVU304
 851 00b4 BA80     		strh	r2, [r7, #4]	@ movhi
 148:Src/LTC6811.c **** 	PEC_send[1] = (uint8_t) (ReadCellVoltageRegisterGroup4to6 & 0xFF);
 852              		.loc 1 148 2 is_stmt 1 view .LVU305
 148:Src/LTC6811.c **** 	PEC_send[1] = (uint8_t) (ReadCellVoltageRegisterGroup4to6 & 0xFF);
 853              		.loc 1 148 14 is_stmt 0 view .LVU306
 854 00b6 2E70     		strb	r6, [r5]
 149:Src/LTC6811.c **** 
 855              		.loc 1 149 2 is_stmt 1 view .LVU307
 149:Src/LTC6811.c **** 
 856              		.loc 1 149 14 is_stmt 0 view .LVU308
 857 00b8 0623     		movs	r3, #6
 858 00ba 6B70     		strb	r3, [r5, #1]
 151:Src/LTC6811.c **** 	cmd[1] = PEC_send[1];
 859              		.loc 1 151 2 is_stmt 1 view .LVU309
 151:Src/LTC6811.c **** 	cmd[1] = PEC_send[1];
 860              		.loc 1 151 9 is_stmt 0 view .LVU310
 861 00bc 8DF80C60 		strb	r6, [sp, #12]
 152:Src/LTC6811.c **** 	
 862              		.loc 1 152 2 is_stmt 1 view .LVU311
 152:Src/LTC6811.c **** 	
 863              		.loc 1 152 9 is_stmt 0 view .LVU312
 864 00c0 8DF80D30 		strb	r3, [sp, #13]
 154:Src/LTC6811.c **** 	
 865              		.loc 1 154 2 is_stmt 1 view .LVU313
 154:Src/LTC6811.c **** 	
 866              		.loc 1 154 15 is_stmt 0 view .LVU314
 867 00c4 2946     		mov	r1, r5
 868 00c6 0220     		movs	r0, #2
 869 00c8 FFF7FEFF 		bl	calculatePEC
 870              	.LVL64:
 156:Src/LTC6811.c **** 	cmd[3] = PEC_return & 0xFF;
 871              		.loc 1 156 2 is_stmt 1 view .LVU315
 156:Src/LTC6811.c **** 	cmd[3] = PEC_return & 0xFF;
 872              		.loc 1 156 9 is_stmt 0 view .LVU316
 873 00cc 030A     		lsrs	r3, r0, #8
 874 00ce 8DF80E30 		strb	r3, [sp, #14]
 157:Src/LTC6811.c **** 	
ARM GAS  C:\cygwin64\tmp\ccp74qwu.s 			page 27


 875              		.loc 1 157 2 is_stmt 1 view .LVU317
 157:Src/LTC6811.c **** 	
 876              		.loc 1 157 9 is_stmt 0 view .LVU318
 877 00d2 8DF80F00 		strb	r0, [sp, #15]
 159:Src/LTC6811.c **** 	cmd[5] = 0;
 878              		.loc 1 159 2 is_stmt 1 view .LVU319
 159:Src/LTC6811.c **** 	cmd[5] = 0;
 879              		.loc 1 159 9 is_stmt 0 view .LVU320
 880 00d6 8DF81040 		strb	r4, [sp, #16]
 160:Src/LTC6811.c **** 	cmd[6] = 0;
 881              		.loc 1 160 2 is_stmt 1 view .LVU321
 160:Src/LTC6811.c **** 	cmd[6] = 0;
 882              		.loc 1 160 9 is_stmt 0 view .LVU322
 883 00da 8DF81140 		strb	r4, [sp, #17]
 161:Src/LTC6811.c **** 	cmd[7] = 0;
 884              		.loc 1 161 2 is_stmt 1 view .LVU323
 161:Src/LTC6811.c **** 	cmd[7] = 0;
 885              		.loc 1 161 9 is_stmt 0 view .LVU324
 886 00de 8DF81240 		strb	r4, [sp, #18]
 162:Src/LTC6811.c **** 	cmd[8] = 0;
 887              		.loc 1 162 2 is_stmt 1 view .LVU325
 162:Src/LTC6811.c **** 	cmd[8] = 0;
 888              		.loc 1 162 9 is_stmt 0 view .LVU326
 889 00e2 8DF81340 		strb	r4, [sp, #19]
 163:Src/LTC6811.c **** 	cmd[9] = 0;
 890              		.loc 1 163 2 is_stmt 1 view .LVU327
 163:Src/LTC6811.c **** 	cmd[9] = 0;
 891              		.loc 1 163 9 is_stmt 0 view .LVU328
 892 00e6 8DF81440 		strb	r4, [sp, #20]
 164:Src/LTC6811.c **** 	cmd[10] = 0;
 893              		.loc 1 164 2 is_stmt 1 view .LVU329
 164:Src/LTC6811.c **** 	cmd[10] = 0;
 894              		.loc 1 164 9 is_stmt 0 view .LVU330
 895 00ea 8DF81540 		strb	r4, [sp, #21]
 165:Src/LTC6811.c **** 	cmd[11] = 0;
 896              		.loc 1 165 2 is_stmt 1 view .LVU331
 165:Src/LTC6811.c **** 	cmd[11] = 0;
 897              		.loc 1 165 10 is_stmt 0 view .LVU332
 898 00ee 8DF81640 		strb	r4, [sp, #22]
 166:Src/LTC6811.c **** 	
 899              		.loc 1 166 2 is_stmt 1 view .LVU333
 166:Src/LTC6811.c **** 	
 900              		.loc 1 166 10 is_stmt 0 view .LVU334
 901 00f2 8DF81740 		strb	r4, [sp, #23]
 168:Src/LTC6811.c **** 	
 902              		.loc 1 168 2 is_stmt 1 view .LVU335
 903 00f6 0C22     		movs	r2, #12
 904 00f8 6946     		mov	r1, sp
 905 00fa 0DEB0200 		add	r0, sp, r2
 906              	.LVL65:
 168:Src/LTC6811.c **** 	
 907              		.loc 1 168 2 is_stmt 0 view .LVU336
 908 00fe FFF7FEFF 		bl	SPIWriteRead
 909              	.LVL66:
 171:Src/LTC6811.c **** 	PEC_send[1] = rx_data[5]; // cell 4 voltage high bytes
 910              		.loc 1 171 2 is_stmt 1 view .LVU337
 172:Src/LTC6811.c **** 	PEC_send[2] = rx_data[6]; // cell 5 voltage low bytes
ARM GAS  C:\cygwin64\tmp\ccp74qwu.s 			page 28


 911              		.loc 1 172 2 view .LVU338
 172:Src/LTC6811.c **** 	PEC_send[2] = rx_data[6]; // cell 5 voltage low bytes
 912              		.loc 1 172 23 is_stmt 0 view .LVU339
 913 0102 9DF80530 		ldrb	r3, [sp, #5]	@ zero_extendqisi2
 173:Src/LTC6811.c **** 	PEC_send[3] = rx_data[7]; // cell 5 voltage high bytes
 914              		.loc 1 173 2 is_stmt 1 view .LVU340
 173:Src/LTC6811.c **** 	PEC_send[3] = rx_data[7]; // cell 5 voltage high bytes
 915              		.loc 1 173 23 is_stmt 0 view .LVU341
 916 0106 9DF80620 		ldrb	r2, [sp, #6]	@ zero_extendqisi2
 173:Src/LTC6811.c **** 	PEC_send[3] = rx_data[7]; // cell 5 voltage high bytes
 917              		.loc 1 173 14 view .LVU342
 918 010a AA70     		strb	r2, [r5, #2]
 174:Src/LTC6811.c **** 	PEC_send[4] = rx_data[8]; // cell 6 voltage low bytes
 919              		.loc 1 174 2 is_stmt 1 view .LVU343
 174:Src/LTC6811.c **** 	PEC_send[4] = rx_data[8]; // cell 6 voltage low bytes
 920              		.loc 1 174 23 is_stmt 0 view .LVU344
 921 010c 9DF80720 		ldrb	r2, [sp, #7]	@ zero_extendqisi2
 174:Src/LTC6811.c **** 	PEC_send[4] = rx_data[8]; // cell 6 voltage low bytes
 922              		.loc 1 174 14 view .LVU345
 923 0110 EA70     		strb	r2, [r5, #3]
 175:Src/LTC6811.c **** 	PEC_send[5] = rx_data[9]; // cell 6 voltage high bytes
 924              		.loc 1 175 2 is_stmt 1 view .LVU346
 175:Src/LTC6811.c **** 	PEC_send[5] = rx_data[9]; // cell 6 voltage high bytes
 925              		.loc 1 175 23 is_stmt 0 view .LVU347
 926 0112 9DF80820 		ldrb	r2, [sp, #8]	@ zero_extendqisi2
 175:Src/LTC6811.c **** 	PEC_send[5] = rx_data[9]; // cell 6 voltage high bytes
 927              		.loc 1 175 14 view .LVU348
 928 0116 2A71     		strb	r2, [r5, #4]
 176:Src/LTC6811.c **** 	
 929              		.loc 1 176 2 is_stmt 1 view .LVU349
 176:Src/LTC6811.c **** 	
 930              		.loc 1 176 23 is_stmt 0 view .LVU350
 931 0118 9DF80920 		ldrb	r2, [sp, #9]	@ zero_extendqisi2
 176:Src/LTC6811.c **** 	
 932              		.loc 1 176 14 view .LVU351
 933 011c 6A71     		strb	r2, [r5, #5]
 178:Src/LTC6811.c **** 	
 934              		.loc 1 178 2 is_stmt 1 view .LVU352
 186:Src/LTC6811.c **** 		cellVoltage[3] = (uint16_t) ((rx_data[5] << 8) & 0xFF00) | (rx_data[4] & 0x00FF); // cell 4 volta
 935              		.loc 1 186 2 view .LVU353
 187:Src/LTC6811.c **** 	}
 936              		.loc 1 187 3 view .LVU354
 187:Src/LTC6811.c **** 	}
 937              		.loc 1 187 44 is_stmt 0 view .LVU355
 938 011e 1B02     		lsls	r3, r3, #8
 187:Src/LTC6811.c **** 	}
 939              		.loc 1 187 20 view .LVU356
 940 0120 1BB2     		sxth	r3, r3
 187:Src/LTC6811.c **** 	}
 941              		.loc 1 187 70 view .LVU357
 942 0122 9DF80420 		ldrb	r2, [sp, #4]	@ zero_extendqisi2
 187:Src/LTC6811.c **** 	}
 943              		.loc 1 187 60 view .LVU358
 944 0126 1343     		orrs	r3, r3, r2
 187:Src/LTC6811.c **** 	}
 945              		.loc 1 187 18 view .LVU359
 946 0128 FB80     		strh	r3, [r7, #6]	@ movhi
ARM GAS  C:\cygwin64\tmp\ccp74qwu.s 			page 29


 191:Src/LTC6811.c **** 	PEC_send[1] = (uint8_t) (ReadCellVoltageRegisterGroup7to9 & 0xFF);
 947              		.loc 1 191 2 is_stmt 1 view .LVU360
 191:Src/LTC6811.c **** 	PEC_send[1] = (uint8_t) (ReadCellVoltageRegisterGroup7to9 & 0xFF);
 948              		.loc 1 191 14 is_stmt 0 view .LVU361
 949 012a 2E70     		strb	r6, [r5]
 192:Src/LTC6811.c **** 
 950              		.loc 1 192 2 is_stmt 1 view .LVU362
 192:Src/LTC6811.c **** 
 951              		.loc 1 192 14 is_stmt 0 view .LVU363
 952 012c 0823     		movs	r3, #8
 953 012e 6B70     		strb	r3, [r5, #1]
 194:Src/LTC6811.c **** 	cmd[1] = PEC_send[1];
 954              		.loc 1 194 2 is_stmt 1 view .LVU364
 194:Src/LTC6811.c **** 	cmd[1] = PEC_send[1];
 955              		.loc 1 194 9 is_stmt 0 view .LVU365
 956 0130 8DF80C60 		strb	r6, [sp, #12]
 195:Src/LTC6811.c **** 	
 957              		.loc 1 195 2 is_stmt 1 view .LVU366
 195:Src/LTC6811.c **** 	
 958              		.loc 1 195 9 is_stmt 0 view .LVU367
 959 0134 8DF80D30 		strb	r3, [sp, #13]
 197:Src/LTC6811.c **** 	
 960              		.loc 1 197 2 is_stmt 1 view .LVU368
 197:Src/LTC6811.c **** 	
 961              		.loc 1 197 15 is_stmt 0 view .LVU369
 962 0138 2946     		mov	r1, r5
 963 013a 0220     		movs	r0, #2
 964 013c FFF7FEFF 		bl	calculatePEC
 965              	.LVL67:
 199:Src/LTC6811.c **** 	cmd[3] = PEC_return & 0xFF;
 966              		.loc 1 199 2 is_stmt 1 view .LVU370
 199:Src/LTC6811.c **** 	cmd[3] = PEC_return & 0xFF;
 967              		.loc 1 199 9 is_stmt 0 view .LVU371
 968 0140 030A     		lsrs	r3, r0, #8
 969 0142 8DF80E30 		strb	r3, [sp, #14]
 200:Src/LTC6811.c **** 	
 970              		.loc 1 200 2 is_stmt 1 view .LVU372
 200:Src/LTC6811.c **** 	
 971              		.loc 1 200 9 is_stmt 0 view .LVU373
 972 0146 8DF80F00 		strb	r0, [sp, #15]
 202:Src/LTC6811.c **** 	cmd[5] = 0;
 973              		.loc 1 202 2 is_stmt 1 view .LVU374
 202:Src/LTC6811.c **** 	cmd[5] = 0;
 974              		.loc 1 202 9 is_stmt 0 view .LVU375
 975 014a 8DF81040 		strb	r4, [sp, #16]
 203:Src/LTC6811.c **** 	cmd[6] = 0;
 976              		.loc 1 203 2 is_stmt 1 view .LVU376
 203:Src/LTC6811.c **** 	cmd[6] = 0;
 977              		.loc 1 203 9 is_stmt 0 view .LVU377
 978 014e 8DF81140 		strb	r4, [sp, #17]
 204:Src/LTC6811.c **** 	cmd[7] = 0;
 979              		.loc 1 204 2 is_stmt 1 view .LVU378
 204:Src/LTC6811.c **** 	cmd[7] = 0;
 980              		.loc 1 204 9 is_stmt 0 view .LVU379
 981 0152 8DF81240 		strb	r4, [sp, #18]
 205:Src/LTC6811.c **** 	cmd[8] = 0;
 982              		.loc 1 205 2 is_stmt 1 view .LVU380
ARM GAS  C:\cygwin64\tmp\ccp74qwu.s 			page 30


 205:Src/LTC6811.c **** 	cmd[8] = 0;
 983              		.loc 1 205 9 is_stmt 0 view .LVU381
 984 0156 8DF81340 		strb	r4, [sp, #19]
 206:Src/LTC6811.c **** 	cmd[9] = 0;
 985              		.loc 1 206 2 is_stmt 1 view .LVU382
 206:Src/LTC6811.c **** 	cmd[9] = 0;
 986              		.loc 1 206 9 is_stmt 0 view .LVU383
 987 015a 8DF81440 		strb	r4, [sp, #20]
 207:Src/LTC6811.c **** 	cmd[10] = 0;
 988              		.loc 1 207 2 is_stmt 1 view .LVU384
 207:Src/LTC6811.c **** 	cmd[10] = 0;
 989              		.loc 1 207 9 is_stmt 0 view .LVU385
 990 015e 8DF81540 		strb	r4, [sp, #21]
 208:Src/LTC6811.c **** 	cmd[11] = 0;
 991              		.loc 1 208 2 is_stmt 1 view .LVU386
 208:Src/LTC6811.c **** 	cmd[11] = 0;
 992              		.loc 1 208 10 is_stmt 0 view .LVU387
 993 0162 8DF81640 		strb	r4, [sp, #22]
 209:Src/LTC6811.c **** 	
 994              		.loc 1 209 2 is_stmt 1 view .LVU388
 209:Src/LTC6811.c **** 	
 995              		.loc 1 209 10 is_stmt 0 view .LVU389
 996 0166 8DF81740 		strb	r4, [sp, #23]
 211:Src/LTC6811.c **** 	
 997              		.loc 1 211 2 is_stmt 1 view .LVU390
 998 016a 0C22     		movs	r2, #12
 999 016c 6946     		mov	r1, sp
 1000 016e 0DEB0200 		add	r0, sp, r2
 1001              	.LVL68:
 211:Src/LTC6811.c **** 	
 1002              		.loc 1 211 2 is_stmt 0 view .LVU391
 1003 0172 FFF7FEFF 		bl	SPIWriteRead
 1004              	.LVL69:
 214:Src/LTC6811.c **** 	PEC_send[1] = rx_data[5]; // cell 7 voltage high bytes
 1005              		.loc 1 214 2 is_stmt 1 view .LVU392
 215:Src/LTC6811.c **** 	PEC_send[2] = rx_data[6]; // cell 8 voltage low bytes
 1006              		.loc 1 215 2 view .LVU393
 215:Src/LTC6811.c **** 	PEC_send[2] = rx_data[6]; // cell 8 voltage low bytes
 1007              		.loc 1 215 23 is_stmt 0 view .LVU394
 1008 0176 9DF80530 		ldrb	r3, [sp, #5]	@ zero_extendqisi2
 216:Src/LTC6811.c **** 	PEC_send[3] = rx_data[7]; // cell 8 voltage high bytes
 1009              		.loc 1 216 2 is_stmt 1 view .LVU395
 216:Src/LTC6811.c **** 	PEC_send[3] = rx_data[7]; // cell 8 voltage high bytes
 1010              		.loc 1 216 23 is_stmt 0 view .LVU396
 1011 017a 9DF806C0 		ldrb	ip, [sp, #6]	@ zero_extendqisi2
 216:Src/LTC6811.c **** 	PEC_send[3] = rx_data[7]; // cell 8 voltage high bytes
 1012              		.loc 1 216 14 view .LVU397
 1013 017e 85F802C0 		strb	ip, [r5, #2]
 217:Src/LTC6811.c **** 	PEC_send[4] = rx_data[8]; // cell 9 voltage low bytes
 1014              		.loc 1 217 2 is_stmt 1 view .LVU398
 217:Src/LTC6811.c **** 	PEC_send[4] = rx_data[8]; // cell 9 voltage low bytes
 1015              		.loc 1 217 23 is_stmt 0 view .LVU399
 1016 0182 9DF80710 		ldrb	r1, [sp, #7]	@ zero_extendqisi2
 217:Src/LTC6811.c **** 	PEC_send[4] = rx_data[8]; // cell 9 voltage low bytes
 1017              		.loc 1 217 14 view .LVU400
 1018 0186 E970     		strb	r1, [r5, #3]
 218:Src/LTC6811.c **** 	PEC_send[5] = rx_data[9]; // cell 9 voltage high bytes
ARM GAS  C:\cygwin64\tmp\ccp74qwu.s 			page 31


 1019              		.loc 1 218 2 is_stmt 1 view .LVU401
 218:Src/LTC6811.c **** 	PEC_send[5] = rx_data[9]; // cell 9 voltage high bytes
 1020              		.loc 1 218 23 is_stmt 0 view .LVU402
 1021 0188 9DF80800 		ldrb	r0, [sp, #8]	@ zero_extendqisi2
 218:Src/LTC6811.c **** 	PEC_send[5] = rx_data[9]; // cell 9 voltage high bytes
 1022              		.loc 1 218 14 view .LVU403
 1023 018c 2871     		strb	r0, [r5, #4]
 219:Src/LTC6811.c **** 	
 1024              		.loc 1 219 2 is_stmt 1 view .LVU404
 219:Src/LTC6811.c **** 	
 1025              		.loc 1 219 23 is_stmt 0 view .LVU405
 1026 018e 9DF80920 		ldrb	r2, [sp, #9]	@ zero_extendqisi2
 219:Src/LTC6811.c **** 	
 1027              		.loc 1 219 14 view .LVU406
 1028 0192 6A71     		strb	r2, [r5, #5]
 221:Src/LTC6811.c **** 	
 1029              		.loc 1 221 2 is_stmt 1 view .LVU407
 229:Src/LTC6811.c **** 		cellVoltage[4] = (uint16_t) ((rx_data[5] << 8) & 0xFF00) | (rx_data[4] & 0x00FF); // cell 7 volta
 1030              		.loc 1 229 2 view .LVU408
 230:Src/LTC6811.c **** 		cellVoltage[5] = (uint16_t) ((rx_data[7] << 8) & 0xFF00) | (rx_data[6] & 0x00FF); // cell 8 volta
 1031              		.loc 1 230 3 view .LVU409
 230:Src/LTC6811.c **** 		cellVoltage[5] = (uint16_t) ((rx_data[7] << 8) & 0xFF00) | (rx_data[6] & 0x00FF); // cell 8 volta
 1032              		.loc 1 230 44 is_stmt 0 view .LVU410
 1033 0194 1B02     		lsls	r3, r3, #8
 230:Src/LTC6811.c **** 		cellVoltage[5] = (uint16_t) ((rx_data[7] << 8) & 0xFF00) | (rx_data[6] & 0x00FF); // cell 8 volta
 1034              		.loc 1 230 20 view .LVU411
 1035 0196 1BB2     		sxth	r3, r3
 230:Src/LTC6811.c **** 		cellVoltage[5] = (uint16_t) ((rx_data[7] << 8) & 0xFF00) | (rx_data[6] & 0x00FF); // cell 8 volta
 1036              		.loc 1 230 70 view .LVU412
 1037 0198 9DF804E0 		ldrb	lr, [sp, #4]	@ zero_extendqisi2
 230:Src/LTC6811.c **** 		cellVoltage[5] = (uint16_t) ((rx_data[7] << 8) & 0xFF00) | (rx_data[6] & 0x00FF); // cell 8 volta
 1038              		.loc 1 230 60 view .LVU413
 1039 019c 43EA0E03 		orr	r3, r3, lr
 230:Src/LTC6811.c **** 		cellVoltage[5] = (uint16_t) ((rx_data[7] << 8) & 0xFF00) | (rx_data[6] & 0x00FF); // cell 8 volta
 1040              		.loc 1 230 18 view .LVU414
 1041 01a0 3B81     		strh	r3, [r7, #8]	@ movhi
 231:Src/LTC6811.c **** 		cellVoltage[6] = (uint16_t) ((rx_data[9] << 8) & 0xFF00) | (rx_data[8] & 0x00FF); // cell 9 volta
 1042              		.loc 1 231 3 is_stmt 1 view .LVU415
 231:Src/LTC6811.c **** 		cellVoltage[6] = (uint16_t) ((rx_data[9] << 8) & 0xFF00) | (rx_data[8] & 0x00FF); // cell 9 volta
 1043              		.loc 1 231 44 is_stmt 0 view .LVU416
 1044 01a2 0902     		lsls	r1, r1, #8
 231:Src/LTC6811.c **** 		cellVoltage[6] = (uint16_t) ((rx_data[9] << 8) & 0xFF00) | (rx_data[8] & 0x00FF); // cell 9 volta
 1045              		.loc 1 231 20 view .LVU417
 1046 01a4 09B2     		sxth	r1, r1
 231:Src/LTC6811.c **** 		cellVoltage[6] = (uint16_t) ((rx_data[9] << 8) & 0xFF00) | (rx_data[8] & 0x00FF); // cell 9 volta
 1047              		.loc 1 231 60 view .LVU418
 1048 01a6 4CEA0101 		orr	r1, ip, r1
 231:Src/LTC6811.c **** 		cellVoltage[6] = (uint16_t) ((rx_data[9] << 8) & 0xFF00) | (rx_data[8] & 0x00FF); // cell 9 volta
 1049              		.loc 1 231 18 view .LVU419
 1050 01aa 7981     		strh	r1, [r7, #10]	@ movhi
 232:Src/LTC6811.c **** 	}
 1051              		.loc 1 232 3 is_stmt 1 view .LVU420
 232:Src/LTC6811.c **** 	}
 1052              		.loc 1 232 44 is_stmt 0 view .LVU421
 1053 01ac 1202     		lsls	r2, r2, #8
 232:Src/LTC6811.c **** 	}
 1054              		.loc 1 232 20 view .LVU422
ARM GAS  C:\cygwin64\tmp\ccp74qwu.s 			page 32


 1055 01ae 12B2     		sxth	r2, r2
 232:Src/LTC6811.c **** 	}
 1056              		.loc 1 232 60 view .LVU423
 1057 01b0 0243     		orrs	r2, r2, r0
 232:Src/LTC6811.c **** 	}
 1058              		.loc 1 232 18 view .LVU424
 1059 01b2 BA81     		strh	r2, [r7, #12]	@ movhi
 236:Src/LTC6811.c **** 	PEC_send[1] = (uint8_t) (ReadCellVoltageRegisterGroup10to12 & 0xFF);
 1060              		.loc 1 236 2 is_stmt 1 view .LVU425
 236:Src/LTC6811.c **** 	PEC_send[1] = (uint8_t) (ReadCellVoltageRegisterGroup10to12 & 0xFF);
 1061              		.loc 1 236 14 is_stmt 0 view .LVU426
 1062 01b4 2E70     		strb	r6, [r5]
 237:Src/LTC6811.c **** 
 1063              		.loc 1 237 2 is_stmt 1 view .LVU427
 237:Src/LTC6811.c **** 
 1064              		.loc 1 237 14 is_stmt 0 view .LVU428
 1065 01b6 0A23     		movs	r3, #10
 1066 01b8 6B70     		strb	r3, [r5, #1]
 239:Src/LTC6811.c **** 	cmd[1] = PEC_send[1];
 1067              		.loc 1 239 2 is_stmt 1 view .LVU429
 239:Src/LTC6811.c **** 	cmd[1] = PEC_send[1];
 1068              		.loc 1 239 9 is_stmt 0 view .LVU430
 1069 01ba 8DF80C60 		strb	r6, [sp, #12]
 240:Src/LTC6811.c **** 	
 1070              		.loc 1 240 2 is_stmt 1 view .LVU431
 240:Src/LTC6811.c **** 	
 1071              		.loc 1 240 9 is_stmt 0 view .LVU432
 1072 01be 8DF80D30 		strb	r3, [sp, #13]
 242:Src/LTC6811.c **** 	
 1073              		.loc 1 242 2 is_stmt 1 view .LVU433
 242:Src/LTC6811.c **** 	
 1074              		.loc 1 242 15 is_stmt 0 view .LVU434
 1075 01c2 2946     		mov	r1, r5
 1076 01c4 0220     		movs	r0, #2
 1077 01c6 FFF7FEFF 		bl	calculatePEC
 1078              	.LVL70:
 244:Src/LTC6811.c **** 	cmd[3] = PEC_return & 0xFF;
 1079              		.loc 1 244 2 is_stmt 1 view .LVU435
 244:Src/LTC6811.c **** 	cmd[3] = PEC_return & 0xFF;
 1080              		.loc 1 244 9 is_stmt 0 view .LVU436
 1081 01ca 030A     		lsrs	r3, r0, #8
 1082 01cc 8DF80E30 		strb	r3, [sp, #14]
 245:Src/LTC6811.c **** 	
 1083              		.loc 1 245 2 is_stmt 1 view .LVU437
 245:Src/LTC6811.c **** 	
 1084              		.loc 1 245 9 is_stmt 0 view .LVU438
 1085 01d0 8DF80F00 		strb	r0, [sp, #15]
 247:Src/LTC6811.c **** 	cmd[5] = 0;
 1086              		.loc 1 247 2 is_stmt 1 view .LVU439
 247:Src/LTC6811.c **** 	cmd[5] = 0;
 1087              		.loc 1 247 9 is_stmt 0 view .LVU440
 1088 01d4 8DF81040 		strb	r4, [sp, #16]
 248:Src/LTC6811.c **** 	cmd[6] = 0;
 1089              		.loc 1 248 2 is_stmt 1 view .LVU441
 248:Src/LTC6811.c **** 	cmd[6] = 0;
 1090              		.loc 1 248 9 is_stmt 0 view .LVU442
 1091 01d8 8DF81140 		strb	r4, [sp, #17]
ARM GAS  C:\cygwin64\tmp\ccp74qwu.s 			page 33


 249:Src/LTC6811.c **** 	cmd[7] = 0;
 1092              		.loc 1 249 2 is_stmt 1 view .LVU443
 249:Src/LTC6811.c **** 	cmd[7] = 0;
 1093              		.loc 1 249 9 is_stmt 0 view .LVU444
 1094 01dc 8DF81240 		strb	r4, [sp, #18]
 250:Src/LTC6811.c **** 	cmd[8] = 0;
 1095              		.loc 1 250 2 is_stmt 1 view .LVU445
 250:Src/LTC6811.c **** 	cmd[8] = 0;
 1096              		.loc 1 250 9 is_stmt 0 view .LVU446
 1097 01e0 8DF81340 		strb	r4, [sp, #19]
 251:Src/LTC6811.c **** 	cmd[9] = 0;
 1098              		.loc 1 251 2 is_stmt 1 view .LVU447
 251:Src/LTC6811.c **** 	cmd[9] = 0;
 1099              		.loc 1 251 9 is_stmt 0 view .LVU448
 1100 01e4 8DF81440 		strb	r4, [sp, #20]
 252:Src/LTC6811.c **** 	cmd[10] = 0;
 1101              		.loc 1 252 2 is_stmt 1 view .LVU449
 252:Src/LTC6811.c **** 	cmd[10] = 0;
 1102              		.loc 1 252 9 is_stmt 0 view .LVU450
 1103 01e8 8DF81540 		strb	r4, [sp, #21]
 253:Src/LTC6811.c **** 	cmd[11] = 0;
 1104              		.loc 1 253 2 is_stmt 1 view .LVU451
 253:Src/LTC6811.c **** 	cmd[11] = 0;
 1105              		.loc 1 253 10 is_stmt 0 view .LVU452
 1106 01ec 8DF81640 		strb	r4, [sp, #22]
 254:Src/LTC6811.c **** 	
 1107              		.loc 1 254 2 is_stmt 1 view .LVU453
 254:Src/LTC6811.c **** 	
 1108              		.loc 1 254 10 is_stmt 0 view .LVU454
 1109 01f0 8DF81740 		strb	r4, [sp, #23]
 256:Src/LTC6811.c **** 	
 1110              		.loc 1 256 2 is_stmt 1 view .LVU455
 1111 01f4 0C22     		movs	r2, #12
 1112 01f6 6946     		mov	r1, sp
 1113 01f8 0DEB0200 		add	r0, sp, r2
 1114              	.LVL71:
 256:Src/LTC6811.c **** 	
 1115              		.loc 1 256 2 is_stmt 0 view .LVU456
 1116 01fc FFF7FEFF 		bl	SPIWriteRead
 1117              	.LVL72:
 259:Src/LTC6811.c **** 	PEC_send[1] = rx_data[5]; // cell 10 voltage high bytes
 1118              		.loc 1 259 2 is_stmt 1 view .LVU457
 259:Src/LTC6811.c **** 	PEC_send[1] = rx_data[5]; // cell 10 voltage high bytes
 1119              		.loc 1 259 23 is_stmt 0 view .LVU458
 1120 0200 9DF80420 		ldrb	r2, [sp, #4]	@ zero_extendqisi2
 259:Src/LTC6811.c **** 	PEC_send[1] = rx_data[5]; // cell 10 voltage high bytes
 1121              		.loc 1 259 14 view .LVU459
 1122 0204 2A70     		strb	r2, [r5]
 260:Src/LTC6811.c **** 	PEC_send[2] = rx_data[6]; // cell 11 voltage low bytes
 1123              		.loc 1 260 2 is_stmt 1 view .LVU460
 260:Src/LTC6811.c **** 	PEC_send[2] = rx_data[6]; // cell 11 voltage low bytes
 1124              		.loc 1 260 23 is_stmt 0 view .LVU461
 1125 0206 9DF80530 		ldrb	r3, [sp, #5]	@ zero_extendqisi2
 260:Src/LTC6811.c **** 	PEC_send[2] = rx_data[6]; // cell 11 voltage low bytes
 1126              		.loc 1 260 14 view .LVU462
 1127 020a 6B70     		strb	r3, [r5, #1]
 261:Src/LTC6811.c **** 	PEC_send[3] = rx_data[7]; // cell 11 voltage high bytes
ARM GAS  C:\cygwin64\tmp\ccp74qwu.s 			page 34


 1128              		.loc 1 261 2 is_stmt 1 view .LVU463
 261:Src/LTC6811.c **** 	PEC_send[3] = rx_data[7]; // cell 11 voltage high bytes
 1129              		.loc 1 261 23 is_stmt 0 view .LVU464
 1130 020c 9DF80610 		ldrb	r1, [sp, #6]	@ zero_extendqisi2
 261:Src/LTC6811.c **** 	PEC_send[3] = rx_data[7]; // cell 11 voltage high bytes
 1131              		.loc 1 261 14 view .LVU465
 1132 0210 A970     		strb	r1, [r5, #2]
 262:Src/LTC6811.c **** 	PEC_send[4] = rx_data[8]; // cell 12 voltage low bytes
 1133              		.loc 1 262 2 is_stmt 1 view .LVU466
 262:Src/LTC6811.c **** 	PEC_send[4] = rx_data[8]; // cell 12 voltage low bytes
 1134              		.loc 1 262 23 is_stmt 0 view .LVU467
 1135 0212 9DF80710 		ldrb	r1, [sp, #7]	@ zero_extendqisi2
 262:Src/LTC6811.c **** 	PEC_send[4] = rx_data[8]; // cell 12 voltage low bytes
 1136              		.loc 1 262 14 view .LVU468
 1137 0216 E970     		strb	r1, [r5, #3]
 263:Src/LTC6811.c **** 	PEC_send[5] = rx_data[9]; // cell 12 voltage high bytes
 1138              		.loc 1 263 2 is_stmt 1 view .LVU469
 263:Src/LTC6811.c **** 	PEC_send[5] = rx_data[9]; // cell 12 voltage high bytes
 1139              		.loc 1 263 23 is_stmt 0 view .LVU470
 1140 0218 9DF80810 		ldrb	r1, [sp, #8]	@ zero_extendqisi2
 263:Src/LTC6811.c **** 	PEC_send[5] = rx_data[9]; // cell 12 voltage high bytes
 1141              		.loc 1 263 14 view .LVU471
 1142 021c 2971     		strb	r1, [r5, #4]
 264:Src/LTC6811.c **** 	
 1143              		.loc 1 264 2 is_stmt 1 view .LVU472
 264:Src/LTC6811.c **** 	
 1144              		.loc 1 264 23 is_stmt 0 view .LVU473
 1145 021e 9DF80910 		ldrb	r1, [sp, #9]	@ zero_extendqisi2
 264:Src/LTC6811.c **** 	
 1146              		.loc 1 264 14 view .LVU474
 1147 0222 6971     		strb	r1, [r5, #5]
 266:Src/LTC6811.c **** 	
 1148              		.loc 1 266 2 is_stmt 1 view .LVU475
 274:Src/LTC6811.c **** 		cellVoltage[7] = (uint16_t) ((rx_data[5] << 8) & 0xFF00) | (rx_data[4] & 0x00FF); // cell 7 volta
 1149              		.loc 1 274 2 view .LVU476
 275:Src/LTC6811.c **** 	}
 1150              		.loc 1 275 3 view .LVU477
 275:Src/LTC6811.c **** 	}
 1151              		.loc 1 275 44 is_stmt 0 view .LVU478
 1152 0224 1B02     		lsls	r3, r3, #8
 275:Src/LTC6811.c **** 	}
 1153              		.loc 1 275 20 view .LVU479
 1154 0226 1BB2     		sxth	r3, r3
 275:Src/LTC6811.c **** 	}
 1155              		.loc 1 275 60 view .LVU480
 1156 0228 1343     		orrs	r3, r3, r2
 275:Src/LTC6811.c **** 	}
 1157              		.loc 1 275 18 view .LVU481
 1158 022a FB81     		strh	r3, [r7, #14]	@ movhi
 278:Src/LTC6811.c **** 	
 1159              		.loc 1 278 2 is_stmt 1 view .LVU482
 1160 022c 2846     		mov	r0, r5
 1161 022e FFF7FEFF 		bl	free
 1162              	.LVL73:
 280:Src/LTC6811.c **** 	
 1163              		.loc 1 280 2 view .LVU483
 282:Src/LTC6811.c **** 
ARM GAS  C:\cygwin64\tmp\ccp74qwu.s 			page 35


 1164              		.loc 1 282 1 is_stmt 0 view .LVU484
 1165 0232 0120     		movs	r0, #1
 1166 0234 07B0     		add	sp, sp, #28
 1167              	.LCFI16:
 1168              		.cfi_def_cfa_offset 20
 1169              		@ sp needed
 1170 0236 F0BD     		pop	{r4, r5, r6, r7, pc}
 282:Src/LTC6811.c **** 
 1171              		.loc 1 282 1 view .LVU485
 1172              		.cfi_endproc
 1173              	.LFE68:
 1175              		.global	CRC15_POLY
 1176              		.comm	pec15Table,512,4
 1177              		.section	.data.CRC15_POLY,"aw"
 1178              		.align	1
 1179              		.set	.LANCHOR0,. + 0
 1182              	CRC15_POLY:
 1183 0000 9945     		.short	17817
 1184              		.text
 1185              	.Letext0:
 1186              		.file 2 "c:\\arm-gcc\\8-2018-q4-major\\arm-none-eabi\\include\\machine\\_default_types.h"
 1187              		.file 3 "c:\\arm-gcc\\8-2018-q4-major\\arm-none-eabi\\include\\sys\\_stdint.h"
 1188              		.file 4 "Drivers/CMSIS/Include/core_cm3.h"
 1189              		.file 5 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/system_stm32f1xx.h"
 1190              		.file 6 "c:\\arm-gcc\\8-2018-q4-major\\arm-none-eabi\\include\\sys\\lock.h"
 1191              		.file 7 "c:\\arm-gcc\\8-2018-q4-major\\arm-none-eabi\\include\\sys\\_types.h"
 1192              		.file 8 "c:\\arm-gcc\\8-2018-q4-major\\lib\\gcc\\arm-none-eabi\\8.2.1\\include\\stddef.h"
 1193              		.file 9 "c:\\arm-gcc\\8-2018-q4-major\\arm-none-eabi\\include\\sys\\reent.h"
 1194              		.file 10 "c:\\arm-gcc\\8-2018-q4-major\\arm-none-eabi\\include\\stdlib.h"
 1195              		.file 11 "Inc/BMSconfig.h"
 1196              		.file 12 "Inc/LTC6811.h"
 1197              		.file 13 "Inc/SPI.h"
 1198              		.file 14 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal.h"
ARM GAS  C:\cygwin64\tmp\ccp74qwu.s 			page 36


DEFINED SYMBOLS
                            *ABS*:00000000 LTC6811.c
C:\cygwin64\tmp\ccp74qwu.s:16     .text.initPECTable:00000000 $t
C:\cygwin64\tmp\ccp74qwu.s:24     .text.initPECTable:00000000 initPECTable
C:\cygwin64\tmp\ccp74qwu.s:118    .text.initPECTable:00000038 $d
                            *COM*:00000200 pec15Table
C:\cygwin64\tmp\ccp74qwu.s:124    .text.calculatePEC:00000000 $t
C:\cygwin64\tmp\ccp74qwu.s:131    .text.calculatePEC:00000000 calculatePEC
C:\cygwin64\tmp\ccp74qwu.s:207    .text.calculatePEC:0000002c $d
C:\cygwin64\tmp\ccp74qwu.s:212    .text.writeConfig:00000000 $t
C:\cygwin64\tmp\ccp74qwu.s:219    .text.writeConfig:00000000 writeConfig
C:\cygwin64\tmp\ccp74qwu.s:509    .text.sendBroadcastCommand:00000000 $t
C:\cygwin64\tmp\ccp74qwu.s:516    .text.sendBroadcastCommand:00000000 sendBroadcastCommand
C:\cygwin64\tmp\ccp74qwu.s:573    .text.sendAddressCommand:00000000 $t
C:\cygwin64\tmp\ccp74qwu.s:580    .text.sendAddressCommand:00000000 sendAddressCommand
C:\cygwin64\tmp\ccp74qwu.s:676    .text.readCellVoltage:00000000 $t
C:\cygwin64\tmp\ccp74qwu.s:683    .text.readCellVoltage:00000000 readCellVoltage
C:\cygwin64\tmp\ccp74qwu.s:1182   .data.CRC15_POLY:00000000 CRC15_POLY
C:\cygwin64\tmp\ccp74qwu.s:1178   .data.CRC15_POLY:00000000 $d

UNDEFINED SYMBOLS
malloc
SPIWrite
HAL_Delay
free
SPIWriteRead
